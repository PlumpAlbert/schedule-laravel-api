{"version":3,"sources":["store/app/header.ts","API.ts","store/app/index.ts","types.ts","Helpers.ts","store/schedule/subject.ts","store/schedule/index.ts","store/index.ts","components/PageHeader/SearchInput.tsx","components/PageHeader/index.tsx","components/PageFooter.tsx","hooks/useSpecialties.ts","components/MenuSlider/UserView/GroupSelectDialog.tsx","components/MenuSlider/UserView/index.tsx","components/MenuSlider/index.tsx","components/SwipeAction.tsx","pages/ScheduleView/SubjectView.tsx","pages/ScheduleView/SchedulePresenter.tsx","pages/ScheduleView/index.tsx","pages/LandingPage.tsx","pages/EditSubjectPage/FormControls/TitleControl.tsx","pages/EditSubjectPage/FormControls/TypeControl.tsx","pages/EditSubjectPage/FormControls/TeacherControl.tsx","pages/EditSubjectPage/FormControls/ScheduleTimes/TimeItem.tsx","pages/EditSubjectPage/FormControls/ScheduleTimes/TimeList.tsx","pages/EditSubjectPage/FormControls/ScheduleTimes/AddTimeDialog.tsx","pages/EditSubjectPage/FormControls/ScheduleTimes/index.tsx","pages/EditSubjectPage/reducer.ts","pages/EditSubjectPage/index.tsx","pages/LoginPage.tsx","pages/GroupsListPage/FacultiesView.tsx","components/SpecialtyAccordion.tsx","pages/GroupsListPage/CreateDialog.tsx","pages/GroupsListPage/SpecialtiesView.tsx","pages/GroupsListPage/index.tsx","pages/Page404.tsx","pages/SignUpPage/GroupSelect.tsx","pages/SignUpPage/index.tsx","components/FacultyAccordion.tsx","pages/SearchPage.tsx","App.tsx","index.tsx"],"names":["LeftIcon","RightIcon","SearchDisplay","initialState","searchValue","searchDisplay","NONE","leftIcon","MENU","rightIcon","title","save","actions","setTitle","createAction","setSearchValue","setSearchDisplay","setRightIcon","setLeftIcon","setSave","store","createSlice","name","reducers","extraReducers","builder","addCase","state","payload","selectAppHeader","application","header","ScheduleAPI","err","process","HOST","CSRFCookie","axios","URL","origin","fetchSchedule","groupId","controller","a","fetch","signal","response","json","result","midnight","Date","body","map","subject","times","attendTime","time","getTime","authenticate","login","password","request","url","method","data","status","access_token","user","localStorage","setItem","JSON","stringify","fetchSpecialties","faculty","error","Object","keys","key","courses","signUp","group_id","group","id","updateUser","headers","Authorization","getItem","signOut","then","success","catch","searchGroup","searchString","getTeachers","message","handleError","createGroup","abortController","createAttendTime","createSubject","teacher","toLocaleTimeString","updateSubject","subjectProperties","deleteSubject","subjectId","storageUser","WEEK_TYPE","WEEKDAY","showMenu","showFooter","headerInitState","parse","toggleMenu","closeMenu","toggleFooter","hideFooter","setUser","setUserGroup","FULL","ICON","undefined","addMatcher","action","headerActions","some","match","headerReducer","selectUser","SUBJECT_TYPE","UserType","FACULTY","GetWeekdayName","weekday","date","setDate","getDate","toLocaleDateString","GetWeekType","firstWeek","getMonth","getFullYear","getDay","Math","floor","GREEN","WHITE","GetSubjectTypeAsString","type","calculateCourse","groupYear","number","calculateYear","course","today","year","renderTime","now","endTime","setHours","getHours","setMinutes","getMinutes","locale","navigator","languages","length","hour","minute","hasOwnProperty","obj","prop","ACTION_TYPES","ЛЕКЦИЯ","update","updateProperty","addAttendTime","deleteAttendTime","updateAttendTimeProperty","updateAttendTime","slice","find","t","forEach","isCreated","property","value","push","index","findIndex","splice","currentGroup","editMode","subjects","currentDay","currentWeek","setCurrentGroup","setWeekday","setWeekType","toggleWeekType","toggleEditing","setSchedule","addSubject","findSubjectCallback","teacherId","s","forwardSubjectAction","subjectReducer","SUBJECT_ACTION_TYPES","scheduleSlice","selectSchedule","schedule","configureStore","reducer","applicationReducer","scheduleReducer","useDispatch","reduxUseDispatch","useSelector","reduxUseSelector","SearchInput","searchInputRef","useRef","navigate","useNavigate","dispatch","variant","setSearchDisplayType","useCallback","handleEnterPress","e","handleSearchValueChanged","target","handleSearchIconClick","current","focus","handleSearchInputBlur","handleCollapseEntered","FormControl","className","Icon","onClick","Collapse","orientation","in","onEntered","Input","inputRef","onBlur","placeholder","onChange","onKeyPress","endAdornment","InputAdornment","position","PageHeader","location","useLocation","useEffect","uri","pathname","split","BACK","TODAY","CANCEL","SAVE","onSaveClick","onMenuClick","appActions","onTodayClick","scheduleActions","onBackClick","leftSideIcon","useMemo","classes","root","rightSideIcon","SEARCH","isScrolled","useScrollTrigger","disableHysteresis","threshold","AppBar","elevation","PageFooter","Link","href","useSpecialties","useState","specialties","setSpecialties","isLoading","setLoading","AbortController","aborted","console","abort","GroupSelectDialog","defaultFaculty","defaultSpecialty","specialty","defaultYear","defaultId","open","onClose","setCourse","setSpecialty","setFaculty","setError","facultyOptions","values","MenuItem","specialtyOptions","courseButtons","buttons","i","disabled","c","toString","ToggleButton","selected","resetState","handleSaveChangesClick","Number","handleDialogClose","handleCourseChange","_","newCourses","newCourse","handleSelectChange","Dialog","paper","DialogTitle","TextField","select","label","helperText","SelectProps","InputLabelProps","htmlFor","FormHelperTextProps","ToggleButtonGroup","Button","UserView","onGroupChangeSuccess","dialogOpened","setDialogOpened","groupName","words","reduce","word","toUpperCase","handleGroupChange","handleEditGroupClick","handleSignOutClick","handleEditScheduleClick","handleAddScheduleClick","src","alt","ADMIN","MenuSlider","onOpen","show","alert","setAlert","handleAlertClose","handleKeyDown","SwipeableDrawer","disableBackdropTransition","disableSwipeToOpen","anchor","Snackbar","anchorOrigin","horizontal","vertical","autoHideDuration","Alert","filledSuccess","filledError","severity","sx","width","InputProps","disableElevation","SwipeAction","canSwipe","children","touchTimeThreshold","onAction","swipeX","setX","actionRef","touchesRef","touchStartTimeRef","handleSwipe","touches","performance","deltaX","changedTouches","clientX","handleSwipeEnd","touchTime","actionWidth","getComputedStyle","replace","createClassName","suffix","join","onTouchMove","onTouchEnd","style","transform","borderRadius","ref","SubjectView","typeClass","onDelete","loading","isEditable","ПРАКТИКА","ЛАБОРАТОРНАЯ","handleClick","preventDefault","handleDeleteClick","stopPropagation","ListItem","audience","subjectPlaceholders","SchedulePresenter","weekType","selectedGroup","displayList","concat","query","URLSearchParams","search","get","NaN","handleSubjectClick","handleSubjectDelete","subjectActions","filteredSubjects","filter","sort","b","List","ScheduleView","weekdayRefs","scrollIntoView","behavior","block","inline","handleWeekdayClick","dataset","currentTarget","newDay","handleSwapClick","handleAddSubject","createNew","weekdays","array","Array","SUNDAY","MONDAY","greenWeek","size","color","LandingPage","groupBtnClick","loginBtnClick","signUpBtnClick","TitleControl","handleTitleChanged","fullWidth","TextareaAutosize","minRows","maxRows","defaultValue","TypeControl","handleTypeChanged","Select","labelId","renderValue","TeacherControl","teachers","setTeachers","handleTeacherChanged","selectItems","TimeItem","handleDelete","TimeList","timeNodes","Divider","shortWeekdayName","day","toLocaleString","timeOptions","startTime","AddTimeDialog","setTime","setAudience","weekdayButtons","handleSaveClick","handleCancelClick","handleWeekdayChange","handleAudienceChange","handleTimeChange","ScheduleTimes","showDialog","setShowDialog","editTime","setEditTime","handleWeekTypeChange","toggleDialog","handleTimeClick","handleTimeDelete","Tabs","indicator","toLowerCase","Tab","updateSubjectProperty","newState","oldHistory","newHistory","oldAction","updateAttendProperty","updateActionIndex","history","EditSubjectPage","attendTimeId","reduxDispatch","saved","setSaved","shouldSave","params","initState","useReducer","promises","createdSubject","ScheduleActions","SubjectActions","Promise","all","setTimeout","HeaderActions","CircularProgress","disableShrink","LoginPage","isError","loginRef","passwordRef","handleSubmit","user_login","user_password","log","handleInputChange","text","onSubmit","InputLabel","FormHelperText","Faculty","FacultiesView","facultyElements","f","SpecialtyAccordion","handleCourseClick","elementId","parseInt","bachelor","magistracy","courseNumber","bachelorGroups","magistracyGroups","Accordion","disableGutters","TransitionProps","unmountOnExit","AccordionSummary","expandIcon","fontSize","AccordionDetails","ListSubheader","CreateDialog","fields","setFields","isCreating","setCreating","handleFieldChange","courseOptions","options","handleCreateClick","required","multiline","inputProps","startAdornment","SpecialtiesView","showAlert","setShowAlert","specialtyElements","handleAddClick","GroupsListPage","currentFaculty","decodeURIComponent","Page404","groupReducer","GroupSelect","forwardRef","useImperativeHandle","getState","groupOptions","shortName","w","newOptions","item","itemProp","node","props","SignUpPage","setName","setLogin","setPassword","groupRef","every","sessionStorage","updateFunction","autoComplete","FacultyAccordion","SearchPage","results","setResults","App","document","addEventListener","onkeydown","removeEventListener","toggleMenuVisibility","appClassName","path","element","ReactDOM","render","StrictMode","getElementById"],"mappings":"ihBAGYA,EAOAC,EAOAC,E,sQAdAF,O,eAAAA,I,eAAAA,I,eAAAA,I,oBAAAA,M,cAOAC,O,eAAAA,I,mBAAAA,I,iBAAAA,I,gBAAAA,M,cAOAC,O,eAAAA,I,eAAAA,I,gBAAAA,M,KAeL,IAAMC,EAAuC,CACnDC,YAAa,GACbC,cAAeH,EAAcI,KAC7BC,SAAUP,EAASQ,KACnBC,UAAWR,EAAUK,KACrBI,MAAO,GACPC,MAAM,GAGMC,EAAU,CACtBC,SAAUC,YAAqB,YAC/BC,eAAgBD,YAAqB,kBACrCE,iBAAkBF,YAA4B,oBAC9CG,aAAcH,YAAwB,gBACtCI,YAAaJ,YAAuB,eACpCK,QAASL,YAAsB,gBAG1BM,EAAQC,YAAY,CACzBC,KAAM,qBACNnB,eACAoB,SAAU,GACVC,cAAe,SAAAC,GACdA,EACEC,QAAQd,EAAQC,UAAU,SAACc,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACnCD,EAAMjB,MAAQkB,KAEdF,QAAQd,EAAQG,gBAAgB,SAACY,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACzCD,EAAMvB,YAAcwB,KAEpBF,QAAQd,EAAQI,kBAAkB,SAACW,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QAC3CD,EAAMtB,cAAgBuB,KAEtBF,QAAQd,EAAQM,aAAa,SAACS,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACtCD,EAAMpB,SAAWqB,KAEjBF,QAAQd,EAAQK,cAAc,SAACU,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACvCD,EAAMlB,UAAYmB,KAElBF,QAAQd,EAAQO,SAAS,SAACQ,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QAClCD,EAAMhB,KAAOiB,QAKJC,EAAkB,SAACF,GAAD,OAAsBA,EAAMG,YAAYC,QAExDX,IAAf,Q,kECvDqBY,E,gGAsWpB,SAA2BC,GACtBC,M,KAvWeF,EACLG,KACd,UAEMD,GAFN,QAFmBF,EAMbI,WAAa,kBACnBC,IAAM,GAAD,OAAI,IAAIC,IAAIN,EAAYG,MAAMI,OAA9B,0BAPcP,EAabQ,c,uCAAgB,WACtBC,EACAC,GAFsB,mBAAAC,EAAA,sEAICC,MAAM,GAAD,OACxBZ,EAAYG,KADY,0BACUM,GACrC,CACCI,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,SAPA,cAIhBC,EAJgB,gBAU2BA,EAASC,OAVpC,cAUhBC,EAVgB,OAWhBC,EAAW,IAAIC,KAAK,cAXJ,kBAYfF,EAAOG,KAAKC,KAAI,SAAAC,GAAO,kCAC1BA,GAD0B,IAE7BC,MAAOD,EAAQC,MAAMF,KAAI,SAAAG,GACxB,IAAMC,EAAO,IAAIN,KAAK,cAAgBK,EAAWC,MACjD,OAAO,2BAAID,GAAX,IAAuBC,KAAMA,EAAKC,UAAYR,EAASQ,qBAhBnC,2C,wDAbHzB,EAuCb0B,a,uCAAe,WACrBC,EACAC,EACAlB,GAHqB,qBAAAC,EAAA,sEAKfX,EAAYI,aALG,uBAMEC,IAAMwB,QAK3B,CACDC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,eACH4B,OAAQ,OACRC,KAAM,CACLL,QACAC,YAEDf,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,SAlBA,UAoBG,OAdlBC,EANe,QAoBRmB,OApBQ,yCAoBe,MApBf,gBAqBQnB,EAASkB,KAAKb,KAApCe,EArBc,EAqBdA,aAAcC,EArBA,EAqBAA,KACrBC,aAAaC,QAAQ,eAAgBH,GACrCE,aAAaC,QAAQ,OAAQC,KAAKC,UAAUJ,IAvBvB,kBAwBdA,GAxBc,4C,0DAvCFnC,EAsEbwC,iB,uCAAmB,WACzBC,EACA/B,GAFyB,qBAAAC,EAAA,sEAIFN,IAAMwB,QAM3B,CACDC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,oCAAiDsC,GACpD5B,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,SAZI,UAInBC,EAJmB,SAcHA,EAASkB,KAAxBU,EAdkB,EAclBA,MAAOvB,EAdW,EAcXA,MACVuB,EAfqB,yCAgBjB,MAhBiB,gCAkBlBC,OAAOC,KAAKzB,GAAMC,KAAgB,SAAAyB,GAAG,MAAK,CAChDnE,MAAOmE,EACPC,QAAS3B,EAAK0B,QApBU,2C,wDAtEN7C,EAkGb+C,O,uCAAS,WACfZ,EACAzB,GAFe,uBAAAC,EAAA,sEAIQN,IAAMwB,QAA0B,CACtDC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,SACHU,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,OACpBkB,OAAQ,OACRC,KAAM,CACL1C,KAAM6C,EAAK7C,KACXqC,MAAOQ,EAAKR,MACZqB,SAAQ,UAAEb,EAAKc,aAAP,aAAE,EAAYC,GACtBtB,SAAUO,EAAKP,YAZF,UAITd,EAJS,SAeOA,EAASkB,KAAxBU,EAfQ,EAeRA,MAAOvB,EAfC,EAeDA,MACVuB,EAhBW,0EAmBRvB,GAnBQ,2C,wDAlGInB,EA6HbmD,W,uCAAa,WACnBnB,EACAtB,GAFmB,qBAAAC,EAAA,sEAIIN,IAAMwB,QAA0B,CACtDC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,eACH4B,OAAQ,OACRC,OACAnB,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,OACpBuC,QAAS,CACRC,cAAc,UAAD,OAAYjB,aAAakB,QAAQ,oBAV7B,cAIbxC,EAJa,SAaGA,EAASkB,KAAxBU,EAbY,EAaZA,MAAOvB,EAbK,EAaLA,KAbK,kBAcZuB,EAAQ,KAAOvB,GAdH,2C,wDA7HAnB,EAqJbuD,Q,uCAAU,WAAO7C,GAAP,SAAAC,EAAA,+EACTN,IACLwB,QAAgC,CAChCC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,gBACHU,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,OACpBuC,QAAS,CACRC,cAAc,UAAD,OAAYjB,aAAakB,QAAQ,oBAG/CE,MAAK,gBAAExB,EAAF,EAAEA,KAAF,OAAaA,EAAKU,OAASV,EAAKb,KAAKsC,WAC1CC,OAAM,SAAAzD,GAIN,OAAO,MAdO,2C,sDArJGD,EA8Kb2D,Y,uCAAc,WACpBC,EACAlD,GAFoB,qBAAAC,EAAA,+EAKIN,IAAMwB,QAE3B,CACDC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,oBAAiCyD,GACpC/C,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,SATF,UAKbC,EALa,SAWGA,EAASkB,KAAxBU,EAXY,EAWZA,MAAOvB,EAXK,EAWLA,MACVuB,EAZe,yCAaX,MAbW,gCAeZvB,GAfY,2DAoBZ,MApBY,0D,wDA9KDnB,EA6Mb6D,Y,uCAAc,WAAOnD,GAAP,uBAAAC,EAAA,+EAEIN,IAAMwB,QAA4B,CACxDC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,sBACHU,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,OACpBuC,QAAS,CACRC,cAAc,UAAD,OAAYjB,aAAakB,QAAQ,oBAN7B,UASK,OAPlBxC,EAFa,QASNmB,OATM,0DAUYnB,EAASkB,KAAjCU,EAVY,EAUZA,MAAOoB,EAVK,EAULA,QAAS3C,EAVJ,EAUIA,KAVJ,kBAWZuB,EAAQ1C,EAAY+D,YAAYD,GAAW3C,GAX/B,2DAaZnB,EAAY+D,YAAZ,OAbY,0D,sDA7MD/D,EAuObgE,Y,uCAAc,WACpBf,EACAgB,GAFoB,eAAAtD,EAAA,+EAKIN,IAAMwB,QAA2B,CACvDC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,UACHU,OAAM,OAAEoD,QAAF,IAAEA,OAAF,EAAEA,EAAiBpD,OACzBkB,OAAQ,OACRC,KAAMiB,EACNG,QAAS,CACRC,cAAc,UAAD,OAAYjB,aAAakB,QAAQ,oBAX7B,UAcK,OATlBxC,EALa,QAcNmB,OAdM,yCAeXjC,EAAY+D,YAAYjD,EAASkB,OAftB,gCAiBZlB,EAASkB,KAAKb,MAjBF,yDAmBZnB,EAAY+D,YAAZ,OAnBY,yD,wDAvOD/D,EAwQbkE,iB,uCAAmB,WACzB7C,EACAG,EACAyB,EACAvC,GAJyB,SAAAC,EAAA,+EAKrBX,EAAYmE,cAAZ,2BAA8B3C,GAASH,GAAU4B,EAAOvC,IALnC,2C,4DAxQNV,EAwRbmE,c,uCAAgB,WACtB9C,EACA4B,EACAvC,GAHsB,iBAAAC,EAAA,6DAKhBa,EAAO,IAAIN,KAAKG,EAAQG,MALR,SAMCnB,IAAMwB,QAAgC,CAC5DC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,YACHU,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,OACpBkB,OAAQ,OACRC,KAAK,2BACDX,GADA,IAEH+C,QAAS/C,EAAQ+C,QAAQlB,GACzB1B,KAAMA,EAAK6C,mBAAmB,MAC9BpB,UAEDG,QAAS,CACRC,cAAc,UAAD,OAAYjB,aAAakB,QAAQ,oBAjB1B,UAoBE,OAdlBxC,EANgB,QAoBTmB,OApBS,yCAqBdjC,EAAY+D,YAAYjD,EAASkB,OArBnB,gCAuBflB,EAASkB,KAAKb,MAvBC,2C,0DAxRHnB,EAyTbsE,c,uCAAgB,WACtBC,EACA7D,GAFsB,iBAAAC,EAAA,sEAICN,IAAMwB,QAAgC,CAC5DC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,mBACHU,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,OACpBkB,OAAQ,OACRC,KAAK,2BACDuC,GADA,IAEHH,QAAO,UAAEG,EAAkBH,eAApB,aAAE,EAA2BlB,GACpC1B,KACC+C,EAAkB/C,MAClB,IAAIN,KAAKqD,EAAkB/C,MAAM6C,mBAAmB,QAEtDjB,QAAS,CACRC,cAAc,UAAD,OAAYjB,aAAakB,QAAQ,oBAhB1B,UAmBE,OAflBxC,EAJgB,QAmBTmB,OAnBS,yCAoBdjC,EAAY+D,YAAYjD,EAASkB,OApBnB,gCAsBflB,EAASkB,KAAKb,MAtBC,2C,wDAzTHnB,EAuVbwE,c,uCAAgB,WACtBC,EACA/D,GAFsB,eAAAC,EAAA,sEAICN,IAAMwB,QAAgC,CAC5DC,IAAI,GAAD,OAAK9B,EAAYG,KAAjB,8BAA2CsE,GAC9C5D,OAAM,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAYG,OACpBkB,OAAQ,OACRqB,QAAS,CACRC,cAAc,UAAD,OAAYjB,aAAakB,QAAQ,oBAT1B,cAIhBxC,EAJgB,yBAYfA,EAASkB,KAAKb,KAAKsC,SAZJ,2C,wDC9VxB,IAAMiB,EAActC,aAAakB,QAAQ,QACrCoB,GACH1E,EAAYI,aAEb,ICrBYuE,EAKAC,EDgBNzG,EAAiC,CACtC0G,UAAU,EACVC,YAAY,EACZ/E,OAAQgF,EACR5C,KAAMuC,GAAepC,KAAK0C,MAAMN,IAGpB9F,EAAU,CAEtBqG,WAAYnG,YAAa,cACzBoG,UAAWpG,YAAa,aAExBgG,WAAYhG,YAAa,cACzBqG,aAAcrG,YAAa,gBAC3BsG,WAAYtG,YAAa,cAEzBuG,QAASvG,YAAoB,WAC7BwG,aAAcxG,YAAqB,gBACnCyE,QAASzE,YAAa,YAGjBM,GAAQC,YAAY,CACzBC,KAAM,cACNnB,eACAoB,SAAU,GACVC,cAAe,SAAAC,GACdA,EACEC,QAAQd,EAAQqG,YAAY,SAAAtF,GAC5BA,EAAMkF,UAAYlF,EAAMkF,SACnBlF,EAAMkF,SAGVlF,EAAMI,OAAO1B,cAAgBsB,EAAMI,OAAO3B,YACvCF,EAAcqH,KACdrH,EAAcsH,KAJjB7F,EAAMI,OAAO1B,cAAgBH,EAAcI,QAO5CoB,QAAQd,EAAQsG,WAAW,SAAAvF,GAC3BA,EAAMkF,UAAW,EACjBlF,EAAMI,OAAO1B,cAAgBH,EAAcI,QAE3CoB,QAAQd,EAAQuG,cAAc,SAAAxF,GAC9BA,EAAMmF,YAAcnF,EAAMmF,cAE1BpF,QAAQd,EAAQkG,YAAY,SAAAnF,GAC5BA,EAAMmF,YAAa,KAEnBpF,QAAQd,EAAQwG,YAAY,SAAAzF,GAC5BA,EAAMmF,YAAa,KAEnBpF,QAAQd,EAAQyG,SAAS,SAAC1F,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QAClCD,EAAMwC,KAAOvC,KAEbF,QAAQd,EAAQ0G,cAAc,SAAC3F,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACnCD,EAAMwC,OACTxC,EAAMwC,KAAKc,MAAQrD,MAGpBF,QAAQd,EAAQ2E,SAAS,SAAA5D,GACzBA,EAAMwC,UAAOsD,KAEbC,YACA,SAAAC,GAIC,OAHoBhD,OAAOC,KAAKgD,GAGbC,MAAK,SAAAhD,GAAG,OAAI+C,EAAc/C,GAAKiD,MAAMH,SAEzD,SAAChG,EAAOgG,GACPhG,EAAMI,OAASgG,EAAcpG,EAAMI,OAAQ4F,SAOnCK,GAAa,SAAC5G,GAAD,OAAsBA,EAAMU,YAAYqC,MAEnD/C,MAAf,S,SCnGYuF,O,iBAAAA,I,kBAAAA,M,cAKAC,O,mBAAAA,I,qBAAAA,I,yBAAAA,I,uBAAAA,I,mBAAAA,I,uBAAAA,I,oBAAAA,M,KAUL,IAWKqB,GAuBAC,GAyBAC,GClEL,SAASC,GAAeC,GAC9B,IACIC,EAAO,IAAIpF,KADA,cAEfoF,EAAKC,QAAQD,EAAKE,UAAYH,EAAU,GAGxC,OAAOC,EAAKG,mBAFC,KAE0B,CAACJ,QAAS,SAQ3C,SAASK,GAAYJ,GAG3B,IAAIK,EAaJ,MAfoB,kBAATL,IAAmBA,EAAO,IAAIpF,KAAKoF,IACzCA,IAAMA,EAAO,IAAIpF,MAQK,KAL1ByF,EADGL,EAAKM,YAAc,EACV,IAAI1F,KAAKoF,EAAKO,cAAgB,UAE9B,IAAI3F,KAAJ,UAAYoF,EAAKO,cAAgB,EAAjC,YAGCC,UACbH,EAAUJ,QAAQI,EAAUH,WAAaG,EAAUG,SAAW,IAE7CC,KAAKC,OACrBV,EAAK7E,UAAYkF,EAAUlF,WAAa,QAErB,EAAIkD,EAAUsC,MAAQtC,EAAUuC,MAS/C,SAASC,GAAuBC,GACtC,OAAQA,GACP,KAAK,EACJ,MAAO,uCAER,KAAK,EACJ,MAAO,mDAER,KAAK,EACJ,MAAO,2EAER,QACC,MAAO,IASH,SAASC,GAAgBC,GAC/B,IAAMhB,EAAO,IAAIpF,KACbqG,EAASjB,EAAKO,cAAgBS,EAIlC,OAHIhB,EAAKM,WAAa,IACrBW,GAAU,GAEJA,EASD,SAASC,GAAcC,GAC7B,IAAMC,EAAQ,IAAIxG,KACdyG,EAAOD,EAAMb,cAAgBY,EAIjC,OAHIC,EAAMd,WAAa,IACtBe,GAAQ,GAEFA,EAOD,SAASC,KAAuC,IAA5BpG,EAA2B,uDAAZN,KAAK2G,MACxCC,EAAU,IAAI5G,KAAKM,GACzBsG,EAAQC,SAASD,EAAQE,WAAa,GACtCF,EAAQG,WAAWH,EAAQI,aAAe,IAC1C,IAAIC,EAAS,KAIb,OAHIC,UAAUC,UAAUC,OAAS,IAChCH,EAASC,UAAUC,UAAU,IAExB,GAAN,OAAU,IAAInH,KAAKM,GAAM6C,mBAAmB8D,EAAQ,CACnDI,KAAM,UACNC,OAAQ,YAFT,cAGQV,EAAQzD,mBAAmB8D,EAAQ,CAC1CI,KAAM,UACNC,OAAQ,aAIH,SAASC,GACfC,EACAC,GAEA,OAAOD,EAAID,eAAeE,I,SD3Ff1C,O,kFAAAA,I,0GAAAA,I,2JAAAA,Q,cAuBAC,O,qBAAAA,I,qBAAAA,I,kBAAAA,Q,cAyBAC,K,2CAAAA,E,2CAAAA,E,+EAAAA,E,+BAAAA,E,+BAAAA,E,+BAAAA,E,4CAAAA,Q,SEpCAyC,G,6BAXCzK,GAA6B,CACzCiJ,KAAMnB,GAAa4C,qCACnBvH,MAAO,GACP5C,MAAO,GACP0F,QAAS,CAAClB,GAAI,EAAG5D,KAAM,GAAIqC,MAAO,M,SAOvBiH,K,iCAAAA,E,iDAAAA,E,+CAAAA,E,qDAAAA,E,qDAAAA,E,sEAAAA,Q,KASL,IAAMhK,GAAU,CACtBkK,OAAQhK,YACP8J,GAAaE,QAEdC,eAAgBjK,YACf8J,GAAaG,gBAGdC,cAAelK,YACd8J,GAAaI,eAEdC,iBAAkBnK,YACjB8J,GAAaK,kBAEdC,yBAA0BpK,YAGxB8J,GAAaM,0BACfC,iBAAkBrK,YAGhB8J,GAAaO,mBAqDDC,GAlDM/J,YAAY,CAChCC,KAAM,mBACNnB,gBACAoB,SAAU,GACVC,cAAe,SAAAC,GACdA,EACEC,QAAQd,GAAQkK,QAAQ,SAACnJ,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QAC1BsD,EAAetD,EAAfsD,GAAOlB,EAAd,aAAsBpC,EAAtB,IACM4B,EAAO7B,EAAM2B,MAAM+H,MAAK,SAAAC,GAAC,OAAIA,EAAEpG,KAAOA,KAE3CP,OAAOC,KAAKZ,GAAmCuH,SAAQ,SAAA1G,GAC9B,qBAAdb,EAAKa,KAEZ4F,GAAe9I,EAAOkD,GACxBlD,EAAMkD,GAAeb,EAAKa,GAGnBrB,GAAQiH,GAAejH,EAAMqB,KACpCrB,EAAKqB,GAAeb,EAAKa,SAI5B,OAAIrB,QAAJ,IAAIA,OAAJ,EAAIA,EAAMgI,aAAWhI,EAAKgI,eAAY/D,MAEtC/F,QAAQd,GAAQmK,gBAAgB,SAACpJ,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QAClC6J,EAAmB7J,EAAnB6J,SAAUC,EAAS9J,EAAT8J,MAChB/J,EAAM8J,GAA0CC,KAEjDhK,QAAQd,GAAQoK,eAAe,SAACrJ,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACjC4J,EAAmB5J,EAAnB4J,UAAWhI,EAAQ5B,EAAR4B,KACZ0B,EAAKsG,EAAYtI,KAAK2G,MAASrG,EAAqB0B,GAC1DvD,EAAM2B,MAAMqI,KAAZ,2BAAqBnI,GAArB,IAA2B0B,KAAIsG,kBAE/B9J,QAAQd,GAAQqK,kBAAkB,SAACtJ,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACrCgK,EAAQjK,EAAM2B,MAAMuI,WAAU,SAAAP,GAAC,OAAIA,EAAEpG,KAAOtD,KAClDD,EAAM2B,MAAMwI,OAAOF,EAAO,MAE1BlK,QAAQd,GAAQsK,0BAA0B,SAACvJ,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QAC5CsD,EAAuBtD,EAAvBsD,GAAIuG,EAAmB7J,EAAnB6J,SAAUC,EAAS9J,EAAT8J,MACfE,EAAQjK,EAAM2B,MAAMuI,WAAU,SAAAP,GAAC,OAAIA,EAAEpG,KAAOA,KACjDvD,EAAM2B,MAAMsI,GAAOH,GAA6CC,KAEjEhK,QAAQd,GAAQuK,kBAAkB,SAACxJ,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACpCsD,EAAetD,EAAfsD,GAAO1B,EAAd,aAAsB5B,EAAtB,IACMgK,EAAQjK,EAAM2B,MAAMuI,WAAU,SAAAP,GAAC,OAAIA,EAAEpG,KAAOA,KAClDvD,EAAM2B,MAAMsI,GAAZ,2BAAyBjK,EAAM2B,MAAMsI,IAAWpI,SAKpD,QChGMkG,GAAQ,IAAIxG,KAEZ/C,GAAkC,CACvC4L,aAAc,EACdC,cAAUvE,EACVwE,SAAU,GACVC,WAA+B,IAAnBxC,GAAMZ,SAAiB,EAAIY,GAAMZ,SAC7CqD,YAAazD,GAAYgB,KAGb9I,GAAU,CAEtBwL,gBAAiBtL,YAAqB,mBACtCuL,WAAYvL,YAAsB,cAClCwL,YAAaxL,YAAwB,eACrCyL,eAAgBzL,YAAa,kBAE7B0L,cAAe1L,YAA4C,iBAE3D2L,YAAa3L,YAAyB,eACtC4L,WAAY5L,YAAuB,cACnC0F,cAAe1F,YAA2B,iBAE1CwF,cAAexF,YAA8B,2BAUxC6L,GACL,SAACC,EAAmBxD,EAAoB1I,GAAxC,OAA0D,SAACmM,GAAD,OACzDA,EAAEzG,QAAQlB,KAAO0H,GAAaC,EAAEzD,OAASA,GAAQyD,EAAEnM,QAAUA,IAQzDoM,GAAuB,cAGvB,IAFJb,EAEG,EAFHA,SACArK,EACG,EADHA,QAEMlB,EAAgCkB,EAAhClB,MAAO0I,EAAyBxH,EAAzBwH,KAAMhD,EAAmBxE,EAAnBwE,QAASuB,EAAU/F,EAAV+F,OACzBiE,EAAQK,EAASJ,UAAUc,GAAoBvG,EAAQlB,GAAIkE,EAAM1I,IACrE,IAAe,IAAXkL,EAcJK,EAASL,GAASmB,GAAed,EAASL,GAAQjE,OAdlD,CACC,GAAIA,EAAOyB,OAAS4D,GAAqBhC,cAAe,OACxDiB,EAASN,KAAK,CACbjL,QACA0I,OACAhD,UACA9C,MAAO,CACNqE,EAAO/F,QAAQ4J,UAAf,aACItG,GAAIhC,KAAK2G,OAAUlC,EAAO/F,QAAQ4B,MACnCmE,EAAO/F,QAAQ4B,UAQhByJ,GAAgB5L,YAAY,CACjCC,KAAM,WACNnB,gBACAoB,SAAU,GACVC,cAAe,SAAAC,GACdA,EAEEC,QAAQd,GAAQwL,iBAAiB,SAACzK,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QAC1CD,EAAMoK,aAAenK,KAErBF,QAAQd,GAAQyL,YAAY,SAAC1K,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACrCD,EAAMuK,WAAatK,KAEnBF,QAAQd,GAAQ0L,aAAa,SAAC3K,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACtCD,EAAMwK,YAAcvK,KAEpBF,QAAQd,GAAQ2L,gBAAgB,SAAA5K,GAChCA,EAAMwK,YACLxK,EAAMwK,cAAgBxF,EAAUuC,MAC7BvC,EAAUsC,MACVtC,EAAUuC,SAGdxH,QAAQd,GAAQ4L,eAAe,SAAC7K,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACxCD,EAAMqK,SAAWpK,KAGjBF,QAAQd,GAAQ6L,aAAa,SAAC9K,EAAD,GAAuB,IAAdC,EAAa,EAAbA,QACtCD,EAAMsK,SAAWrK,KAEjBF,QAAQd,GAAQ8L,YAAY,cAA4B,IAA1BT,EAAyB,EAAzBA,SAAYrK,EAAa,EAAbA,QAC1CqK,EAASN,KAAK/J,MAEdF,QAAQd,GAAQ4F,eAAe,cAA4B,IAA1ByF,EAAyB,EAAzBA,SAAYrK,EAAa,EAAbA,QACvCgK,EAAQK,EAASJ,UACtBc,GAAoB/K,EAAQwE,QAAQlB,GAAItD,EAAQwH,KAAMxH,EAAQlB,SAEhD,IAAXkL,GACJK,EAASH,OAAOF,EAAO,MAEvBlK,QAAQd,GAAQ0F,cAAewG,OAItBI,GAAiB,SAACvL,GAAD,OAAsBA,EAAMwL,UAE3CF,MAAf,QChIM7L,GAAQgM,YAAe,CAC5BC,QAAS,CACRvL,YAAawL,GACbH,SAAUI,MAOCC,GAAc,kBAAMC,eACpBC,GAA+CC,IAE7CvM,M,QC+FAwM,GAzGK,WACnB,IAAMC,EAAiBC,iBAAyB,MAC1CC,EAAWC,cACXC,EAAWT,KACjB,EAAyBE,IAAY,SAAA/L,GAAK,MAAK,CAC9CuM,QAASvM,EAAMG,YAAYC,OAAO1B,cAClCqL,MAAO/J,EAAMG,YAAYC,OAAO3B,gBAF1B8N,EAAP,EAAOA,QAASxC,EAAhB,EAAgBA,MAMVyC,EAAuBC,uBAC5B,SAAChF,GACA6E,EAASrG,EAAc5G,iBAAiBoI,MAEzC,CAAC6E,IAGIlN,EAAiBqN,uBACtB,SAAC1C,GACAuC,EAASrG,EAAc7G,eAAe2K,MAEvC,CAACuC,IAKII,EAAmBD,uBACxB,SAAAE,GACKA,EAAEzJ,KAAiB,UAAVyJ,EAAEzJ,KAGfkJ,EAAS,aAAD,OAAcrC,MAEvB,CAACA,IAGI6C,EAA2BH,uBAGhC,YAAe,IAAbI,EAAY,EAAZA,OACDzN,EAAeyN,EAAO9C,SAEvB,CAAC3K,IAGI0N,EAAwBL,uBAAY,WACrCP,EAAea,SAClBb,EAAea,QAAQC,QAExBR,EAAqBjO,EAAcqH,QACjC,CAAC4G,IAEES,EAAwBR,uBAC7B,SAAAE,GACMA,EAAEE,OAAO9C,OACbyC,EAAqBjO,EAAcsH,QAGrC,CAAC2G,IAGIU,EAAwBT,uBAAY,WAAO,IAAD,EAC/C,UAAAP,EAAea,eAAf,SAAwBC,UACtB,IAGH,OACC,gBAACG,EAAA,EAAD,CACCC,UAAU,oCACVb,QAAQ,WAFT,UAIC,eAACc,EAAA,EAAD,CAAaD,UAAU,2CAAvB,SACC,eAAC,IAAD,CACCA,UAAU,mCACVE,QAASR,MAGX,eAACS,EAAA,EAAD,CACCC,YAAY,aACZC,GAAIlB,IAAYhO,EAAcqH,KAC9BwH,UAAU,qCACVM,UAAWR,EAJZ,SAMC,eAACS,EAAA,EAAD,CACCC,SAAU1B,EACVkB,UAAU,4BACVS,OAAQZ,EACRa,YAAY,mIACZ/D,MAAOA,EACPgE,SAAUnB,EACVoB,WAAYtB,EACZuB,aACC,eAACC,EAAA,EAAD,CACCC,SAAS,MACTf,UAAU,kCAFX,SAIC,eAAC,IAAD,CAAgBE,QAASZ,c,OC6GjB0B,OA/Lf,WACC,MACCrC,GAAY7L,GADNnB,EAAP,EAAOA,MAAOH,EAAd,EAAcA,SAAUE,EAAxB,EAAwBA,UAAWL,EAAnC,EAAmCA,YAAaC,EAAhD,EAAgDA,cAE1C4N,EAAWT,KACXwC,EAAWC,cACXlC,EAAWC,cAEjBkC,qBAAU,WACT,IAAItP,EAAuB,GACrBuP,EAAMH,EAASI,SAASC,MAAM,KAEpC,GAAmB,IAAfF,EAAI7F,OACP1J,EAAQ+K,KACP/D,EAAc5G,iBACbZ,EAAcF,EAAcqH,KAAOrH,EAAcsH,YAInD,OAAQ2I,EAAI,IACX,IAAK,SACAA,EAAI,GACPvP,EAAQ+K,KACP/D,EAAc1G,YAAYlB,EAASsQ,MACnC1I,EAAc/G,SAAS,IACvB+G,EAAc3G,aAAahB,EAAUK,OAGtCM,EAAQ+K,KACP/D,EAAc1G,YAAYlB,EAASQ,MACnCoH,EAAc/G,SAAS,IACvB+G,EAAc3G,aAAahB,EAAUK,OAGvC,MAED,IAAK,WACJM,EAAQ+K,KACP/D,EAAc1G,YAAYlB,EAASQ,MACnCoH,EAAc/G,SAAS,IACvB+G,EAAc3G,aAAahB,EAAUsQ,QAEtC,MAED,IAAK,UACJ3P,EAAQ+K,KACP/D,EAAc1G,YAAYlB,EAASwQ,QACnC5I,EAAc/G,SAAS,wFACvB+G,EAAc3G,aAAahB,EAAUwQ,OAEtC,MAED,IAAK,SACJ7P,EAAQ+K,KACP/D,EAAc1G,YAAYlB,EAASwQ,QACnC5I,EAAc/G,SAAS,oDACvB+G,EAAc3G,aAAahB,EAAUwQ,OAEtC,MAED,QACC7P,EAAQ+K,KACP/D,EAAc5G,iBAAiBd,EAAcI,MAC7CsH,EAAc/G,SAAS,IACvB+G,EAAc1G,YAAYlB,EAASQ,MACnCoH,EAAc3G,aAAahB,EAAUK,OAMzCM,EAAQ2K,SAAQ,SAAA5I,GAAC,OAAIsL,EAAStL,QAC5B,CAACqN,EAASI,SAAUnC,IAEvB,IAAMyC,EAActC,uBAAY,WAC/BH,EAASrG,EAAczG,SAAQ,MAC7B,CAAC8M,IAEE0C,EAAcvC,uBAAY,WAC/BH,EAAS2C,EAAW3J,gBAClB,CAACgH,IAEE4C,EAAezC,uBAAY,WAChC,IAAI1E,EAAQ,IAAIxG,KAChB+K,EAAS6C,GAAgBzE,WAAW3C,EAAMZ,WAC1CmF,EAAS6C,GAAgBxE,YAAY5D,GAAYgB,OAC/C,CAACuE,IAEE8C,EAAc3C,uBAAY,WAC/BL,GAAU,KACR,CAACA,IAEEiD,EAAeC,mBAAQ,WAC5B,OAAQ1Q,GACP,KAAKP,EAASQ,KACb,OACC,eAACwO,EAAA,EAAD,CACCC,QAAS0B,EACTO,QAAS,CACRC,KAAM,yCAHR,SAMC,eAAC,IAAD,MAIH,KAAKnR,EAASsQ,KACb,OACC,eAACtB,EAAA,EAAD,CACCC,QAAS8B,EACTG,QAAS,CACRC,KAAM,yCAHR,SAMC,eAAC,IAAD,MAIH,KAAKnR,EAASwQ,OACb,OACC,eAACxB,EAAA,EAAD,CACCC,QAAS8B,EACTG,QAAS,CACRC,KAAM,yCAHR,SAMC,eAAC,IAAD,MAIH,QACC,OAAO,QAEP,CAACR,EAAaI,EAAaxQ,IAExB6Q,EAAgBH,mBAAQ,WAC7B,OAAQxQ,GACP,KAAKR,EAAUK,KACd,OAAO,KAER,KAAKL,EAAUoR,OACd,OAAO,eAAC,GAAD,IAER,KAAKpR,EAAUsQ,MACd,OACC,eAACvB,EAAA,EAAD,CAAMC,QAAS4B,EAAf,SACC,eAAC,IAAD,CACCK,QAAS,CACRC,KAAM,kDAMX,KAAKlR,EAAUwQ,KACd,OACC,eAACzB,EAAA,EAAD,CAAMC,QAASyB,EAAf,SACC,eAAC,IAAD,CACCQ,QAAS,CACRC,KAAM,iDAOV,CACFN,EACAH,EACAzC,EACAxN,EACAL,EACAC,IAGKiR,EAAaC,YAAiB,CACnCC,mBAAmB,EACnBC,UAAW,IAGZ,OACC,gBAACC,EAAA,EAAD,CACCC,UAAWL,GAAoC,cAAtBtB,EAASI,SAA2B,EAAI,EACjErB,UAAU,cAFX,UAIEiC,EACAtQ,GAAS,qBAAIqO,UAAU,qBAAd,SAAoCrO,IAC7C0Q,M,0IC7MW,SAASQ,KACvB,OACC,0BAAQ7C,UAAU,cAAlB,UACC,qBAAGA,UAAU,yBAAb,mBACI,IAAI7L,MAAO2F,cADf,mBAGA,uBAAKkG,UAAU,qBAAf,UACC,eAAC8C,GAAA,EAAD,CACC9C,UAAU,oBACV+C,KAAK,iCAFN,SAIC,eAAC,KAAD,CAAY/C,UAAU,oCAEvB,eAAC8C,GAAA,EAAD,CAAM9C,UAAU,oBAAoB+C,KAAK,+BAAzC,SACC,eAAC,KAAD,CAAW/C,UAAU,kCAEtB,eAAC8C,GAAA,EAAD,CAAM9C,UAAU,oBAAoB+C,KAAK,4BAAzC,SACC,eAAC,KAAD,CAAc/C,UAAU,4C,0ICiBdgD,OAjCf,SACCtN,GAEA,MAAsCuN,mBAAuB,IAA7D,oBAAOC,EAAP,KAAoBC,EAApB,KACA,EAAgCF,oBAAkB,GAAlD,oBAAOG,EAAP,KAAkBC,EAAlB,KA0BA,OAxBAlC,qBAAU,WACT,GAAKzL,EAAL,CACA,IAAMwB,EAAkB,IAAIoM,gBAiB5B,OAhBAD,GAAW,GACXpQ,EAAYwC,iBAAiBC,EAASwB,GACpCT,MAAK,SAAAyM,GAIJC,EAHID,GACW,IAIhBG,GAAW,MAEX1M,OAAM,SAAAzD,GACDgE,EAAgBpD,OAAOyP,SAC3BC,QAAQ7N,MAAMzC,GAEfmQ,GAAW,MAEN,WACNnM,EAAgBuM,YAEf,CAAC/N,EAASyN,IAEN,CAACD,EAAaC,EAAgBC,I,OCsLvBM,OAxMf,YAOY,IANFC,EAMC,EANVjO,QACWkO,EAKD,EALVC,UACMC,EAII,EAJVlJ,KACImJ,EAGM,EAHV5N,GACA6N,EAEU,EAFVA,KACAC,EACU,EADVA,QAGA,EAA4BhB,mBAAiB3I,GAAgBwJ,IAA7D,oBAAOpJ,EAAP,KAAewJ,EAAf,KACA,EAAkCjB,mBAASW,GAA3C,oBAAOC,EAAP,KAAkBM,EAAlB,KACA,EAA8BlB,mBAAkBU,GAAhD,oBAAOjO,EAAP,KAAgB0O,EAAhB,KAIA,EAA0BnB,oBAAS,GAAnC,oBAAOtN,EAAP,KAAc0O,EAAd,KACA,EAAsBrB,GAAetN,GAA9BwN,EAAP,qBAEMoB,EAAiBpC,mBACtB,kBACCtM,OAAO2O,OAAOnL,IAAS/E,KAAI,SAAAqB,GAAO,OACjC,eAAC8O,GAAA,EAAD,CAAwB7H,MAAOjH,EAA/B,SACEA,GADaA,QAIjB,IAEK+O,EAAmBvC,mBACxB,kBACCgB,EAAY7O,KAAI,gBAAE1C,EAAF,EAAEA,MAAF,OACf,eAAC6S,GAAA,EAAD,CAAsB7H,MAAOhL,EAA7B,SACEA,GADaA,QAIjB,CAACuR,IAGIwB,EAAgBxC,mBAAQ,WAK7B,IALoC,IAAD,EAC/ByC,EAA6B,GAC3B5O,EAAUH,OAAOC,MACtB,UAAAqN,EAAY5G,MAAK,SAAAwB,GAAC,OAAIA,EAAEnM,QAAUkS,YAAlC,eAA8C9N,UAAW,IAHvB,WAK1B6O,GACR,IAAMC,GAAY9O,EAAQuG,MAAK,SAAAwI,GAAC,OAAIA,IAAMF,EAAEG,cAC5CJ,EAAQ/H,KACP,eAACoI,GAAA,EAAD,CAECH,SAAUA,EACVI,UAAWJ,GAAYD,IAAMlK,EAC7BiC,MAAOiI,EAAEG,WACT/E,UAAS,sCAAiC4E,GAC1CzC,QAAS,CACR8C,SAAU,kCAPZ,SAUEL,GAVF,+BAC8BA,MAJvBA,EAAI,EAAGA,EAAI,IAAKA,EAAI,EAApBA,GAiBT,OAAOD,IACL,CAACzB,EAAaW,EAAWnJ,IAItBwK,EAAa7F,uBAAY,WAC9B6E,EAAU5J,GAAgBwJ,IAC1BK,EAAaP,GACbQ,EAAWT,KACT,CAACA,EAAgBC,EAAkBE,EAAaC,IAE7CoB,EAAyB9F,uBAAY,WAAO,IAAD,EAC1ClJ,EAAE,UAAG+M,EAAY5G,MAAK,SAAAwB,GAAC,OAAIA,EAAEnM,QAAUkS,YAArC,aAAG,EAA8C9N,QAAQ2E,GACjE,GAAKmJ,GAAc1N,EAAnB,CAIA,IAAMoD,EAAO,IAAIpF,KACbyG,EAAOrB,EAAKO,cAAgBsL,OAAO1K,GACnCnB,EAAKM,WAAa,IAAGe,GAAQ,GACjCqJ,EAAQ,CAAC9N,KAAI0N,YAAWnO,UAASkF,cANhCyJ,GAAS,KAOR,CAACJ,EAASI,EAAU3J,EAAQmJ,EAAWnO,EAASwN,IAE7CmC,EAAoBhG,uBAAY,WACrC6F,IACAjB,MACE,CAACA,EAASiB,IAEPI,EAAqBjG,uBAC1B,SAACkG,EAAGC,GACH,GAA0B,IAAtBA,EAAWjK,OAAf,CAGA,IAAMkK,EAAYD,EAAWA,EAAWjK,OAAS,GACjD2I,EAAUuB,GACVpB,GAAS,MAEV,CAACnB,EAAaW,IAGT6B,EAAqBrG,uBAG1B,YAAe,IAAbI,EAAY,EAAZA,OACD,OAAQA,EAAOlN,MACd,IAAK,gBACJ6R,EAAW3E,EAAO9C,OAClBwH,EAAa,IACb,MACD,IAAK,kBACJA,EAAa1E,EAAO9C,UAIvB,CAACyH,EAAYD,IAId,OACC,gBAACwB,GAAA,EAAD,CACC3B,KAAMA,EACNC,QAASoB,EACTrF,UAAU,8BACVmC,QAAS,CACRyD,MAAO,uBALT,UAQC,eAACC,GAAA,EAAD,CAAa7F,UAAU,6BAAvB,yGAIA,eAAC8F,GAAA,EAAD,CACCC,QAAM,EACNpQ,MAAOA,IAAUD,EACjBsK,UAAU,6BACVb,QAAQ,WACRhJ,GAAG,gBACH5D,KAAK,gBACLyT,MAAM,0DACNC,WAAYtQ,IAAUD,EAAU,kIAA2BgD,EAC3DwN,YAAa,CACZlG,UAAW,eACXW,SAAU+E,EACV/I,MAAOjH,GAERyQ,gBAAiB,CAChBnG,UAAW,eACXoG,QAAS,iBAEVC,oBAAqB,CACpBrG,UAAW,sBAnBb,SAsBEsE,IAGF,eAACwB,GAAA,EAAD,CACCC,QAAM,EACNpQ,MAAOA,IAAUkO,EACjB7D,UAAU,6BACVb,QAAQ,WACRhJ,GAAG,kBACH5D,KAAK,kBACLyT,MAAM,kFACNC,WACCtQ,IAAUkO,EAAY,0JAA+BnL,EAEtDwN,YAAa,CACZlG,UAAW,eACXW,SAAU+E,EACV/I,MAAOkH,GAERsC,gBAAiB,CAChBnG,UAAW,eACXoG,QAAS,mBAEVC,oBAAqB,CACpBrG,UAAW,sBArBb,SAwBEyE,IAGF,eAAC6B,GAAA,EAAD,CACCtG,UAAU,sCACVW,SAAU2E,EAFX,SAIEZ,IAGF,eAAC6B,GAAA,EAAD,CACCvG,UAAU,8BACVb,QAAQ,YACRe,QAASiF,EAHV,wECzFYqB,OAtGf,YAAyD,IAAtCpR,EAAqC,EAArCA,KAAMqR,EAA+B,EAA/BA,qBACxB,EAAwCxD,oBAAS,GAAjD,oBAAOyD,EAAP,KAAqBC,EAArB,KACM3H,EAAWC,cACXC,EAAWT,KAEXmI,EAAY1E,mBAAQ,WACzB,IAAK9M,EAAKc,MAAO,MAAO,GACxB,IAAM2Q,EAAQzR,EAAKc,MAAM2N,UAAUvC,MAAM,KACnC1G,EAAOxF,EAAKc,MAAM0E,KAAKmK,WAC7B,OACC8B,EAAMC,QAAO,SAAC7S,EAAQ8S,GAAT,OAAkB9S,EAAS8S,EAAK,GAAGC,gBAAe,IAC/D,IACApM,EAAKyB,OAAO,KAEX,CAACjH,EAAKc,QAEH+Q,EAAoB5H,uBACzB,SAAAnJ,GACCyQ,GAAgB,GACXzQ,GACLjD,EAAYmD,WAAW,CAACD,GAAIf,EAAKe,GAAID,MAAOA,EAAMC,KAAKM,MAAK,SAAAC,GAC3D+P,IAAuB/P,GACnBA,IACHwI,EAAS2C,EAAWtJ,aAAarC,IACjC8I,EAAS,mBAAD,OAAoB9I,EAAMC,WAIrC,CAACsQ,EAAsBvH,IAElBgI,EAAuB7H,uBAAY,WACxCsH,GAAgB,KACd,CAACA,IAEEQ,EAAqB9H,uBAAY,WACtCpM,EAAYuD,UAAUC,MAAK,WAC1ByI,EAAS2C,EAAWrL,WACpBwI,EAAS,UAER,CAACE,IAEEkI,EAA0B/H,uBAAY,WAC3CH,EAAS6C,GAAgBtE,cAAc,SACvCyB,EAAS2C,EAAW3J,gBAClB,CAACgH,IAEEmI,EAAyBhI,uBAAY,WAC1CH,EAAS6C,GAAgBtE,cAAc,WACvCyB,EAAS2C,EAAW3J,cACpB8G,EAAS,aACP,CAACE,EAAUF,IAEd,OACC,uBAAKgB,UAAU,oBAAf,UACE5K,EAAKc,OACL,eAAC,GAAD,aACC8N,KAAM0C,EACNzC,QAASgD,GACL7R,EAAKc,QAGX,uBAAK8J,UAAU,cAAf,UACC,qBAAIA,UAAU,YAAd,mGACA,uBAAKA,UAAU,YAAf,UACC,sBAAKsH,IAAI,mBAAmBC,IAAI,cAAcvH,UAAU,aACxD,qBAAIA,UAAU,YAAd,SAA2B5K,EAAK7C,OAChC,oBAAGyN,UAAU,aAAb,SAA2B4G,UAG7B,uBAAK5G,UAAU,gBAAf,UACC,qBAAIA,UAAU,wBAAd,oEACC5K,EAAKiF,OAASlB,GAASqO,OACvB,uCACC,qBACCxH,UAAU,wBACVE,QAASmH,EAFV,UAIC,eAAC,KAAD,CAASlF,QAAS,CAACC,KAAM,kBACzB,uBAAMpC,UAAU,eAAhB,uJAED,qBACCA,UAAU,wBACVE,QAASkH,EAFV,UAIC,eAAC,KAAD,CAAUjF,QAAS,CAACC,KAAM,kBAC1B,uBAAMpC,UAAU,eAAhB,+JAIH,qBAAGA,UAAU,wBAAwBE,QAASgH,EAA9C,UACC,eAAC,KAAD,CAAoB/E,QAAS,CAACC,KAAM,kBACpC,uBAAMpC,UAAU,eAAhB,sGAED,qBAAGA,UAAU,wBAAwBE,QAASiH,EAA9C,UACC,eAAC,KAAD,CAAYhF,QAAS,CAACC,KAAM,kBAC5B,uBAAMpC,UAAU,eAAhB,sDC6DUyH,I,OAnJI,SAAC,GAA+B,IAA9BxD,EAA6B,EAA7BA,QAASyD,EAAoB,EAApBA,OAC7B,EAA0BzE,mBAAiB,CAC1C0E,MAAM,EACN5Q,QAAS,GACTsD,KAAM,YAHP,oBAAOuN,EAAP,KAAcC,EAAd,KAKM5G,EAAWC,cACXlC,EAAWC,cACX7J,EAAOuJ,GAAY1F,IACnBnB,EAAW6G,IAAY,SAAAtM,GAAK,OAAIA,EAAMU,YAAY+E,YAExDqJ,qBAAU,WACT8C,MACE,CAAChD,EAASI,WAEb,IAAM4F,EAAoB5H,uBACzB,SAAA3I,GACCmR,EAAS,CACRF,MAAM,EACN5Q,QAASL,EACN,mIACA,8HACH2D,KAAM3D,EAAU,UAAY,YAG9B,CAACtB,IAGI0S,EAAmBzI,uBAAY,WACpCwI,EAAS,2BACLD,GADI,IAEPD,MAAM,OAEL,CAACE,EAAUD,IAEd,EAAsC3E,mBAAS,IAA/C,oBAAO5R,EAAP,KAAoBW,EAApB,KACMwN,EAA2BH,uBAChC,SAAAE,GACCvN,EAAeuN,EAAEE,OAAO9C,SAEzB,CAAC3K,IAGI+V,EAAgB1I,uBACrB,YAAY,IAAVvJ,EAAS,EAATA,IACIA,GAAe,UAARA,IAAqBzE,GACjC2N,EAAS,aAAD,OAAc3N,MAEvB,CAAC2N,EAAU3N,IAGZ,OACC,gBAAC2W,GAAA,EAAD,CACCC,2BAAyB,EACzBC,oBAAkB,EAClBtF,UAAW,EACXT,QAAS,CACRyD,MAAO,YAER5B,KAAMlM,EACNqQ,OAAO,OACPlE,QAASA,EACTyD,OAAQA,EAVT,UAYC,eAACU,GAAA,EAAD,CACCC,aAAc,CAACC,WAAY,SAAUC,SAAU,UAC/CvE,KAAM4D,EAAMD,KACZa,iBAAkB,IAClBvE,QAAS6D,EAJV,SAMC,eAACW,GAAA,EAAD,CACCzI,UAAU,kBACVmC,QAAS,CACRuG,cAAe,2BACfC,YAAa,0BAEdC,SAAUhB,EAAMvN,KAChB8E,QAAQ,SACR8E,QAAS6D,EACTe,GAAI,CAACC,MAAO,QATb,SAWElB,EAAM7Q,YAGR3B,EACA,eAAC,GAAD,CAAUA,KAAMA,EAAMqR,qBAAsBQ,IAE5C,uBAAKjH,UAAU,oBAAf,UACC,uBAAKA,UAAU,cAAf,UACC,qBAAIA,UAAU,YAAd,mGACA,eAAC8F,GAAA,EAAD,CACC9F,UAAU,eACVb,QAAQ,WACR6G,MAAM,8FACNtF,YAAY,mIACZ/D,MAAOtL,EACPsP,SAAUnB,EACVoB,WAAYmH,EACZgB,WAAY,CACXlI,aACC,eAACC,EAAA,EAAD,CAAgBC,SAAS,MAAMb,QAAS6H,EAAxC,SACC,eAAC,IAAD,CAAY/H,UAAU,wCAK1B,eAACuG,GAAA,EAAD,CACCyC,kBAAgB,EAChB7J,QAAQ,YACRa,UAAU,8BACVE,QAAS,kBAAMlB,EAAS,YAJzB,6GASD,uBAAKgB,UAAU,YAAf,UACC,uBAAKA,UAAU,kBAAf,UACC,qBAAIA,UAAU,cAAd,4JACA,uBAAMA,UAAU,eAAhB,+ZAKD,eAACuG,GAAA,EAAD,CACCyC,kBAAgB,EAChB7J,QAAQ,YACRa,UAAU,6BACVE,QAAS,kBAAMlB,EAAS,YAJzB,gFAQA,eAACuH,GAAA,EAAD,CACCyC,kBAAgB,EAChB7J,QAAQ,YACRa,UAAU,6BACVE,QAAS,kBAAMlB,EAAS,WAJzB,4CAWH,eAAC,GAAD,S,8HC7EYiK,OAhFf,YAOY,IANXrQ,EAMU,EANVA,OAMU,IALVsQ,gBAKU,SAJVC,EAIU,EAJVA,SAIU,IAHVnJ,iBAGU,MAHE,QAGF,MAFVoJ,0BAEU,MAFW,IAEX,EADVC,EACU,EADVA,SAEA,EAAuBpG,mBAAS,GAAhC,oBAAOqG,EAAP,KAAeC,EAAf,KACMC,EAAYzK,iBAAO,MACnB0K,EAAa1K,mBACb2K,EAAoB3K,iBAAe,GAEnC4K,EAActK,uBACnB,SAAAE,GACC,KAAIA,EAAEqK,QAAQrO,OAAS,GAAvB,CACA,IAAKkO,EAAW9J,QAGf,OAFA+J,EAAkB/J,QAAUkK,YAAY/O,WACxC2O,EAAW9J,QAAUJ,EAAEqK,QAAQ,IAGhC,IAAME,EAASvK,EAAEwK,eAAe,GAAGC,QAAUP,EAAW9J,QAAQqK,QAChET,EAAKO,MAEN,CAACP,IAGIU,EAAiB5K,uBAAY,WAClC,IAAM6K,EAAYL,YAAY/O,MAAQ4O,EAAkB/J,QACxD8J,EAAW9J,aAAUjH,EACrB,IAAIyR,EAAc,EACdX,EAAU7J,UACbwK,EAAc/E,OACbgF,iBAAiBZ,EAAU7J,SAASmJ,MAAMuB,QAAQ,KAAM,MAGtDH,EAAYd,IAAuBE,EAASa,GAC/Cd,IACAE,EAAK,IAEsBA,GAAtBD,EAASa,GAAmBA,EACvB,KAET,CAACZ,EAAMH,EAAoBE,EAAQD,IAEhCiB,EAAkBjL,uBACvB,SAACkL,GACA,IAAIpI,EAAU,CAAC,SAIf,OAHInC,GACHmC,EAAQvF,KAAR,MAAAuF,EAAO,aAASnC,EAAUsB,MAAM,OAE1Ba,EAAQ9N,KAAI,SAAAyQ,GAAC,OAAIA,EAAIyF,KAAQC,KAAK,OAE1C,CAACxK,IAGF,OACC,uBAAKA,UAAWsK,EAAgB,SAAhC,UACC,sBACCtK,UAAWsK,EAAgB,YAC3BG,YAAavB,EAAWS,OAAcjR,EACtCgS,WAAYxB,EAAWe,OAAiBvR,EACxCiS,MAAO,CACNC,UAAWtB,EAAS,EAAI,GAAb,qBAAgCA,EAAhC,OACXuB,aAAcvB,GAAU,EAAI,GAAK,OANnC,SASEH,IAEF,sBACCnJ,UAAWsK,EAAgB,WAC3BQ,IAAKtB,EACLtJ,QAASmJ,EAHV,SAKEzQ,QCkBUmS,OAlFf,YAOwB,IAAD,EAClBC,EADkB,IANtB9K,eAMsB,WANZxH,EAMY,MALtBuS,gBAKsB,WALXvS,EAKW,MAJtBwS,eAIsB,SAHtBC,EAGsB,EAHtBA,WACAxO,EAEsB,EAFtBA,MAEsB,IADtBtC,KAGA,aAFsB,aADfsC,QACe,IADfA,OACe,EADfA,EAAOtC,KACQ,KAEV,OAAIsC,QAAJ,IAAIA,OAAJ,EAAIA,EAAOtC,OACtB,KAAKnB,GAAa4C,qCACjBkP,EAAY,UACZ,MACD,KAAK9R,GAAakS,iDACjBJ,EAAY,WACZ,MACD,KAAK9R,GAAamS,yEACjBL,EAAY,MAId,IAAMM,EAAcjM,uBACnB,SAAAE,GACCA,EAAEgM,iBACGJ,GACDjL,GAAWvD,GACduD,EAAQvD,KAGV,CAACuD,EAASvD,IAGL6O,EAAoBnM,uBACzB,SAACE,GACIA,GAAGA,EAAEkM,kBACLR,GAAYtO,GAAOsO,EAAStO,KAEjC,CAACsO,EAAUtO,IAGZ,OACC,eAAC+O,GAAA,EAAD,CACC1L,UAAS,sBAAiBkL,EAAU,WAAa,IACjDhL,QAASoL,EAFV,SAIC,gBAAC,GAAD,CACCtL,UAAU,eACVkJ,SAAUiC,EACV9B,SAAUmC,EACV5S,OACC,uCACC,eAACqH,EAAA,EAAD,CACC9J,GAAG,mCACH6J,UAAU,4BAFX,SAIC,eAAC,KAAD,MAED,wBACCoG,QAAQ,mCACRpG,UAAU,4BAFX,2DAZH,UAqBC,sBAAKA,UAAS,4BAAuBgL,KACrC,uBAAKhL,UAAU,uBAAf,UACC,uBAAKA,UAAU,uBAAf,UACC,uBAAMA,UAAU,oBAAhB,SAAqCnF,GAAU,OAAC8B,QAAD,IAACA,OAAD,EAACA,EAAOlI,QACvD,wBAAMuL,UAAU,wBAAhB,UACErD,GAASzD,GAAayD,EAAMtC,MAD9B,kBACwCsC,QADxC,IACwCA,OADxC,EACwCA,EAAOgP,eAGhD,uBAAM3L,UAAU,qBAAhB,gBAAsCrD,QAAtC,IAAsCA,OAAtC,EAAsCA,EAAOhL,QAC7C,uBAAMqO,UAAU,uBAAhB,gBAAwCrD,QAAxC,IAAwCA,GAAxC,UAAwCA,EAAOtF,eAA/C,aAAwC,EAAgB9E,gB,aC/EvDqZ,GAAsB,CAC3B,eAAC,GAAD,CAAkCV,SAAO,EAAC7Q,KAAMnB,GAAa4C,sCAA5C,kBACjB,eAAC,GAAD,CAAkCoP,SAAO,EAAC7Q,KAAMnB,GAAamS,0EAA5C,kBACjB,eAAC,GAAD,CAAkCH,SAAO,EAAC7Q,KAAMnB,GAAakS,kDAA5C,kBACjB,eAAC,GAAD,CAAkCF,SAAO,EAAC7Q,KAAMnB,GAAamS,0EAA5C,kBACjB,eAAC,GAAD,CAAkCH,SAAO,EAAC7Q,KAAMnB,GAAa4C,sCAA5C,mBA0HH+P,OAvHf,YAAmE,IAAvC5O,EAAsC,EAAtCA,SAAU3D,EAA4B,EAA5BA,QAASwS,EAAmB,EAAnBA,SAC9C,EAAgC7I,oBAAS,GAAzC,oBAAOG,EAAP,KAAkBC,EAAlB,KACMpC,EAAWC,cACXlC,EAAWC,cACXC,EAAWT,KACXrJ,EAAOuJ,GAAY1F,IACnB8S,EAAgBpN,IAAY,qBAAEP,SAAuBpB,gBAErDE,EAAWyB,IAA2B,YAC3C,OAD2D,EAAdP,SAC7BlB,SAAS4J,QACxB,SAACkF,EAAD,GAAuC,IAAxBzX,EAAuB,EAAvBA,MAAUD,EAAa,mBACrC,OAAO0X,EAAYC,OAClB1X,EAAMF,KAAiB,SAAAI,GAAI,kCACvBA,GACAH,SAIN,OAIF6M,qBAAU,WACT,IAEsB,EAFhB+K,EAAQ,IAAIC,gBAAgBlL,EAASmL,QACvC1Y,EAAU0R,OAAO8G,EAAMG,IAAI,WAC1B3Y,GAAW0B,IACf1B,GAAU,UAAA0B,EAAKc,aAAL,eAAYC,KAAMmW,KAExB5Y,EAILwL,EAAS6C,GAAgB1E,gBAAgB3J,IAHxCsL,EAAS,UAAW,CAACqL,SAAS,MAI7B,CAACpJ,EAASmL,SAEbjL,qBAAU,WACT,IAAMjK,EAAkB,IAAIoM,gBAc5B,OAbArQ,EAAYQ,cAAcsY,EAAe7U,GACvCT,MAAK,SAAA2H,GACLc,EAAS6C,GAAgBrE,YAAYU,IACrCiF,GAAW,MAEX1M,OAAM,SAAAzD,GACDgE,EAAgBpD,OAAOyP,SAC3BF,GAAW,MAMP,WACNnM,EAAgBuM,WAEf,CAACsI,IAEJ,IAAMQ,EAAqBlN,uBAC1B,SAAA/K,GACC0K,EAAS,eAAiB1K,EAAQ6B,MAEnC,CAAC6I,IAGIwN,EAAsBnN,uBAC3B,SAAA/K,GACC4K,EACC6C,GAAgBxK,cAAc,CAC7B5F,MAAO2C,EAAQ3C,MACf0I,KAAM/F,EAAQ+F,KACdhD,QAAS/C,EAAQ+C,QACjBuB,OAAQ6T,GAAevQ,iBAAiB5H,EAAQ6B,OAGlDlD,EAAYwE,cAAcnD,EAAQ6B,IAAIM,MAAK,SAAAC,GACtCA,GACJwI,EACC6C,GAAgBxK,cAAc,CAC7B5F,MAAO2C,EAAQ3C,MACf0I,KAAM/F,EAAQ+F,KACdhD,QAAS/C,EAAQ+C,QACjBuB,OAAQ6T,GAAexQ,cAAc,CACpCQ,WAAW,EACXhI,KAAMH,YAMX,CAAC4K,IAGIwN,EAAmBxK,mBACxB,kBACChF,EACEyP,QAAO,SAAA7O,GAAC,OAAIA,EAAExE,UAAYA,GAAWwE,EAAEgO,WAAaA,KACpDc,MAAK,SAAChZ,EAAGiZ,GAAJ,OAAUjZ,EAAEa,KAAOoY,EAAEpY,UAC7B,CAAC6E,EAASwS,EAAU5O,EAAS3B,SAG9B,OACC,eAACuR,GAAA,EAAD,CAAM9M,UAAU,+BAAhB,SACEoD,EACEwI,GACAc,EAAiBrY,KAAI,SAACyJ,EAAG8G,GAAJ,OACrB,eAAC,GAAD,CAEC1E,QAASqM,EACTtB,SAAUuB,EACVrB,aAAclO,EACdN,MAAOmB,GALR,uBACsB8G,UCnBbmI,I,OAjGM,WACpB,IAAMC,EAAcjO,iBAA2C,IACzDG,EAAWT,KACXO,EAAWC,cACjB,EAA4CN,GAAYR,IAAjDlB,EAAP,EAAOA,SAAUE,EAAjB,EAAiBA,WAAYC,EAA7B,EAA6BA,YAE7B+D,qBAAU,WAAO,IAAD,EACf,UAAA6L,EAAYrN,QAAQxC,EAAa,UAAjC,SAAqC8P,eAAe,CACnDC,SAAU,SACVC,MAAO,SACPC,OAAQ,aAEP,CAACjQ,IAGJ,IAAMkQ,EAAqBhO,uBAG1B,YAAsB,IACdiO,EADa,EAAnBC,cACMD,QACDE,EAAkBpI,OAAOkI,EAAO,SACtCpO,EAAS6C,GAAgBzE,WAAWkQ,MAErC,CAACtO,IAGIuO,EAAkBpO,uBAAqC,WAC5DH,EAAS6C,GAAgBvE,oBACvB,CAAC0B,IAEEwO,EAAmBrO,uBAAY,WACpCH,EAAS6C,GAAgBtE,cAAc,WACvCuB,EAAS,UAAW,CAACpM,MAAO,CAAC+a,WAAW,OACtC,IAGGC,EAAW1L,mBAAQ,WAExB,IADA,IAAI2L,EAAQ,IAAIC,MAAMjW,EAAQkW,QACrBnJ,EAAI/M,EAAQmW,OAAQpJ,GAAK/M,EAAQkW,OAAQnJ,IAAK,CACtD,IAAIrS,EAAO8G,GAAeuL,GAC1BiJ,EAAMjR,KACL,oBAECkO,IAAK,SAAAA,GACJkC,EAAYrN,QAAQ/C,KAAKkO,IAE1B3U,GAAI5D,EACJ,eAAcqS,EACd1E,QAASmN,EACTrN,UAAS,iBAAY7C,IAAeyH,EAAI,UAAY,IARrD,SAUErS,GAVF,kBACiBqS,KAanB,OAAOiJ,IACL,CAACR,EAAoBlQ,IAElB8Q,EAAY/L,mBACjB,kBAAM9E,IAAgBxF,EAAUsC,QAChC,CAACkD,IAGF,OACC,uBAAK4C,UAAU,0BAAf,UACC,uBAAKA,UAAU,gCAAf,UACC,qBAAIA,UAAU,kBAAd,SACEiO,EAAY,kFAAmB,wEAEjC,eAAC,KAAD,CACC9L,QAAS,CAACC,KAAM,wBAChBlC,QAASuN,EAFV,SAIC,eAAC,KAAD,SAGF,sBAAKzN,UAAU,2BAAf,SAA2C4N,IAC3C,eAAC,GAAD,CACC3Q,SAAUA,EACV6O,SAAU1O,EACV9D,QAAS6D,IAETF,GACA,eAAC,KAAD,CACC+C,UAAU,0BACVb,QAAQ,WACR+O,KAAK,QACLC,MAAM,UACNjO,QAASwN,EALV,SAOC,eAAC,KAAD,CAAS1N,UAAU,oBC7DToO,I,OAtCK,WACnB,IAAMpP,EAAWC,cACXoP,EAAgBhP,uBAAY,WACjCL,EAAS,aACP,CAACA,IACEsP,EAAgBjP,uBAAY,WACjCL,EAAS,YACP,CAACA,IACEuP,EAAiBlP,uBAAY,WAClCL,EAAS,aACP,CAACA,IACJ,OACC,uBAAKgB,UAAU,oBAAf,UACC,qBAAIA,UAAU,YAAd,mGACA,oBAAGA,UAAU,qCAAb,gpCAMA,eAACuG,GAAA,EAAD,CAAQvG,UAAU,oBAAoBE,QAASmO,EAA/C,iFAGA,oBAAGrO,UAAU,qBAAb,igBAIA,eAACuG,GAAA,EAAD,CAAQvG,UAAU,+BAA+BE,QAASqO,EAA1D,gFAGA,oBAAGvO,UAAU,qBAAb,qGACA,eAACuG,GAAA,EAAD,CAAQvG,UAAU,oBAAoBE,QAASoO,EAA/C,2C,oBCEYE,OA/Bf,YAA0D,IAAnCtP,EAAkC,EAAlCA,SAAUvC,EAAwB,EAAxBA,MAC1B8R,EAAqBpP,uBAG1B,YAAe,IAAbI,EAAY,EAAZA,OACDP,EACCrN,GAAQmK,eAAe,CAACU,SAAU,QAASC,MAAO8C,EAAO9C,WAG3D,CAACuC,IAEF,OACC,gBAACa,EAAA,EAAD,CAAa2O,WAAS,EAAC1O,UAAU,iCAAjC,UACC,wBAAO7J,GAAG,aAAaiQ,QAAQ,QAAQpG,UAAU,cAAjD,8DAGA,eAAC2O,GAAA,EAAD,CACC3O,UAAU,uBACV4O,QAAS,EACTC,QAAS,GACT,aAAW,mDACXnO,YAAY,+IACZoO,aAAcnS,EACd8D,OAAQgO,Q,UC4BGM,OAhDf,YAA+D,IAAzC7P,EAAwC,EAAxCA,SAAUvC,EAA8B,EAA9BA,MACzBqS,EAAoB3P,uBAGzB,YAAe,IAAbI,EAAY,EAAZA,OACDP,EAASrN,GAAQmK,eAAe,CAACU,SAAU,OAAQC,MAAO8C,EAAO9C,WAElE,CAACuC,IAGI8L,EAAY9I,mBAAQ,WACzB,OAAQvF,GACP,KAAKzD,GAAa4C,qCACjB,MAAO,UACR,KAAK5C,GAAakS,iDACjB,MAAO,WACR,KAAKlS,GAAamS,yEACjB,MAAO,SAEP,CAAC1O,IAEJ,OACC,gBAACoD,EAAA,EAAD,CAAa2O,WAAS,EAAC1O,UAAU,mCAAjC,UACC,wBAAOoG,QAAQ,OAAOjQ,GAAG,aAAa6J,UAAU,cAAhD,4EAGA,gBAACiP,GAAA,EAAD,CACCC,QAAQ,aACRlP,UAAU,oCACVrD,MAAOA,EACPgE,SAAUqO,EACVG,YAAa,SAAAxS,GAAK,OACjB,qBAAGqD,UAAU,8BAAb,UACE5F,GAAuBuC,GACxB,uBAAMqD,UAAS,sCAAiCgL,SARnD,UAYC,eAACxG,GAAA,EAAD,CAAU7H,MAAOzD,GAAa4C,qCAA9B,kDACA,eAAC0I,GAAA,EAAD,CAAU7H,MAAOzD,GAAakS,iDAA9B,8DACA,eAAC5G,GAAA,EAAD,CAAU7H,MAAOzD,GAAamS,yEAA9B,6FC6BW+D,OArEf,YAA2D,IAAlClQ,EAAiC,EAAjCA,SAAUvC,EAAuB,EAAvBA,MAClC,EAAgCsG,mBAAkB,IAAlD,oBAAOoM,EAAP,KAAiBC,EAAjB,KAEAnO,qBAAU,WACT,IAAMjK,EAAkB,IAAIoM,gBAc5B,OAbArQ,EAAY6D,YAAYI,GACtBT,MAAK,SAAA4Y,GACAA,GACLC,EAAYD,MAEZ1Y,OAAM,SAAAzD,GAEJgE,EAAgBpD,OAAOyP,QAAxB,KAMI,WACNrM,EAAgBuM,WAEf,IAEH,IAAM8L,EAAuBlQ,uBAG5B,YAAe,IACRxB,EADO,EAAZ4B,OACwB9C,MACnBtF,EAAUgY,EAAS/S,MAAK,SAAAC,GAAC,OAAIA,EAAEpG,KAAO0H,KACvCxG,GACL6H,EAASrN,GAAQmK,eAAe,CAACU,SAAU,UAAWC,MAAOtF,OAE9D,CAAC6H,EAAUmQ,IAGNG,EAActN,mBACnB,kBACCmN,EAAShb,KAAI,gBAAE8B,EAAF,EAAEA,GAAI5D,EAAN,EAAMA,KAAN,OACZ,eAACiS,GAAA,EAAD,CAA4C7H,MAAOxG,EAAnD,SACE5D,GADF,8BAAsC4D,SAIxC,CAACkZ,EAAS9T,SAGX,OACC,gBAACwE,EAAA,EAAD,CAAa2O,WAAS,EAAC1O,UAAU,mCAAjC,UACC,wBAAOoG,QAAQ,UAAUpG,UAAU,cAAnC,6FAGA,eAACiP,GAAA,EAAD,CACCC,QAAQ,aACRlP,UAAU,oCACV8O,aAAcnS,EAAMxG,GACpBwK,SAAU4O,EAJX,SAMEC,Q,yFCHUC,GAjDE,SAAC,GAAyD,IAAxDzP,EAAuD,EAAvDA,UAAWiL,EAA4C,EAA5CA,SAAU/K,EAAkC,EAAlCA,QAAYzL,EAAsB,mBACnEib,EAAerQ,uBAAY,WAChC4L,EAASxW,KACP,CAACwW,IAEEK,EAAcjM,uBAAY,WAC/Ba,EAAQzL,KACN,CAACyL,IAEJ,OACC,eAAC,GAAD,CAECF,UAAWA,EAAY,SACvBqJ,SAAUqG,EACV9W,OACC,uCACC,eAACqH,EAAA,EAAD,CACC9J,GAAE,UAAK6J,EAAL,wBACFA,UAAS,UAAKA,EAAL,wBAFV,SAIC,eAAC,KAAD,MAED,wBACC7J,GAAE,UAAK6J,EAAL,wBACFA,UAAS,UAAKA,EAAL,iBAFV,2DAZH,SAqBC,gBAAC0L,GAAA,EAAD,CAAU1L,UAAWA,EAAWE,QAASoL,EAAzC,UACC,uBAAKtL,UAAWA,EAAY,iBAA5B,UACC,uBAAMA,UAAW,wBAAjB,SACE3G,GAAe5E,EAAK6E,WAEtB,wBAAM0G,UAAU,yBAAhB,kFACgBvL,EAAKkX,eAGtB,uBAAK3L,UAAWA,EAAY,kBAA5B,UACC,uBAAMA,UAAU,sBAAhB,SAAuCnF,GAAWpG,EAAKA,QACvD,uBAAMuL,UAAU,gCA/BbvL,EAAK0B,KCYEwZ,GAxBE,SAAC,GAA6D,IAA5DvS,EAA2D,EAA3DA,YAAa7I,EAA8C,EAA9CA,MAAO0W,EAAuC,EAAvCA,SAAU/K,EAA6B,EAA7BA,QAC1C0P,EAAY1N,mBACjB,kBACC3N,EAAMF,KACL,SAACkI,EAAGqI,GAAJ,OACCrI,EAAEuP,WAAa1O,GACd,uCACC,wBAAC,GAAD,2BACKb,GADL,IAECzG,IAAG,yBAAoB8O,GACvB5E,UAAU,YACViL,SAAUA,EACV/K,QAASA,KAEV,eAAC2P,GAAA,EAAD,CAAS7P,UAAU,oBAAoBb,QAAQ,mBAIpD,CAAC/B,EAAa7I,EAAO0W,EAAU/K,IAGhC,OAAO,eAAC4M,GAAA,EAAD,CAAM9M,UAAU,YAAhB,SAA6B4P,K,OCdrC,SAASE,GAAiBC,GACzB,IAAIxW,EAAO,IAAIpF,KAGf,OAFAoF,EAAKC,QAAQD,EAAKE,WAAaF,EAAKQ,SAAWgW,IAExCxW,EAAKyW,eAAe,KAAM,CAAC1W,QAAS,UAG5C,IACM2W,GADQ,CAAC,QAAS,QAAS,QAAS,QAAS,QAAS,SAClC5b,KAAI,SAAAI,GAC7B,IAAMyb,EAAY,IAAI/b,KAAK,cAAgBM,GAAMC,UACjD,OACC,eAAC8P,GAAA,EAAD,CAAyC7H,MAAOuT,EAAhD,SACErV,GAAWqV,IADb,oBAA4BA,OA+HfC,GAzHO,SAAC,GAA8C,IAA7CnM,EAA4C,EAA5CA,KAAMrH,EAAsC,EAAtCA,MAAOmP,EAA+B,EAA/BA,SAAU7H,EAAqB,EAArBA,QAC9C,EAA8BhB,oBACxB,OAALtG,QAAK,IAALA,OAAA,EAAAA,EAAOrD,UAAWzB,EAAQmW,QAD3B,oBAAO1U,EAAP,KAAgBgE,EAAhB,KAGA,EAAwB2F,oBAAsB,OAALtG,QAAK,IAALA,OAAA,EAAAA,EAAOlI,QAAS,GAAzD,oBAAOA,EAAP,KAAa2b,EAAb,KACA,EAAgCnN,oBAAsB,OAALtG,QAAK,IAALA,OAAA,EAAAA,EAAOgP,WAAY,IAApE,oBAAOA,EAAP,KAAiB0E,EAAjB,KAEMC,EAAiBpO,mBAAQ,WAE9B,IADA,IAAIyC,EAAU,GACLC,EAAI/M,EAAQmW,OAAQpJ,GAAK/M,EAAQkW,SAAUnJ,EACnDD,EAAQ/H,KACP,eAACoI,GAAA,EAAD,CACChF,UAAU,gBACVmC,QAAS,CAAC8C,SAAU,2BACpBtI,MAAOiI,EAHR,SAKEkL,GAAiBlL,MAIrB,OAAOD,IACL,IAEG4L,EAAkBlR,uBAAY,WACnC4E,EAAQ,CACP0H,WACAlX,OACA6E,UACAwS,eAEC,CAAC7H,EAASxP,EAAMkX,EAAUrS,EAASwS,IAEhC0E,EAAoBnR,uBAAY,WACrC4E,MACE,CAACA,IAEEwM,EAAsBpR,uBAC3B,SAACkG,EAAGhB,GACCA,EAAOhJ,OAAS,GACpB+B,EAAWiH,EAAO,MAEnB,CAACjH,IAGIoT,EAAuBrR,uBAC5B,gBAAEI,EAAF,EAAEA,OAAiB4Q,EAAY5Q,EAAO9C,SACtC,CAAC0T,IAGIM,EAAmBtR,uBACxB,gBAAEI,EAAF,EAAEA,OAAiB2Q,EAAQ3Q,EAAO9C,SAClC,CAACyT,IAGF,OACC,gBAACzK,GAAA,EAAD,CACC3F,UAAU,0BACVmC,QAAS,CAACyD,MAAO,mBACjB5B,KAAMA,EACNC,QAASuM,EAJV,UAMC,eAAC3K,GAAA,EAAD,CAAa7F,UAAU,yBAAvB,yGAGA,uBAAKA,UAAU,wBAAf,UACC,uBAAKA,UAAU,yBAAf,UACC,wBAAOA,UAAU,cAAjB,2EACA,eAACsG,GAAA,EAAD,CACCtG,UAAU,kCACVW,SAAU8P,EACV9T,MAAO,CAACrD,GAHT,SAKEgX,OAGH,sBAAKtQ,UAAU,yBAAf,SACC,eAAC8F,GAAA,EAAD,CACCC,QAAM,EACN/F,UAAU,cACV3F,KAAK,SACL8E,QAAQ,WACRgH,gBAAiB,CAACnG,UAAW,eAC7BgG,MAAM,8FACN+C,WAAY,CAAC/I,UAAW,qBACxBU,YAAY,0LACZ/D,MAAOlI,EACPkM,SAAUgQ,EAVX,SAYEV,OAGH,sBAAKjQ,UAAU,yBAAf,SACC,eAAC8F,GAAA,EAAD,CACC9F,UAAU,cACVW,SAAU+P,EACVvK,gBAAiB,CAACnG,UAAW,eAC7BgG,MAAM,yDACN+C,WAAY,CAAC/I,UAAW,qBACxBb,QAAQ,WACRuB,YAAY,+FAIf,uBAAKV,UAAU,0BAAf,UACC,eAACuG,GAAA,EAAD,CACCvG,UAAU,kCACVE,QAASsQ,EAFV,kDAMA,eAACjK,GAAA,EAAD,CACCvG,UAAU,gCACVE,QAASqQ,EAFV,2ECtCWK,GAlGO,SAAC,GAA8C,IAA7C1R,EAA4C,EAA5CA,SAAUvC,EAAkC,EAAlCA,MACjC,EAAgCsG,mBAASrL,EAAUuC,OAAnD,oBAAO2R,EAAP,KAAiBvO,EAAjB,KACA,EAAoC0F,oBAAS,GAA7C,oBAAO4N,EAAP,KAAmBC,EAAnB,KACA,EAAgC7N,qBAAhC,oBAAO8N,EAAP,KAAiBC,EAAjB,KAEMC,EAAuB5R,uBAC5B,SAACkG,EAAG5I,GAAeY,EAAYZ,KAC/B,CAACY,IAGI2T,EAAe7R,uBACpB,WAAWyR,GAAeD,KAC1B,CAACA,IAIIM,EAAkB9R,uBACvB,SAAC5K,GACAuc,EAAYvc,GACZqc,GAAc,KAEf,CAACE,EAAaF,IAGTM,EAAmB/R,uBACxB,SAAC5K,GAA2ByK,EAASrN,GAAQqK,iBAAiBzH,EAAK0B,OACnE,CAAC+I,IAKImG,EAAoBhG,uBACzB,SAAC5K,GACAqc,GAAc,GACdE,OAAYtY,GACPjE,GAEJyK,EADG6R,EAEFlf,GAAQuK,iBAAR,2BACI3H,GADJ,IAEC0B,GAAI4a,EAAS5a,MAINtE,GAAQoK,cAAc,CAACxH,OAAMgI,WAAW,OAGnD,CAACyC,EAAU4R,EAAeC,IAI3B,OACC,uBAAK/Q,UAAU,iBAAf,UACC,eAAC,GAAD,CACCgE,KAAM6M,EACN5M,QAASoB,EACTyG,SAAUA,EACVnP,MAAOoU,IAER,uBAAK/Q,UAAU,yBAAf,UACC,uBAAMA,UAAU,eAAhB,yGACA,wBAAMA,UAAU,gBAAgBE,QAASgR,EAAzC,UACC,uBAAMlR,UAAU,sBAAhB,8DACA,eAACC,EAAA,EAAD,CAAMD,UAAU,sBAAhB,SACC,eAAC,KAAD,YAIH,gBAACqR,GAAA,EAAD,CACCrR,UAAU,iCACVrD,MAAOmP,EACPnL,SAAUsQ,EACV9O,QAAS,CACRmP,UACC,6BAA+B1Z,EAAUkU,GAAUyF,eANtD,UASC,eAACC,GAAA,EAAD,CACCxR,UAAU,uCACVrD,MAAO/E,EAAUuC,MACjB6L,MAAM,wEAEP,eAACwL,GAAA,EAAD,CACCxR,UAAU,uCACVrD,MAAO/E,EAAUsC,MACjB8L,MAAM,uFAGR,eAAC,GAAD,CACC5I,YAAa0O,EACbvX,MAAOoI,EACPuD,QAASiR,EACTlG,SAAUmG,Q,sCC/Ed,SAASK,GACRC,EACAC,EACA1c,GAEA,IAAM2c,EAAaD,EAAWtd,KAAuB,SAAAwd,GACpD,OAAQA,EAAUxX,MACjB,KAAKwB,GAAaK,iBACjB,OAAO2V,EAER,KAAKhW,GAAaI,cAGlB,KAAKJ,GAAaO,iBACjB,OAAO,2BAAIyV,GAAX,IAAsBhf,QAAQ,2BAAKgf,EAAUhf,SAAYoC,SAM5D,OAAO2c,EAAW3F,OACjByF,EAASnd,MACPoY,QAAO,gBAAExW,EAAF,EAAEA,GAAF,OAAWyb,EAAWtV,MAAK,SAAA1I,GAAC,OAAIA,EAAEuC,KAAOA,QAChD9B,KAAuB,SAAAI,GAAI,MAAK,CAChC4F,KAAMwB,GAAaO,iBACnBjG,GAAI1B,EAAK0B,GACTtD,QAAQ,2BAAKoC,GAAN,IAAYkB,GAAI1B,EAAK0B,UAKhC,SAAS2b,GACRH,EACA1c,GAEA,IAAM8c,EAAoBJ,EAAW7U,WACpC,SAAAlJ,GAAC,OAAIA,EAAEyG,OAASwB,GAAaK,kBAAoBtI,EAAEuC,KAAOlB,EAAKkB,MAGhE,IAA2B,IAAvB4b,EACH,MAAM,GAAN,oBACIJ,GADJ,CAEC,CAACtX,KAAMwB,GAAaO,iBAAkBvJ,QAASoC,EAAMkB,GAAIlB,EAAKkB,MAGhE,IAAM0b,EAAYF,EAAWI,GAI7B,MAAM,GAAN,oBACIJ,EAAWtV,MAAM,EAAG0V,IADxB,CAEC,CACC1X,KAAMwB,GAAaO,iBACnBvJ,QAAQ,2BAAKgf,EAAUhf,SAAYoC,GACnCkB,GAAIlB,EAAKkB,KALX,aAOIwb,EAAWtV,MAAM0V,EAAoB,KAI1C,IA4DezT,GA5DC,SAAC,EAEhB1F,GAC4B,IAF3BoZ,EAE0B,EAF1BA,QAASpf,EAEiB,EAFjBA,MAGJ8e,EAAW1T,GAAepL,EAAOgG,GACnCgZ,EAA6B,GACjC,OAAQhZ,EAAOyB,MAEd,KAAKwB,GAAaG,eACjB,MAA0BpD,EAAO/F,QAA1B6J,EAAP,EAAOA,SAAUC,EAAjB,EAAiBA,MACjBiV,EAAaH,GAAsBC,EAAUM,EAAX,gBAChCtV,EAAWC,IAEb,MAED,KAAKd,GAAaE,OACjB,MAA8CnD,EAAO/F,QAA9ClB,EAAP,EAAOA,MAAO0F,EAAd,EAAcA,QAASgD,EAAvB,EAAuBA,KAAS7F,EAAhC,mBACAod,EAAaE,GACZL,GAAsBC,EAAUM,EAAS,CAACrgB,QAAO0I,OAAMhD,YACvD7C,GAED,MAGD,KAAKqH,GAAaO,iBACjBwV,EAAaE,GAAqBE,EAASpZ,EAAO/F,SAClD,MAED,KAAKgJ,GAAaM,yBACjB,MAA8BvD,EAAO/F,QAA9BsD,EAAP,EAAOA,GAAIuG,EAAX,EAAWA,SAAUC,EAArB,EAAqBA,MACrBiV,EAAaE,GAAqBE,EAAD,cAAW7b,MAAKuG,EAAWC,IAC5D,MAED,KAAKd,GAAaI,cACjB,IAAO9F,EAAMub,EAASnd,MAAMmd,EAASnd,MAAMgH,OAAS,GAA7CpF,GACPyb,EAAU,uBACNI,GADM,CAET,CACC3X,KAAMzB,EAAOyB,KACbxH,QAAQ,aACPsD,KACAkB,QAASqa,EAASra,QAClB1F,MAAO+f,EAAS/f,MAChB0I,KAAMqX,EAASrX,MACZzB,EAAO/F,QAAQ4B,MAEnB0B,QAGF,MAED,KAAK0F,GAAaK,iBACjB,IAAM/F,EAAKyC,EAAO/F,QAClB+e,EAAaI,EAAQrF,QAAO,SAAA/Y,GAAC,OAAIA,EAAEuC,KAAOA,KAI5C,MAAO,CAACvD,MAAO8e,EAAUM,QAASJ,I,OC2BpBK,OA/If,WACC,IAYIC,EAZEjR,EAAWC,cACXlC,EAAWC,cACXkT,EAAgB1T,KACtB,EAA0BwE,oBAAS,GAAnC,oBAAOmP,EAAP,KAAcC,EAAd,KACA,EAAsC1T,IACrC,gBAAE5L,EAAF,EAAEA,YAAaqL,EAAf,EAAeA,SAAf,MAA8B,CAC7BnB,SAAUmB,EAASnB,SACnBqV,WAAYvf,EAAYC,OAAOpB,KAC/BsE,MAAOkI,EAASpB,iBAJXC,EAAP,EAAOA,SAAUqV,EAAjB,EAAiBA,WAAYpc,EAA7B,EAA6BA,MAS7B,GAAI+K,EAASmL,OAAQ,CACpB,IAAMmG,EAAS,IAAIpG,gBAAgBlL,EAASmL,QAC5C8F,EAAe9M,OAAOmN,EAAOlG,IAAI,OAGlC,IAAMmG,EAAY7T,IAAmC,YAAiB,IAAfP,EAAc,EAAdA,SACtD,IAAK8T,EAAc,MAAO,CAACtf,MAAOxB,GAAc4gB,QAAS,IACzD,IAAM1d,EAAU8J,EAASlB,SAASZ,MAAK,SAAAwB,GACtC,QAASA,EAAEvJ,MAAM+H,MAAK,SAAAC,GAAC,OAAIA,EAAEpG,KAAO+b,QAErC,OAAK5d,EACE,CAAC0d,QAAS,GAAIpf,MAAO0B,GADP,CAAC1B,MAAOxB,GAAc4gB,QAAS,OAGrD,EAAqCS,qBAAWnU,GAASkU,GAAzD,2BAAQR,EAAR,EAAQA,QAASpf,EAAjB,EAAiBA,MAAQsM,EAAzB,KAyEA,OAvEAiC,qBAAU,WACT,GAAKmR,EAAL,CACA,IAAMI,EAAWV,EAAQ3d,KAAI,SAAAuE,GAC5B,OAAQA,EAAOyB,MACd,KAAKwB,GAAaI,cACjB,MACCrD,EAAO/F,QADDwH,EAAP,EAAOA,KAAMhD,EAAb,EAAaA,QAAS1F,EAAtB,EAAsBA,MAAO8C,EAA7B,EAA6BA,KAAM6E,EAAnC,EAAmCA,QAASwS,EAA5C,EAA4CA,SAAUH,EAAtD,EAAsDA,SAEtD,OAAO1Y,EAAYkE,iBAClB,CAACkD,OAAMhD,UAAS1F,SAChB,CAAC8C,OAAM6E,UAASqS,WAAUG,YAC1B5V,GACCO,MAAK,SAAAkc,GACDA,IACLR,EACCS,GAAgBrb,cAAc,CAC7B5F,MAAO6gB,EAAU5f,MAAMjB,MACvB0I,KAAMmY,EAAU5f,MAAMyH,KACtBhD,QAASmb,EAAU5f,MAAMyE,QACzBuB,OAAQia,GAAe5W,cAAc,CACpCQ,WAAW,EACXhI,KAAMke,OAITR,EACCS,GAAgBrb,cAAc,CAC7B5F,MAAO6gB,EAAU5f,MAAMjB,MACvB0I,KAAMmY,EAAU5f,MAAMyH,KACtBhD,QAASmb,EAAU5f,MAAMyE,QACzBuB,OAAQia,GAAe9W,OAAO4W,UAKlC,KAAK9W,GAAaK,iBACjB,OAAOjJ,EAAYwE,cAAcmB,EAAO/F,SAAS4D,MAAK,SAAAC,GAChDA,GACLyb,EACCS,GAAgBrb,cAAc,CAC7B5F,MAAO6gB,EAAU5f,MAAMjB,MACvB0I,KAAMmY,EAAU5f,MAAMyH,KACtBhD,QAASmb,EAAU5f,MAAMyE,QACzBuB,OAAQia,GAAe3W,iBAAiBtD,EAAO/F,eAKnD,KAAKgJ,GAAaO,iBACjB,OAAOnJ,EAAYsE,cAAcqB,EAAO/F,SAAS4D,MAAK,SAAAC,GAChDA,GACLyb,EACCS,GAAgBrb,cAAc,CAC7B5F,MAAO6gB,EAAU5f,MAAMjB,MACvB0I,KAAMmY,EAAU5f,MAAMyH,KACtBhD,QAASmb,EAAU5f,MAAMyE,QACzBuB,OAAQia,GAAe9W,OAAOnD,EAAO/F,mBAO3CigB,QAAQC,IAAIL,GAAUjc,MAAK,WAC1B4b,GAAS,GACTW,YAAW,WACVb,EAAcc,EAAc7gB,SAAQ,IACpC4M,EAAS,mBAAD,OAAoB9I,GAAS,CAACmU,SAAS,MAC7C,WAEF,CAACiI,EAAYN,EAASG,IAER,WAAblV,GAA0BiV,EAM7B,uBAAKlS,UAAU,yBAAf,UACC,gBAAC2F,GAAA,EAAD,CACC3F,UAAU,2CACVmC,QAAS,CACRyD,MAAO,kCAER5B,KAAMsO,EALP,UAOC,eAACY,GAAA,EAAD,CACC/c,GAAG,wBACH6J,UAAS,gCACRoS,EAAQ,+BAAiC,IAE1Ce,eAAa,EACbhF,MAAOiE,EAAQ,UAAY,UAC3BjT,QAASiT,EAAQ,cAAgB,gBACjCzV,MAAOyV,EAAQ,SAAM1Z,IAErB0Z,GACA,eAACnS,EAAA,EAAD,CAAMD,UAAU,oBAAhB,SACC,eAAC,IAAD,MAGF,wBAAOoG,QAAQ,wBAAwBpG,UAAU,qBAAjD,SACEoS,EAAQ,yDAAc,oEAGzB,wBAAMpS,UAAU,oBAAhB,UACC,eAAC,GAAD,CAAcd,SAAUA,EAAUvC,MAAO/J,EAAMjB,QAC/C,eAAC,GAAD,CAAauN,SAAUA,EAAUvC,MAAO/J,EAAMyH,OAC9C,eAAC,GAAD,CAAgB6E,SAAUA,EAAUvC,MAAO/J,EAAMyE,UACjD,eAAC,GAAD,CAAe6H,SAAUA,EAAUvC,MAAO/J,EAAM2B,eApClDyK,EAAS,YAAa,CAACqL,SAAS,IACzB,O,2BCRM+I,OA1Gf,WACC,MAA4BnQ,oBAAS,GAArC,oBAAOoQ,EAAP,KAAgBhP,EAAhB,KACMiP,EAAWvU,iBAAyB,MACpCwU,EAAcxU,iBAAyB,MACvCC,EAAWC,cACXC,EAAWT,KAGX+U,EAAenU,uBACpB,SAAAE,GACCA,EAAEgM,iBACF,IAAM3W,EAAgB2K,EAAEgO,cAAckG,WAAW9W,MAC3C9H,EAAmB0K,EAAEgO,cAAcmG,cAAc/W,MACvD,GAAK/H,GAAUC,EAIf,IACC5B,EAAY0B,aAAaC,EAAOC,GAAU4B,MAAK,SAAArB,GAAS,IAAD,EACjDA,GAIL8J,EAAS2C,EAAWvJ,QAAQlD,IAC5B4J,EAAS,mBAAD,iBAAoB5J,EAAKc,aAAzB,aAAoB,EAAYC,IAAM,CAC7CkU,SAAS,KALThG,GAAS,MAQV,MAAOnR,GACRsQ,QAAQmQ,IAAIzgB,QAfZmR,GAAS,KAkBX,CAACA,EAAUrF,EAAUE,IAGhB0U,EAAoBvU,uBAExB,WACGgU,GAAShP,GAAS,KACpB,CAACgP,EAAShP,IAGP4B,EAA+B/D,mBAAQ,WAC5C,IACa,IADT2R,EAAyB,CAAC,GAAI,IAC9BR,KACH,UAAIC,EAAS3T,eAAb,aAAI,EAAkBhD,OACrBkX,EAAK,GAAK,0IAEVA,EAAK,GAAK,4IAEX,UAAIN,EAAY5T,eAAhB,aAAI,EAAqBhD,OACxBkX,EAAK,GAAK,0IAEVA,EAAK,GAAK,4IAGZ,OAAOA,IACL,CAACR,IAEJ,OACC,uBAAKrT,UAAU,kBAAf,UACC,qBAAIA,UAAU,oBAAd,mGACA,wBAAMA,UAAU,mBAAmB8T,SAAUN,EAAcxe,OAAO,OAAlE,UACC,gBAAC+K,EAAA,EAAD,CACCC,UAAS,mCAA8BqT,EAAU,QAAU,IAD5D,UAGC,eAACU,GAAA,EAAD,CAAY/T,UAAU,sBAAsBoG,QAAQ,aAApD,6CAGA,eAAC7F,EAAA,EAAD,CACCC,SAAU8S,EACVtT,UAAU,sBACV7J,GAAG,aACH5D,KAAK,aACLoO,SAAUiT,IAEX,eAACI,GAAA,EAAD,CAAgBhU,UAAU,4BAA1B,SACEiG,EAAW,QAGd,gBAAClG,EAAA,EAAD,CACCC,UAAS,mCAA8BqT,EAAU,QAAU,IAD5D,UAGC,eAACU,GAAA,EAAD,CAAY/T,UAAU,sBAAsBoG,QAAQ,gBAApD,mDAGA,eAAC7F,EAAA,EAAD,CACCC,SAAU+S,EACVvT,UAAU,sBACV7J,GAAG,gBACHkE,KAAK,WACL9H,KAAK,gBACLoO,SAAUiT,IAEX,eAACI,GAAA,EAAD,CAAgBhU,UAAU,4BAA1B,SACEiG,EAAW,QAGd,eAACM,GAAA,EAAD,CAAQvG,UAAU,qBAAqB3F,KAAK,SAA5C,mDCtGE4Z,GAAU,SAAC,GAA4B,IAA3BtiB,EAA0B,EAA1BA,MACXqN,EAAWC,cACXqM,EAAcjM,uBAAY,WAC/BL,EAAS,WAAD,OAAYrN,MAClB,CAACA,EAAOqN,IACX,OACC,uBAAKgB,UAAU,UAAUE,QAASoL,EAAlC,UACC,sBAAKtL,UAAU,uBACf,qBAAIA,UAAU,gBAAd,SAA+BrO,QAmBnBuiB,GAXO,WACrB,IAAMC,EAAkBjS,mBACvB,kBAAMtM,OAAO2O,OAAOnL,IAAS/E,KAAI,SAAA+f,GAAC,OAAI,eAAC,GAAD,CAAiBziB,MAAOyiB,GAAVA,QACpD,IAED,OAAO,sBAAKpU,UAAU,oBAAf,SAAoCmU,K,4DCkE7BE,I,OAnFY,SAAC,GAAkC,IAAjC1iB,EAAgC,EAAhCA,MAAOoE,EAAyB,EAAzBA,QAC7BiJ,EAAWC,cAEXqV,EAAoBjV,uBACzB,YAAsB,IACfkV,EADc,EAAnBhH,cAC+BpX,GAC1BA,EAAKqe,SAASD,EAAUjT,MAAM,WAAW,IAC/CtC,EAAS,mBAAD,OAAoB7I,MAE7B,CAAC6I,IAIF,EAA2CkD,mBAAQ,WAClD,IAAMrM,EAAOD,OAAOC,KAAKE,GAAS1B,KAAI,SAAAyQ,GAAC,OAAIM,OAAON,MAC9C2P,EAA0B,GAC1BC,EAA4B,GA2BhC,OA1BA7e,EAAK+W,OAAOpQ,SAAQ,SAAAmY,GACfA,E5BhBqB,E4BiBxBD,EAAW9X,KACV,gBAAC8O,GAAA,EAAD,CAECvV,GAAE,iBAAYJ,EAAQ4e,IACtBzU,QAASoU,EACTtU,UAAU,mBAJX,UAME2U,E5BxBqB,E4BkBvB,0DAC2BA,EAD3B,YAC2C5e,EAAQ4e,MASpDF,EAAS7X,KACR,gBAAC8O,GAAA,EAAD,CAECvV,GAAE,iBAAYJ,EAAQ4e,IACtBzU,QAASoU,EACTtU,UAAU,mBAJX,UAME2U,EANF,wDACyBA,EADzB,YACyC5e,EAAQ4e,SAW7C,CAACF,EAAUC,KAChB,CAAC3e,EAASue,IA/Bb,oBAAOM,EAAP,KAAuBC,EAAvB,KAiCA,OACC,gBAACC,GAAA,EAAD,CACCC,gBAAc,EACd/U,UAAU,YACVgV,gBAAiB,CAACC,eAAe,GACjCrS,UAAW,EAJZ,UAMC,eAACsS,GAAA,EAAD,CACClV,UAAU,oBACVmV,WAAY,eAAC,KAAD,CAAiBtM,GAAI,CAACuM,SAAU,UAF7C,SAIEzjB,IAEF,eAAC0jB,GAAA,EAAD,CAAkBrV,UAAU,oBAA5B,SACC,gBAAC8M,GAAA,EAAD,CAAM9M,UAAU,yBAAhB,YACI4U,EAAerZ,QACjB,uCACC,eAAC+Z,GAAA,EAAD,CAAetV,UAAU,qDAAzB,gFAGC4U,OAGAC,EAAiBtZ,QACnB,uCACC,eAAC+Z,GAAA,EAAD,CAAetV,UAAU,qDAAzB,sFAGC6U,eCuHOU,I,OA5KM,SAAC,GAAsC,IAArC7f,EAAoC,EAApCA,QAASsO,EAA2B,EAA3BA,KAAMC,EAAqB,EAArBA,QACrC,EAA4BhB,mBAAuB,CAClD1Q,KAAM,GACNmI,OAAQ,IAFT,oBAAO8a,EAAP,KAAeC,EAAf,KAIA,EAAkCxS,oBAAS,GAA3C,oBAAOyS,EAAP,KAAmBC,EAAnB,KACA,EAA0B1S,qBAA1B,oBAAOtN,EAAP,KAAc0O,EAAd,KAEMuR,EAAoBvW,uBAGzB,YAAe,IAAbI,EAAY,EAAZA,OACMlN,EAAekN,EAAflN,KAAMoK,EAAS8C,EAAT9C,MACb8Y,EAAU,2BAAID,GAAL,mBAAcjjB,EAAOoK,OAE/B,CAAC8Y,EAAWD,IAGPnQ,EAAoBhG,uBAAY,WACjCqW,GACJzR,MACE,CAACyR,IAEEG,EAAgB3T,mBAAQ,WAC7B,IAAI4T,EAAU,GACdA,EAAQlZ,KACP,eAAC0Y,GAAA,EAAD,CAECtV,UAAU,4CAFX,+EACK,6CAMN,IAAK,IAAI4E,EAAI,EAAGA,E7BpDU,I6BoDUA,EACnCkR,EAAQlZ,KACP,gBAAC4H,GAAA,EAAD,CAECxE,UAAU,yCACVrD,OAAQiI,EAAI,GAAGG,WAHhB,UAKEH,EAAI,EALN,iFACkDA,KAQpDkR,EAAQlZ,KACP,eAAC0Y,GAAA,EAAD,CAECtV,UAAU,4CAFX,qFACK,+CAMN,IAAK,IAAI4E,EAAI,EAAGA,E7BtEY,I6BsEUA,EACrCkR,EAAQlZ,KACP,gBAAC4H,GAAA,EAAD,CAECxE,UAAU,yCACVrD,O7B5EuB,E6B4EAiI,EAAI,GAAGG,WAH/B,UAKEH,EAAI,EALN,mFACoDA,KAQtD,OAAOkR,IACL,IAEGC,EAAoB1W,uBAAY,WACrCsW,GAAY,GACZ,IAAMze,EAAkB,IAAIoM,gBACtBpN,EAA4B,CACjCR,UACAkF,KAAMH,GAAc+a,EAAO9a,QAC3BmJ,UAAW2R,EAAOjjB,MAkBnB,OAhBAU,EAAYgE,YAAYf,EAAOgB,GAC7BT,MAAK,SAAAP,GACL,IAAKA,EAGJ,OAFAmO,EAAS,6HACTsR,GAAY,GAGbA,GAAY,GACZ1R,EAAQ/N,MAERS,OAAM,SAAAzD,GACDgE,EAAgBpD,OAAOyP,SAC3BC,QAAQ7N,MAAMzC,GAEf+Q,OAEK,WACN/M,EAAgBuM,WAEf,CAAC/N,EAAS8f,IAEb,OACC,gBAAC7P,GAAA,EAAD,CACC3F,UAAU,kCACVmC,QAAS,CACRyD,MAAO,2BAER5B,KAAMA,EACNC,QAASoB,EANV,UAQC,eAAC+C,GAAA,EAAD,CACCpE,OAAQrO,EACR6S,iBAAkB,IAClBvE,QAAS,WAAWI,OAAS3L,IAC7BsH,UAAU,oCACVqI,aAAc,CAACE,SAAU,SAAUD,WAAY,UALhD,SAOC,eAACG,GAAA,EAAD,CAAOzI,UAAU,iBAAiBb,QAAQ,SAASyJ,SAAS,QAA5D,SACEjT,MAGH,eAACkQ,GAAA,EAAD,CAAa7F,UAAU,iCAAvB,mGAGA,eAAC8F,GAAA,EAAD,CACCkQ,UAAQ,EACRhW,UAAU,iCACVb,QAAQ,WACR8W,WAAS,EACTpH,QAAS,EACT7I,MAAM,iFACNtF,YAAY,kIACZnO,KAAK,OACLoK,MAAO6Y,EAAOjjB,KACdoO,SAAUiV,EACVzP,gBAAiB,CAChBnG,UAAW,eAEZkW,WAAY,CACXlW,UAAW,iBAGb,eAAC8F,GAAA,EAAD,CACCkQ,UAAQ,EACRjQ,QAAM,EACN/F,UAAU,iCACVb,QAAQ,WACR6G,MAAM,2BACNzT,KAAK,SACLoK,MAAO6Y,EAAO9a,OACdiG,SAAUiV,EACVzP,gBAAiB,CAChBnG,UAAW,eAEZ+I,WAAY,CACXoN,eACC,eAACrV,EAAA,EAAD,CAAgBC,SAAS,QAAQf,UAAU,yBAA3C,SACEwV,EAAO9a,O7B1Ka,E6B0KW,SAAM,YAIzCwb,WAAY,CACXlW,UAAW,eApBb,SAuBE6V,IAEF,eAACtP,GAAA,EAAD,CACCvG,UAAU,+BACVb,QAAQ,YACRe,QAAS6V,EAHV,SAKEL,EAAa,eAACxC,GAAA,EAAD,CAAkB/E,MAAM,YAAe,oDCjG1CiI,OAvFf,YAA6C,IAAnB1gB,EAAkB,EAAlBA,QACzB,EAAiDsN,GAChDtN,GADD,oBAAOwN,EAAP,KAAoBC,EAApB,KAAoCC,EAApC,KAGA,EAAoCH,oBAAS,GAA7C,oBAAO4N,EAAP,KAAmBC,EAAnB,KACA,EAAkC7N,oBAAS,GAA3C,oBAAOoT,EAAP,KAAkBC,EAAlB,KAEMC,EAAoBrU,mBACzB,kBAAMgB,EAAY7O,KAAI,SAAAyJ,GAAC,OAAI,eAAC,GAAD,eAAsCA,GAAbA,EAAEnM,YACtD,CAACuR,IAGIsT,EAAiBnX,uBAAY,WAClCyR,GAAc,KACZ,CAACA,IAEEzL,EAAoBhG,uBACzB,SAAAnJ,GACC,IAAKA,EAAO,OAAO4a,GAAc,GACjC,IAAIjU,EAAQqG,EAAYpG,WAAU,qBAAEnL,QAAqBuE,EAAM2N,aACzDnJ,EAASJ,GAAgBpE,EAAM0E,MACrC,IAAe,IAAXiC,EAAc,CACjB,IAAMgH,EAAYX,EAAYrG,GAC9BgH,EAAU9N,QAAQ2E,GAAUxE,EAAMC,GAClCgN,EAAe,GAAD,oBACVD,EAAY7G,MAAM,EAAGQ,IADX,CAEbgH,GAFa,aAGVX,EAAY7G,MAAMQ,MAEtByZ,GAAa,OACP,CACN,IAAMzS,EAAY,CACjBlS,MAAOuE,EAAM2N,UACb9N,QAAQ,gBAAG2E,EAASxE,EAAMC,KAE3BgN,EAAe,GAAD,oBAAKD,GAAL,CAAkBW,KAChCyS,GAAa,MAGf,CAACA,EAAcxF,EAAe3N,EAAgBD,IAG/C,OACC,uBAAKlD,UAAU,sBAAf,UACC,eAACoI,GAAA,EAAD,CACCpI,UAAU,+BACVgE,KAAMqS,EACN7N,iBAAkB,IAClBvE,QAAS,WAAWqS,GAAa,IAJlC,SAMC,eAAC7N,GAAA,EAAD,CACCzI,UAAU,sCACV4I,SAAS,UACTzJ,QAAQ,WAHT,sJAQD,eAAC,GAAD,CACCzJ,QAASA,EACTsO,KAAM6M,EACN5M,QAASoB,IAEV,eAAC,KAAD,CACCrF,UAAU,2BACVkO,KAAK,QACL/O,QAAQ,WACRgP,MAAM,UACNjO,QAASsW,EALV,SAOC,eAAC,KAAD,CAASxW,UAAU,eAEnBuW,EAAkBhb,OAChBgb,GACCnT,GACD,sBAAKpD,UAAU,gCAAf,SACC,qBAAIA,UAAU,mBAAd,qIChEQyW,I,OApBQ,WACtB,IAAMxV,EAAWC,cACXwV,EAAiBxU,mBAA6B,WACnD,IAAMd,EAAMH,EAASI,SAASC,MAAM,KACpC,GAA4B,WAAxBF,EAAIA,EAAI7F,OAAS,GACpB,OAAOob,mBAAmBvV,EAAIA,EAAI7F,OAAS,MAG1C,CAAC0F,EAASI,WACb,OACC,sBAAKrB,UAAU,wBAAf,SACE0W,EACA,eAAC,GAAD,CAAiBhhB,QAASghB,IAE1B,eAAC,GAAD,QCRWE,I,OAXC,kBACf,uBAAK5W,UAAU,gBAAf,UACC,qBAAIA,UAAU,SAAd,iGACA,oBAAGA,UAAU,OAAb,irBAIA,oBAAGA,UAAU,cAAb,iICQI6W,GAA8C,SAA9CA,EAA+CjkB,EAAOgG,GAC3D,OAAQA,EAAOyB,MACd,IAAK,SACL,IAAK,cACL,IAAK,gBACL,IAAK,WACJ,IAAMvE,EAAM8C,EAAOyB,KAAKiH,MAAM,QAAQ,GAAGiQ,cACzC,OAAO,2BAAI3e,GAAX,mBAAmBkD,EAAM8C,EAAO/F,UAEjC,IAAK,YACJ,OAAO+F,EAAO/F,QAEf,IAAK,WAWJ,OAVsB+F,EAAO/F,QAAqBiU,QACjD,SAAChJ,EAAGlK,GACH,IAAM8d,EAAWmF,EAAa/Y,EAAGlK,GACjC,OAAO,2BACHkK,GACA4T,KAGL9e,GAKH,OAAOA,GAwKOkkB,GAjKKC,sBAAW,WAAgCjM,GAAS,IAAvCuI,EAAsC,EAAtCA,QAChC,EAA0BZ,qBAAgCoE,GAAc,CACvE1gB,GAAI,EACJT,QAAS,GACTmO,UAAW,GACXjJ,KAAM,IAJP,oBAAO1E,EAAP,KAAcgJ,EAAd,KAMA,EAAsC+D,mBAAuB,IAA7D,oBAAOC,EAAP,KAAoBC,EAApB,KACA6T,8BACClM,GACA,iBAAO,CACNmM,SAAU,8BAAC,eAAU/gB,GAAX,IAAkBR,QAASQ,EAAMR,cAE5C,CAACQ,IAGF,IAAMoO,EAAiBpC,mBACtB,kBACCtM,OAAO2O,OAAOnL,IAAS/E,KAAI,SAAAqB,GAAO,OACjC,eAAC8O,GAAA,EAAD,CAAwB7H,MAAOjH,EAA/B,SACEA,GADaA,QAIjB,IAGKwhB,EAAehV,mBACpB,kBACCgB,EAAY4D,QAAsB,SAACgP,EAASjS,GAC3C,IAAIsT,EAAYtT,EAAUlS,MACxB2P,MAAM,KACNwF,QAAO,SAAChJ,EAAGsZ,GAAJ,OAAWtZ,EAAKsZ,EAAE,GAAGpQ,gBAAgB,IACxCzN,EAAO,IAAIpF,KACXkjB,EAAazhB,OAAOC,KAAKgO,EAAU9N,SAAS1B,KACjD,SAAAsgB,GACC,IAAI/Z,EAAOrB,EAAKO,cAAgBsL,OAAOuP,GACnCpb,EAAKM,YAAc,IAAGe,GAAQ,GAClC,IAAM0c,EAAO,CACZ/kB,KAAK,GAAD,OAAK4kB,EAAL,YAAkBvc,EAAKmK,WAAW1I,OAAO,IAC7CM,MAAOkH,EAAU9N,QAAQqP,OAAOuP,KAEjC,OACC,eAACnQ,GAAA,EAAD,CAEC+S,SAAU1T,EAAUlS,MACpB+O,YAAa9F,EAAKmK,WAClBpI,MAAO2a,EAAK3a,MAJb,SAME2a,EAAK/kB,MALD+kB,EAAK/kB,SAUd,OAAOujB,EAAQ7J,OAAOoL,KACpB,MACJ,CAACnU,IAGF/B,qBAAU,WACT,GAAKjL,EAAMR,QAAX,CACA,IAAMwB,EAAkB,IAAIoM,gBAC5B,IACCrQ,EAAYwC,iBAAiBS,EAAMR,QAASwB,GAAiBT,MAC5D,SAAAyM,GACMA,GACLC,EAAeD,MAGhB,MAAOhQ,GACHgE,EAAgBpD,OAAOyP,SAC3BC,QAAQ7N,MAAMzC,GAThB,QAYC,OAAO,WACNgE,EAAgBuM,aAGhB,CAACvN,EAAMR,QAASyN,IAEnB,IAAMuC,EAAqBrG,uBAG1B,WAAWmY,GAAU,IAAnB/X,EAAkB,EAAlBA,OACG7G,EAAiB,CAACyB,KAAM,GAAIxH,QAAS4M,EAAO9C,OAChD,OAAQ8C,EAAOlN,MACd,IAAK,gBACJqG,EAAOyB,KAAO,cACd,MACD,IAAK,aACJ,MAAiDmd,EAAKC,MAAlC7c,EAApB,EAAO8F,YAA6BmD,EAApC,EAA0B0T,SAC1B3e,EAAOyB,KAAO,WACdzB,EAAO/F,QAAU,CAChB,CAACwH,KAAM,gBAAiBxH,QAASgR,GACjC,CAACxJ,KAAM,SAAUxH,QAAS4M,EAAO9C,OACjC,CAACtC,KAAM,WAAYxH,QAAS+H,IAE7B,MAED,QACC,OAEFsE,EAAStG,KAEV,CAACsG,IAGF,OACC,uCACC,eAAC4G,GAAA,EAAD,CACCC,QAAM,EACNpQ,MAAO0d,IAAYnd,EAAMR,QACzBsK,UAAU,eACVb,QAAQ,WACRhJ,GAAG,gBACH5D,KAAK,gBACLyT,MAAM,0DACNC,WAAW,uOACXC,YAAa,CACZlG,UAAW,sBACXW,SAAU+E,EACV/I,MAAOzG,EAAMR,SAEdyQ,gBAAiB,CAChBnG,UAAW,sBACXoG,QAAS,iBAEVC,oBAAqB,CACpBrG,UAAW,6BAnBb,SAsBEsE,IAEF,eAACwB,GAAA,EAAD,CACCC,QAAM,EACNpQ,MAAO0d,IAAYnd,EAAMC,GACzB6J,UAAU,eACVb,QAAQ,WACRhJ,GAAG,aACH5D,KAAK,aACLyT,MAAM,wCACNC,WAAW,qNACXpB,SAAkC,IAAxBqS,EAAa3b,OACvB2K,YAAa,CACZlG,UAAW,sBACXW,SAAU+E,EACV/I,MAAoB,IAAbzG,EAAMC,GAAWD,EAAMC,GAAK,IAEpCgQ,gBAAiB,CAChBnG,UAAW,sBACXoG,QAAS,cAEVC,oBAAqB,CACpBrG,UAAW,6BApBb,SAuBEkX,U,OCEUQ,OApMf,WACC,MAA0BzU,mBAAgB,MAA1C,oBAAOtN,EAAP,KAAc0O,EAAd,KACA,EAAwBpB,mBAAS,IAAjC,oBAAO1Q,EAAP,KAAaolB,EAAb,KACA,EAA0B1U,mBAAS,IAAnC,oBAAOrO,EAAP,KAAcgjB,EAAd,KACA,EAAgC3U,mBAAS,IAAzC,oBAAOpO,EAAP,KAAiBgjB,EAAjB,KACMC,EAAW/Y,mBACXC,EAAWC,cAGXuU,EAAenU,uBACpB,SAAAE,GAAM,IAAD,EAEJ,GADAA,EAAEgM,kBACE5V,EACJ,GAAKmiB,EAASnY,QAAd,CAIA,IAAMzJ,EAAK,UAAG4hB,EAASnY,eAAZ,aAAG,EAAkBsX,WAEhC,GACE/gB,GACAN,OAAOC,KAAKK,GAAO6hB,OAAM,SAAAjiB,GAAG,QAAMI,EAAMJ,MAK1C,GAAKvD,EAIL,GAAKqC,EAIL,GAAKC,EAAL,CAIA,IAAMqC,EAAkB,IAAIoM,gBAC5BrQ,EAAY+C,OACX,CACCzD,OACAqC,QACAC,WACAqB,SAEDgB,GAECT,MAAK,SAAArB,GACAA,GAIL4iB,eAAe1iB,QAAQ,OAAQC,KAAKC,UAAUJ,IAC9C4J,EAAS,mBAAD,cAAoB9I,QAApB,IAAoBA,OAApB,EAAoBA,EAAOC,IAAM,CACxCkU,SAAS,KALThG,EAAS,YAQV1N,OAAM,SAAAzD,GACDgE,EAAgBpD,OAAOyP,UAC3Bc,EAAS,SACTb,QAAQ7N,MAAMzC,EAAI6D,kBA1BpBsN,EAAS,iBAJTA,EAAS,cAJTA,EAAS,aAJTA,EAAS,cATTA,EAAS,WAmDX,CAAC9R,EAAMqC,EAAOC,EAAUc,EAAOqJ,IAG1B4U,EAAoBvU,uBAGzB,YAAe,IAEV4Y,EAFHxY,EAAY,EAAZA,OACMlN,EAAekN,EAAflN,KAAMoK,EAAS8C,EAAT9C,MAEb,OAAQpK,GACP,IAAK,OACJ0lB,EAAiBN,EACjB,MACD,IAAK,WACJM,EAAiBL,EACjB,MACD,IAAK,gBACJK,EAAiBJ,EACjB,MACD,QACC,OAEFI,EAAetb,KAEhB,CAACgb,EAASC,EAAUC,IAIrB,OACC,uBAAK7X,UAAU,oBAAf,UACC,qBAAIA,UAAU,uBAAd,mGAEA,wBACCA,UAAU,qBACV8T,SAAUN,EACVxe,OAAO,OACPkjB,aAAa,MAJd,UAMC,eAACpS,GAAA,EAAD,CACC9F,UAAU,eACVrK,MAAiB,SAAVA,EACPwJ,QAAQ,WACRhJ,GAAG,OACH5D,KAAK,OACLoO,SAAUiT,EACVjX,MAAOpK,EACPyT,MAAM,sBACNC,WAAW,gdACX8C,WAAY,CACX/I,UAAW,sBACXkW,WAAY,CACXgC,aAAc,iBAGhB/R,gBAAiB,CAChBnG,UAAW,sBACXoG,QAAS,QAEVC,oBAAqB,CACpBrG,UAAW,+BAGb,eAAC8F,GAAA,EAAD,CACC9F,UAAU,eACVrK,MAAiB,UAAVA,EACPwJ,QAAQ,WACRhJ,GAAG,WACH5D,KAAK,WACLoO,SAAUiT,EACVjX,MAAO/H,EACPoR,MAAM,kCACNC,WACW,UAAVtQ,EACIf,EAEA,sOADA,gJAED,2XAEJmU,WAAY,CACX/I,UAAW,sBACXkW,WAAY,CACXgC,aAAc,iBAGhB/R,gBAAiB,CAChBnG,UAAW,sBACXoG,QAAS,YAEVC,oBAAqB,CACpBrG,UAAW,+BAGb,eAAC8F,GAAA,EAAD,CACC9F,UAAU,eACVrK,MAAiB,aAAVA,EACPwJ,QAAQ,WACRhJ,GAAG,gBACH5D,KAAK,gBACL8H,KAAK,WACLsG,SAAUiT,EACVjX,MAAO9H,EACPmR,MAAM,wCACNC,WACC,iSACiD,IAChD,yEAFD,yNAKD8C,WAAY,CACX/I,UAAW,sBACXkW,WAAY,CACXgC,aAAc,iBAGhB/R,gBAAiB,CAChBnG,UAAW,sBACXoG,QAAS,iBAEVC,oBAAqB,CACpBrG,UAAW,+BAGb,eAAC,GAAD,CAAaqT,QAAmB,UAAV1d,EAAmBmV,IAAKgN,IAC9C,eAACvR,GAAA,EAAD,CAAQvG,UAAU,cAAc3F,KAAK,SAArC,iIC/JW8d,I,OA1BU,SAAC,GAAkC,IAAjCxmB,EAAgC,EAAhCA,MAAOuR,EAAyB,EAAzBA,YAC3BqT,EAAoBrU,mBACzB,yBAAMgB,QAAN,IAAMA,OAAN,EAAMA,EAAa7O,KAAI,SAAAwP,GAAS,OAAI,eAAC,GAAD,eAAwBA,SAC5D,CAACX,IAGF,OACC,gBAAC4R,GAAA,EAAD,CACCC,gBAAc,EACd/U,UAAU,oBACVgV,gBAAiB,CAACC,eAAe,GACjCrS,UAAW,EAJZ,UAMC,eAACsS,GAAA,EAAD,CACClV,UAAU,4BACVmV,WAAY,eAAC,KAAD,CAAiBtM,GAAI,CAACuM,SAAU,UAF7C,SAIEzjB,IAEF,eAAC0jB,GAAA,EAAD,CAAkBrV,UAAU,4BAA5B,SACEuW,SCUU6B,OAvCf,WACC,MAA8BnV,mBAE5B,IAFF,oBAAOoV,EAAP,KAAgBC,EAAhB,KAGMrX,EAAWC,cACAjC,cAEjBkC,qBAAU,WACT,IACMtK,EADQ,IAAIsV,gBAAgBlL,EAASmL,QAChBC,IAAI,KAC3BxV,GACH5D,EAAY2D,YAAYC,GACtBJ,MAAK,SAAArC,GACLkkB,EAAWlkB,GAAQ,OAEnBuC,OAAM,SAAAzD,GACFC,OAML,CAAC8N,EAASmL,SAEb,IAAM+H,EAAkBjS,mBACvB,kBACCtM,OAAOC,KAAKwiB,GAAShkB,KAAI,SAAAqB,GAAO,OAC/B,eAAC,GAAD,CAEC/D,MAAO+D,EACPwN,YAAamV,EAAQ3iB,IAFhBA,QAKR,CAAC2iB,IAGF,OAAO,sBAAKrY,UAAU,mBAAf,SAAmCmU,K,OCqD5BoE,OA5Ef,WACC,IAAMtX,EAAWC,cACXlC,EAAWC,cACXC,EAAWT,KACjB,EAA+CE,IAAY,SAAA/L,GAAK,MAAK,CACpEkF,SAAUlF,EAAMG,YAAY+E,SAC5BC,WAAYnF,EAAMG,YAAYgF,WAC9B3C,KAAMxC,EAAMG,YAAYqC,KACxB0W,SAAUlZ,EAAMwL,SAAShB,gBAJnBtF,EAAP,EAAOA,SAAUC,EAAjB,EAAiBA,WAAY3C,EAA7B,EAA6BA,KAAM0W,EAAnC,EAAmCA,SAOnC3K,qBAAU,WACTjC,EAAS2C,EAAW1J,aACM,MAAtB8I,EAASI,SACRjM,EACH4J,EAAS,YAAa,CAACqL,SAAS,IAEhCnL,EAAS2C,EAAW9J,eAGrBmH,EAAS2C,EAAWxJ,cACM,WAAtB4I,EAASI,UAAyBjM,GACrC4J,EAAS,YAAa,CAACqL,SAAS,OAGhC,CAACpJ,EAASI,WAEbF,qBAAU,WAMT,OALAqX,SAASC,iBAAiB,WAAW,SAAAlZ,GACtB,WAAVA,EAAEzJ,KACLkJ,GAAU,MAGL,WACFwZ,SAASE,WACZF,SAASG,oBAAoB,UAAWH,SAASE,cAEjD,IAEH,IAAME,EAAuBvZ,uBAAY,WACxCH,EAAS2C,EAAW3J,gBAClB,CAACgH,IAEE2Z,EAAe3W,mBAAQ,WAC5B,IAAIlC,EAAY,CAAC,OAMjB,OALIlI,GAAUkI,EAAUpD,KAAK,eACH,cAAtBqE,EAASI,WACZrB,EAAUpD,KAAKhF,EAAUkU,GAAUyF,eAC/BxZ,GAAYmH,EAAS2C,EAAWxJ,eAE9B2H,EAAUwK,KAAK,OACpB,CAACsB,EAAUhU,EAAUmJ,EAASI,SAAUtJ,EAAYmH,IAEvD,OACC,uBAAKc,UAAW6Y,EAAhB,UACC,eAAC,GAAD,IACA,eAAC,GAAD,CACC5U,QAAS2U,EACTlR,OAAQkR,IAET,gBAAC,IAAD,WACC,eAAC,IAAD,CAAOE,KAAK,IAAIC,QAAS,eAAC,GAAD,MACzB,eAAC,IAAD,CAAOD,KAAK,UAAUC,QAAS,eAAC,GAAD,MAC/B,eAAC,IAAD,CAAOD,KAAK,SAASC,QAAS,eAAC,GAAD,MAC9B,eAAC,IAAD,CAAOD,KAAK,YAAYC,QAAS,eAAC,GAAD,MACjC,eAAC,IAAD,CAAOD,KAAK,UAAUC,QAAS,eAAC,GAAD,MAC/B,eAAC,IAAD,CAAOD,KAAK,WAAWC,QAAS,eAAC,GAAD,MAChC,eAAC,IAAD,CAAOD,KAAK,YAAYC,QAAS,eAAC,GAAD,MACjC,eAAC,IAAD,CAAOD,KAAK,UAAUC,QAAS,eAAC,GAAD,MAC/B,eAAC,IAAD,CAAOD,KAAK,IAAIC,QAAS,eAAC,GAAD,SAEzBhhB,GAAc,eAAC,GAAD,QClFlBihB,IAASC,OACR,eAAC,IAAMC,WAAP,UACC,eAAC,IAAD,CAAU7mB,MAAOA,GAAjB,SACC,eAAC,IAAD,UACC,eAAC,GAAD,UAIHmmB,SAASW,eAAe,W","file":"static/js/main.8712584c.chunk.js","sourcesContent":["import {createAction, createSlice} from \"@reduxjs/toolkit\";\nimport {RootState} from \"..\";\n\nexport enum LeftIcon {\n\tNONE = 0,\n\tMENU,\n\tBACK,\n\tCANCEL,\n}\n\nexport enum RightIcon {\n\tNONE = 0,\n\tSEARCH,\n\tTODAY,\n\tSAVE,\n}\n\nexport enum SearchDisplay {\n\tNONE = 0,\n\tFULL,\n\tICON,\n}\n\ninterface ApplicationHeaderState {\n\ttitle: string;\n\tleftIcon: LeftIcon;\n\trightIcon: RightIcon;\n\tsearchDisplay: SearchDisplay;\n\tsearchValue: string;\n\tsave: boolean;\n}\n\nexport const initialState: ApplicationHeaderState = {\n\tsearchValue: \"\",\n\tsearchDisplay: SearchDisplay.NONE,\n\tleftIcon: LeftIcon.MENU,\n\trightIcon: RightIcon.NONE,\n\ttitle: \"\",\n\tsave: false,\n};\n\nexport const actions = {\n\tsetTitle: createAction<string>(\"setTitle\"),\n\tsetSearchValue: createAction<string>(\"setSearchValue\"),\n\tsetSearchDisplay: createAction<SearchDisplay>(\"setSearchDisplay\"),\n\tsetRightIcon: createAction<RightIcon>(\"setRightIcon\"),\n\tsetLeftIcon: createAction<LeftIcon>(\"setLeftIcon\"),\n\tsetSave: createAction<boolean>(\"saveClicked\"),\n};\n\nconst store = createSlice({\n\tname: \"application/header\",\n\tinitialState,\n\treducers: {},\n\textraReducers: builder => {\n\t\tbuilder\n\t\t\t.addCase(actions.setTitle, (state, {payload}) => {\n\t\t\t\tstate.title = payload;\n\t\t\t})\n\t\t\t.addCase(actions.setSearchValue, (state, {payload}) => {\n\t\t\t\tstate.searchValue = payload;\n\t\t\t})\n\t\t\t.addCase(actions.setSearchDisplay, (state, {payload}) => {\n\t\t\t\tstate.searchDisplay = payload;\n\t\t\t})\n\t\t\t.addCase(actions.setLeftIcon, (state, {payload}) => {\n\t\t\t\tstate.leftIcon = payload;\n\t\t\t})\n\t\t\t.addCase(actions.setRightIcon, (state, {payload}) => {\n\t\t\t\tstate.rightIcon = payload;\n\t\t\t})\n\t\t\t.addCase(actions.setSave, (state, {payload}) => {\n\t\t\t\tstate.save = payload;\n\t\t\t});\n\t},\n});\n\nexport const selectAppHeader = (state: RootState) => state.application.header;\n\nexport default store.reducer;\n","import axios from \"axios\";\nimport {CoreSubject} from \"./types\";\nimport {\n\tCourse,\n\tFACULTY,\n\tIAttendTime,\n\tIAuthenticated,\n\tIGroup,\n\tISpecialty,\n\tISubject,\n\tIUser,\n\tWithID,\n} from \"./types\";\n\ninterface IResponse<T = any> {\n\terror: boolean;\n\tbody: T;\n\tmessage: string;\n}\n\ninterface ISuccessful {\n\tsuccess: boolean;\n}\n\nexport default class ScheduleAPI {\n\tprivate static HOST: string =\n\t\tprocess.env.NODE_ENV === \"development\"\n\t\t\t? \"http://192.168.0.10:8080/api\"\n\t\t\t: `${process.env.PUBLIC_URL}/api`;\n\n\tstatic CSRFCookie = () =>\n\t\taxios(`${new URL(ScheduleAPI.HOST).origin}/sanctum/csrf-cookie`);\n\n\t/**\n\t * Method for fetching group's schedule\n\t * @param groupId Group identifier\n\t */\n\tstatic fetchSchedule = async (\n\t\tgroupId: number,\n\t\tcontroller?: AbortController\n\t) => {\n\t\tconst response = await fetch(\n\t\t\t`${ScheduleAPI.HOST}/subject?group=${groupId}`,\n\t\t\t{\n\t\t\t\tsignal: controller?.signal,\n\t\t\t}\n\t\t);\n\t\tconst result: IResponse<Array<ISubject>> = await response.json();\n\t\tconst midnight = new Date(\"2000-01-01\");\n\t\treturn result.body.map(subject => ({\n\t\t\t...subject,\n\t\t\ttimes: subject.times.map(attendTime => {\n\t\t\t\tconst time = new Date(\"2000-01-01T\" + attendTime.time);\n\t\t\t\treturn {...attendTime, time: time.getTime() - midnight.getTime()};\n\t\t\t}),\n\t\t}));\n\t};\n\n\t/**\n\t * Method to authenticate user's\n\t * @param login User's login\n\t * @param password User's password\n\t */\n\tstatic authenticate = async (\n\t\tlogin: string,\n\t\tpassword: string,\n\t\tcontroller?: AbortController\n\t) => {\n\t\tawait ScheduleAPI.CSRFCookie();\n\t\tconst response = await axios.request<\n\t\t\tIResponse<{\n\t\t\t\taccess_token: string;\n\t\t\t\tuser: IUser;\n\t\t\t}>\n\t\t>({\n\t\t\turl: `${ScheduleAPI.HOST}/user/login`,\n\t\t\tmethod: \"POST\",\n\t\t\tdata: {\n\t\t\t\tlogin,\n\t\t\t\tpassword,\n\t\t\t},\n\t\t\tsignal: controller?.signal,\n\t\t});\n\t\tif (response.status !== 200) return null;\n\t\tconst {access_token, user} = response.data.body;\n\t\tlocalStorage.setItem(\"access_token\", access_token);\n\t\tlocalStorage.setItem(\"user\", JSON.stringify(user));\n\t\treturn user;\n\t};\n\n\t/**\n\t * Method for fetching specialties for selected `faculty`\n\t * @param faculty Faculty to use\n\t */\n\tstatic fetchSpecialties = async (\n\t\tfaculty: string,\n\t\tcontroller?: AbortController\n\t) => {\n\t\tconst response = await axios.request<\n\t\t\tIResponse<{\n\t\t\t\t[specialty: string]: {\n\t\t\t\t\t[courseNumber in Course]: number;\n\t\t\t\t};\n\t\t\t}>\n\t\t>({\n\t\t\turl: `${ScheduleAPI.HOST}/group/specialty?faculty=${faculty}`,\n\t\t\tsignal: controller?.signal,\n\t\t});\n\t\tconst {error, body} = response.data;\n\t\tif (error) {\n\t\t\treturn null;\n\t\t}\n\t\treturn Object.keys(body).map<ISpecialty>(key => ({\n\t\t\ttitle: key,\n\t\t\tcourses: body[key],\n\t\t}));\n\t};\n\n\t/**\n\t * Method for creating new users\n\t * @param user New user to create\n\t */\n\tstatic signUp = async (\n\t\tuser: Omit<IUser, \"id\"> & IAuthenticated,\n\t\tcontroller?: AbortController\n\t) => {\n\t\tconst response = await axios.request<IResponse<IUser>>({\n\t\t\turl: `${ScheduleAPI.HOST}/user`,\n\t\t\tsignal: controller?.signal,\n\t\t\tmethod: \"POST\",\n\t\t\tdata: {\n\t\t\t\tname: user.name,\n\t\t\t\tlogin: user.login,\n\t\t\t\tgroup_id: user.group?.id,\n\t\t\t\tpassword: user.password,\n\t\t\t},\n\t\t});\n\t\tconst {error, body} = response.data;\n\t\tif (error) {\n\t\t\treturn;\n\t\t}\n\t\treturn body;\n\t};\n\n\t/**\n\t * Method for updating user's information\n\t * @param data data to update for user with `data.id`\n\t * @returns updated user object\n\t */\n\tstatic updateUser = async (\n\t\tdata: WithID<Partial<IUser>>,\n\t\tcontroller?: AbortController\n\t): Promise<IUser | null> => {\n\t\tconst response = await axios.request<IResponse<IUser>>({\n\t\t\turl: `${ScheduleAPI.HOST}/user/group`,\n\t\t\tmethod: \"POST\",\n\t\t\tdata,\n\t\t\tsignal: controller?.signal,\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n\t\t\t},\n\t\t});\n\t\tconst {error, body} = response.data;\n\t\treturn error ? null : body;\n\t};\n\n\t/**\n\t * Method for logging out currently logged in user\n\t *\n\t * @async\n\t * @param [controller] - Abort controller to cancel fetch\n\t * @returns Boolean value representing success of operation\n\t */\n\tstatic signOut = async (controller?: AbortController): Promise<boolean> => {\n\t\treturn axios\n\t\t\t.request<IResponse<ISuccessful>>({\n\t\t\t\turl: `${ScheduleAPI.HOST}/user/logout`,\n\t\t\t\tsignal: controller?.signal,\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then(({data}) => !data.error && data.body.success)\n\t\t\t.catch(err => {\n\t\t\t\tif (process.env.NODE_ENV === \"development\") {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t};\n\n\t/**\n\t * Method for searching group by string\n\t *\n\t * @async\n\t * @param {string} searchString - string used for search\n\t * @param {AbortController} [controller] - abort controller to cancel fetch\n\t */\n\tstatic searchGroup = async (\n\t\tsearchString: string,\n\t\tcontroller?: AbortController\n\t) => {\n\t\ttry {\n\t\t\tconst response = await axios.request<\n\t\t\t\tIResponse<Partial<Record<FACULTY, ISpecialty[]>>>\n\t\t\t>({\n\t\t\t\turl: `${ScheduleAPI.HOST}/group?q=${searchString}`,\n\t\t\t\tsignal: controller?.signal,\n\t\t\t});\n\t\t\tconst {error, body} = response.data;\n\t\t\tif (error) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn body;\n\t\t} catch (err) {\n\t\t\tif (process.env.NODE_ENV === \"development\") {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n\n\t/**\n\t * Method for fetching teachers from server\n\t *\n\t * @async\n\t * @param [controller] - abort controller to cancel fetch\n\t * @returns List of teachers\n\t */\n\tstatic getTeachers = async (controller?: AbortController) => {\n\t\ttry {\n\t\t\tconst response = await axios.request<IResponse<IUser[]>>({\n\t\t\t\turl: `${ScheduleAPI.HOST}/user?type=teacher`,\n\t\t\t\tsignal: controller?.signal,\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tif (response.status !== 200) return;\n\t\t\tconst {error, message, body} = response.data;\n\t\t\treturn error ? ScheduleAPI.handleError(message) : body;\n\t\t} catch (err) {\n\t\t\treturn ScheduleAPI.handleError(err);\n\t\t}\n\t};\n\n\t/**\n\t * Method for creating new groups\n\t *\n\t * @async\n\t * @param faculty - Group's faculty\n\t * @param specialty - Group's specialty\n\t * @param course - Group's course\n\t * @param [abortController] - Abort controller to cancel fetch\n\t */\n\tstatic createGroup = async (\n\t\tgroup: Omit<IGroup, \"id\">,\n\t\tabortController?: AbortController\n\t) => {\n\t\ttry {\n\t\t\tconst response = await axios.request<IResponse<IGroup>>({\n\t\t\t\turl: `${ScheduleAPI.HOST}/group`,\n\t\t\t\tsignal: abortController?.signal,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: group,\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tif (response.status !== 200) {\n\t\t\t\treturn ScheduleAPI.handleError(response.data);\n\t\t\t}\n\t\t\treturn response.data.body;\n\t\t} catch (err) {\n\t\t\treturn ScheduleAPI.handleError(err);\n\t\t}\n\t};\n\n\t/**\n\t * Method for creating new attend time\n\t *\n\t * @async\n\t * @param subject - subject object to append time to\n\t * @param time - time to create on server\n\t * @param [group] - id of the group that attends this subject\n\t * @param [controller] - controller to abort request\n\t * @returns Returns id of newly created time. Undefined on error\n\t */\n\tstatic createAttendTime = async (\n\t\tsubject: Omit<ISubject, \"times\">,\n\t\ttime: Omit<IAttendTime, \"id\">,\n\t\tgroup?: number,\n\t\tcontroller?: AbortController\n\t) => ScheduleAPI.createSubject({...time, ...subject}, group, controller);\n\n\t/**\n\t * Method for creating new subjects\n\t *\n\t * @async\n\t * @param subject - subject to create\n\t * @param [group] - id of the group that attends this subject\n\t * @param [controller] - controller to abort request\n\t * @returns Id of new subject object or `undefined` on error\n\t */\n\tstatic createSubject = async (\n\t\tsubject: Omit<CoreSubject, \"id\">,\n\t\tgroup?: number,\n\t\tcontroller?: AbortController\n\t) => {\n\t\tconst time = new Date(subject.time);\n\t\tconst response = await axios.request<IResponse<CoreSubject>>({\n\t\t\turl: `${ScheduleAPI.HOST}/subject`,\n\t\t\tsignal: controller?.signal,\n\t\t\tmethod: \"POST\",\n\t\t\tdata: {\n\t\t\t\t...subject,\n\t\t\t\tteacher: subject.teacher.id,\n\t\t\t\ttime: time.toLocaleTimeString(\"ru\"),\n\t\t\t\tgroup,\n\t\t\t},\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n\t\t\t},\n\t\t});\n\t\tif (response.status !== 200) {\n\t\t\treturn ScheduleAPI.handleError(response.data);\n\t\t}\n\t\treturn response.data.body;\n\t};\n\n\t/**\n\t * Method for updating subject\n\t *\n\t * @async\n\t * @param subjectProperties - object which contains properties that needs to be updated on subject\n\t * @param [controller] - controller to abort request\n\t */\n\tstatic updateSubject = async (\n\t\tsubjectProperties: WithID<Partial<CoreSubject>>,\n\t\tcontroller?: AbortController\n\t) => {\n\t\tconst response = await axios.request<IResponse<CoreSubject>>({\n\t\t\turl: `${ScheduleAPI.HOST}/subject/update`,\n\t\t\tsignal: controller?.signal,\n\t\t\tmethod: \"POST\",\n\t\t\tdata: {\n\t\t\t\t...subjectProperties,\n\t\t\t\tteacher: subjectProperties.teacher?.id,\n\t\t\t\ttime:\n\t\t\t\t\tsubjectProperties.time &&\n\t\t\t\t\tnew Date(subjectProperties.time).toLocaleTimeString(\"ru\"),\n\t\t\t},\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n\t\t\t},\n\t\t});\n\t\tif (response.status !== 200) {\n\t\t\treturn ScheduleAPI.handleError(response.data);\n\t\t}\n\t\treturn response.data.body;\n\t};\n\n\t/**\n\t * Method for deleting subjects from schedule\n\t * @param subjectId ID of subject to delete\n\t * @param controller controller to abort fetch\n\t */\n\tstatic deleteSubject = async (\n\t\tsubjectId: number,\n\t\tcontroller?: AbortController\n\t) => {\n\t\tconst response = await axios.request<IResponse<ISuccessful>>({\n\t\t\turl: `${ScheduleAPI.HOST}/subject/delete?id=${subjectId}`,\n\t\t\tsignal: controller?.signal,\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n\t\t\t},\n\t\t});\n\t\treturn response.data.body.success;\n\t};\n\n\tprivate static handleError(err: any) {\n\t\tif (process.env.NODE_ENV === \"development\") {\n\t\t\tconsole.error(err);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n","import {createAction, createSlice} from \"@reduxjs/toolkit\";\nimport {RootState} from \"..\";\nimport ScheduleAPI from \"../../API\";\nimport {IGroup, IUser} from \"../../types\";\nimport headerReducer, {\n\tactions as headerActions,\n\tinitialState as headerInitState,\n\tSearchDisplay,\n} from \"./header\";\n\ninterface ApplicationState {\n\tshowMenu: boolean;\n\tshowFooter: boolean;\n\theader: ReturnType<typeof headerReducer>;\n\tuser?: IUser;\n}\n\nconst storageUser = localStorage.getItem(\"user\");\nif (storageUser) {\n\tScheduleAPI.CSRFCookie();\n}\nconst initialState: ApplicationState = {\n\tshowMenu: false,\n\tshowFooter: true,\n\theader: headerInitState,\n\tuser: storageUser && JSON.parse(storageUser),\n};\n\nexport const actions = {\n\t// Menu actions\n\ttoggleMenu: createAction(\"toggleMenu\"),\n\tcloseMenu: createAction(\"closeMenu\"),\n\t// Footer actions\n\tshowFooter: createAction(\"showFooter\"),\n\ttoggleFooter: createAction(\"toggleFooter\"),\n\thideFooter: createAction(\"hideFooter\"),\n\t// User actions\n\tsetUser: createAction<IUser>(\"setUser\"),\n\tsetUserGroup: createAction<IGroup>(\"setUserGroup\"),\n\tsignOut: createAction(\"signOut\"),\n};\n\nconst store = createSlice({\n\tname: \"application\",\n\tinitialState,\n\treducers: {},\n\textraReducers: builder => {\n\t\tbuilder\n\t\t\t.addCase(actions.toggleMenu, state => {\n\t\t\t\tstate.showMenu = !state.showMenu;\n\t\t\t\tif (!state.showMenu) {\n\t\t\t\t\tstate.header.searchDisplay = SearchDisplay.NONE;\n\t\t\t\t} else {\n\t\t\t\t\tstate.header.searchDisplay = state.header.searchValue\n\t\t\t\t\t\t? SearchDisplay.FULL\n\t\t\t\t\t\t: SearchDisplay.ICON;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.addCase(actions.closeMenu, state => {\n\t\t\t\tstate.showMenu = false;\n\t\t\t\tstate.header.searchDisplay = SearchDisplay.NONE;\n\t\t\t})\n\t\t\t.addCase(actions.toggleFooter, state => {\n\t\t\t\tstate.showFooter = !state.showFooter;\n\t\t\t})\n\t\t\t.addCase(actions.showFooter, state => {\n\t\t\t\tstate.showFooter = true;\n\t\t\t})\n\t\t\t.addCase(actions.hideFooter, state => {\n\t\t\t\tstate.showFooter = false;\n\t\t\t})\n\t\t\t.addCase(actions.setUser, (state, {payload}) => {\n\t\t\t\tstate.user = payload;\n\t\t\t})\n\t\t\t.addCase(actions.setUserGroup, (state, {payload}) => {\n\t\t\t\tif (state.user) {\n\t\t\t\t\tstate.user.group = payload;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.addCase(actions.signOut, state => {\n\t\t\t\tstate.user = undefined;\n\t\t\t})\n\t\t\t.addMatcher(\n\t\t\t\taction => {\n\t\t\t\t\tconst actionNames = Object.keys(headerActions) as Array<\n\t\t\t\t\t\tkeyof typeof headerActions\n\t\t\t\t\t>;\n\t\t\t\t\treturn actionNames.some(key => headerActions[key].match(action));\n\t\t\t\t},\n\t\t\t\t(state, action) => {\n\t\t\t\t\tstate.header = headerReducer(state.header, action);\n\t\t\t\t}\n\t\t\t);\n\t},\n});\n\nexport const selectApplication = (store: RootState) => store.application;\nexport const selectUser = (store: RootState) => store.application.user;\n\nexport default store.reducer;\n","export enum WEEK_TYPE {\n\tGREEN = 1,\n\tWHITE = 0,\n}\n\nexport enum WEEKDAY {\n\tMONDAY = 1,\n\tTUESDAY = 2,\n\tWEDNESDAY = 3,\n\tTHURSDAY = 4,\n\tFRIDAY = 5,\n\tSATURDAY = 6,\n\tSUNDAY = 7,\n}\n\nexport const BACHELOR_MAX = 4;\nexport const MAGISTRACY_MAX = 2;\nexport type Course = 1 | 2 | 3 | 4 | 5 | 6;\n\nexport interface ISpecialty {\n\ttitle: string;\n\tcourses: {\n\t\t[courseNumber in Course]?: number;\n\t};\n}\n\nexport enum SUBJECT_TYPE {\n\tЛЕКЦИЯ = 0,\n\tПРАКТИКА = 1,\n\tЛАБОРАТОРНАЯ = 2,\n}\n\nexport interface IAttendTime {\n\tid: number;\n\tweekType: WEEK_TYPE;\n\tweekday: WEEKDAY;\n\ttime: number;\n\taudience: string;\n}\n\nexport interface ISubject {\n\ttitle: string;\n\ttype: SUBJECT_TYPE;\n\tteacher: IUser;\n\ttimes: IAttendTime[];\n}\n\nexport type CoreSubject = Omit<ISubject, \"times\"> & IAttendTime;\n\nexport enum UserType {\n\tSTUDENT = 0,\n\tTEACHER = 1,\n\tADMIN = 2,\n}\n\nexport interface IGroup {\n\tid: number;\n\tfaculty: FACULTY;\n\tspecialty: string;\n\tyear: number;\n}\n\nexport interface IUser {\n\tid: number;\n\tname: string;\n\tlogin: string;\n\ttype?: UserType;\n\tgroup?: IGroup;\n}\n\nexport interface IAuthenticated {\n\tpassword: string;\n}\n\nexport enum FACULTY {\n\tФАИ = \"ФАИ\",\n\tИСФ = \"ИСФ\",\n\tФГСНиП = \"ФГСНиП\",\n\tИМ = \"ИМ\",\n\tЭФ = \"ЭФ\",\n\tМИ = \"МИ\",\n\tФТФ = \"ФТФ\",\n}\n\nexport type WithID<T extends any, V extends number | string = number> = T & {\n\tid: V;\n};\n","import {Course, SUBJECT_TYPE, WEEK_TYPE} from \"./types\";\n\n/**\n * Returns string representation of a weekday\n *\n * @param weekday - weekday to pretty-print\n * @returns String representation of a weekday\n */\nexport function GetWeekdayName(weekday: number) {\n\tconst monday = \"2021-11-22\";\n\tlet date = new Date(monday);\n\tdate.setDate(date.getDate() + weekday - 1);\n\tlet locale = \"ru\";\n\t// if (navigator.languages.length) locale = navigator.languages[0];\n\treturn date.toLocaleDateString(locale, {weekday: \"long\"});\n}\n\n/**\n * Returns week type for provided date (or today)\n * @param {number|Date?} date Date to calculate week type\n * @returns {WEEK_TYPE} Type of week for provided date (or today)\n */\nexport function GetWeekType(date?: number | Date): WEEK_TYPE {\n\tif (typeof date === \"number\") date = new Date(date);\n\tif (!date) date = new Date();\n\tlet firstWeek;\n\tif (date.getMonth() >= 8) {\n\t\tfirstWeek = new Date(date.getFullYear() + \"-09-01\");\n\t} else {\n\t\tfirstWeek = new Date(`${date.getFullYear() - 1}-09-01`);\n\t}\n\n\tif (firstWeek.getDay() !== 1) {\n\t\tfirstWeek.setDate(firstWeek.getDate() - (firstWeek.getDay() - 1));\n\t}\n\tlet weeksPassed = Math.floor(\n\t\t(date.getTime() - firstWeek.getTime()) / 604800000\n\t);\n\treturn weeksPassed % 2 ? WEEK_TYPE.GREEN : WEEK_TYPE.WHITE;\n}\n\n/**\n * Returns string representation of `SUBJECT_TYPE`\n *\n * @param {SUBJECT_TYPE} type - type of subject\n * @returns {string} Localized string for `type`\n */\nexport function GetSubjectTypeAsString(type: SUBJECT_TYPE): string {\n\tswitch (type) {\n\t\tcase 0: {\n\t\t\treturn \"Лекция\";\n\t\t}\n\t\tcase 1: {\n\t\t\treturn \"Практика\";\n\t\t}\n\t\tcase 2: {\n\t\t\treturn \"Лабораторная\";\n\t\t}\n\t\tdefault:\n\t\t\treturn \"\";\n\t}\n}\n\n/**\n * Calculates group's course from year\n * @param groupYear Group's year\n * @returns Group's course\n */\nexport function calculateCourse(groupYear: number): Course {\n\tconst date = new Date();\n\tlet number = date.getFullYear() - groupYear;\n\tif (date.getMonth() > 9) {\n\t\tnumber += 1;\n\t}\n\treturn number as Course;\n}\n\n/**\n * Calculates group's year from their course\n *\n * @param {Course} course - Course number of a group\n * @returns {number} Year of group\n */\nexport function calculateYear(course: Course): number {\n\tconst today = new Date();\n\tlet year = today.getFullYear() - course;\n\tif (today.getMonth() > 9) {\n\t\tyear += 1;\n\t}\n\treturn year;\n}\n\n/**\n * Pretty printing of subject's start and end time\n * @param time Start time of subject\n */\nexport function renderTime(time: number = Date.now()) {\n\tconst endTime = new Date(time);\n\tendTime.setHours(endTime.getHours() + 1);\n\tendTime.setMinutes(endTime.getMinutes() + 30);\n\tlet locale = \"ru\";\n\tif (navigator.languages.length > 1) {\n\t\tlocale = navigator.languages[1];\n\t}\n\treturn `${new Date(time).toLocaleTimeString(locale, {\n\t\thour: \"2-digit\",\n\t\tminute: \"2-digit\",\n\t})} - ${endTime.toLocaleTimeString(locale, {\n\t\thour: \"2-digit\",\n\t\tminute: \"2-digit\",\n\t})}`;\n}\n\nexport function hasOwnProperty<X extends {}, Y extends PropertyKey>(\n\tobj: X,\n\tprop: Y\n): obj is X & Record<Y, unknown> {\n\treturn obj.hasOwnProperty(prop);\n}\n","import {createAction, createSlice} from \"@reduxjs/toolkit\";\nimport {hasOwnProperty} from \"../../Helpers\";\nimport {\n\tCoreSubject,\n\tIAttendTime,\n\tISubject,\n\tSUBJECT_TYPE,\n\tWithID,\n} from \"../../types\";\n\ninterface IAttendTimePayload {\n\tid: number;\n\tproperty: keyof Omit<IAttendTime, \"id\">;\n\tvalue: IAttendTime[keyof Omit<IAttendTime, \"id\">];\n}\n\ntype SubjectPayload = {\n\tproperty: keyof Omit<ISubject, \"times\">;\n\tvalue: ISubject[keyof Omit<ISubject, \"times\">];\n};\n\nexport type SubjectStateAttendTime = IAttendTime & {isCreated?: boolean};\n\nexport type SubjectState = Omit<ISubject, \"times\"> & {\n\ttimes: SubjectStateAttendTime[];\n};\n\nexport const initialState: SubjectState = {\n\ttype: SUBJECT_TYPE.ЛЕКЦИЯ,\n\ttimes: [],\n\ttitle: \"\",\n\tteacher: {id: 0, name: \"\", login: \"\"},\n};\n\ntype addAttendTimePayload =\n\t| {isCreated: true; time: Omit<IAttendTime, \"id\">}\n\t| {isCreated: false; time: IAttendTime};\n\nexport enum ACTION_TYPES {\n\tupdate = \"schedule/subject/update\",\n\tupdateProperty = \"schedule/subject/updateProperty\",\n\taddAttendTime = \"schedule/subject/addAttendTime\",\n\tdeleteAttendTime = \"schedule/subject/deleteAttendTime\",\n\tupdateAttendTime = \"schedule/subject/updateAttendTime\",\n\tupdateAttendTimeProperty = \"schedule/subject/updateAttendTimeProperty\",\n}\n\nexport const actions = {\n\tupdate: createAction<WithID<Partial<CoreSubject>>, ACTION_TYPES.update>(\n\t\tACTION_TYPES.update\n\t),\n\tupdateProperty: createAction<SubjectPayload, ACTION_TYPES.updateProperty>(\n\t\tACTION_TYPES.updateProperty\n\t),\n\t// Attend time actions\n\taddAttendTime: createAction<addAttendTimePayload, ACTION_TYPES.addAttendTime>(\n\t\tACTION_TYPES.addAttendTime\n\t),\n\tdeleteAttendTime: createAction<number, ACTION_TYPES.deleteAttendTime>(\n\t\tACTION_TYPES.deleteAttendTime\n\t),\n\tupdateAttendTimeProperty: createAction<\n\t\tIAttendTimePayload,\n\t\tACTION_TYPES.updateAttendTimeProperty\n\t>(ACTION_TYPES.updateAttendTimeProperty),\n\tupdateAttendTime: createAction<\n\t\tWithID<Partial<IAttendTime>>,\n\t\tACTION_TYPES.updateAttendTime\n\t>(ACTION_TYPES.updateAttendTime),\n};\n\nexport const slice = createSlice({\n\tname: \"schedule/subject\",\n\tinitialState,\n\treducers: {},\n\textraReducers: builder => {\n\t\tbuilder\n\t\t\t.addCase(actions.update, (state, {payload}) => {\n\t\t\t\tconst {id, ...data} = payload;\n\t\t\t\tconst time = state.times.find(t => t.id === id);\n\t\t\t\t// Iterate over all of updated properties\n\t\t\t\t(Object.keys(data) as Array<keyof typeof data>).forEach(key => {\n\t\t\t\t\tif (typeof data[key] === \"undefined\") return;\n\t\t\t\t\t// If state property was change - update it\n\t\t\t\t\tif (hasOwnProperty(state, key)) {\n\t\t\t\t\t\t(state[key] as any) = data[key];\n\t\t\t\t\t}\n\t\t\t\t\t// If attend time property was ask\n\t\t\t\t\telse if (time && hasOwnProperty(time, key)) {\n\t\t\t\t\t\t(time[key] as any) = data[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// If attend time was created by user - untag it\n\t\t\t\tif (time?.isCreated) time.isCreated = undefined;\n\t\t\t})\n\t\t\t.addCase(actions.updateProperty, (state, {payload}) => {\n\t\t\t\tconst {property, value} = payload;\n\t\t\t\t(state[property] as ISubject[typeof property]) = value;\n\t\t\t})\n\t\t\t.addCase(actions.addAttendTime, (state, {payload}) => {\n\t\t\t\tconst {isCreated, time} = payload;\n\t\t\t\tconst id = isCreated ? Date.now() : (time as IAttendTime).id;\n\t\t\t\tstate.times.push({...time, id, isCreated});\n\t\t\t})\n\t\t\t.addCase(actions.deleteAttendTime, (state, {payload}) => {\n\t\t\t\tconst index = state.times.findIndex(t => t.id === payload);\n\t\t\t\tstate.times.splice(index, 1);\n\t\t\t})\n\t\t\t.addCase(actions.updateAttendTimeProperty, (state, {payload}) => {\n\t\t\t\tconst {id, property, value} = payload;\n\t\t\t\tconst index = state.times.findIndex(t => t.id === id);\n\t\t\t\t(state.times[index][property] as IAttendTime[typeof property]) = value;\n\t\t\t})\n\t\t\t.addCase(actions.updateAttendTime, (state, {payload}) => {\n\t\t\t\tconst {id, ...time} = payload;\n\t\t\t\tconst index = state.times.findIndex(t => t.id === id);\n\t\t\t\tstate.times[index] = {...state.times[index], ...time};\n\t\t\t});\n\t},\n});\n\nexport default slice.reducer;\n","import {createAction, createSlice} from \"@reduxjs/toolkit\";\nimport {RootState} from \"..\";\nimport {GetWeekType} from \"../../Helpers\";\nimport subjectReducer, {\n\tactions as subjectActions,\n\tACTION_TYPES as SUBJECT_ACTION_TYPES,\n} from \"./subject\";\nimport {ISubject, SUBJECT_TYPE, WEEK_TYPE, WEEKDAY} from \"../../types\";\n\ntype SubjectIndex = Omit<ISubject, \"times\">;\n\ntype ForwardedAction = SubjectIndex & {\n\taction: ReturnType<typeof subjectActions[keyof typeof subjectActions]>;\n};\n\nexport type EditMode = \"create\" | \"edit\" | undefined;\n\ninterface SchedulePageState {\n\tcurrentGroup: number;\n\tsubjects: ISubject[];\n\tcurrentDay: WEEKDAY;\n\tcurrentWeek: WEEK_TYPE;\n\teditMode: EditMode;\n}\n\nconst today = new Date();\n\nconst initialState: SchedulePageState = {\n\tcurrentGroup: 0,\n\teditMode: undefined,\n\tsubjects: [],\n\tcurrentDay: today.getDay() === 0 ? 7 : today.getDay(),\n\tcurrentWeek: GetWeekType(today),\n};\n\nexport const actions = {\n\t// View actions\n\tsetCurrentGroup: createAction<number>(\"setCurrentGroup\"),\n\tsetWeekday: createAction<WEEKDAY>(\"setWeekday\"),\n\tsetWeekType: createAction<WEEK_TYPE>(\"setWeekType\"),\n\ttoggleWeekType: createAction(\"toggleWeekType\"),\n\t// Editing actions\n\ttoggleEditing: createAction<\"create\" | \"edit\" | undefined>(\"toggleEditing\"),\n\t// Schedule actions\n\tsetSchedule: createAction<ISubject[]>(\"setSchedule\"),\n\taddSubject: createAction<ISubject>(\"addSubject\"),\n\tdeleteSubject: createAction<SubjectIndex>(\"deleteSubject\"),\n\t// Forwarded actions\n\tupdateSubject: createAction<ForwardedAction>(\"schedule/updateSubject\"),\n};\n\n/**\n *\tHelper that creates callback for array `find` method to find subject\n *\t@param teacherId - The identifier of teacher\n *\t@param type - Subject's type\n *\t@param title - Subject's title\n *\t@returns Callback for `find` method of array\n */\nconst findSubjectCallback =\n\t(teacherId: number, type: SUBJECT_TYPE, title: string) => (s: ISubject) =>\n\t\ts.teacher.id === teacherId && s.type === type && s.title === title;\n\n/**\n * Reducer to perform action on single subject via `subjectReducer`\n *\n * @param state - Main state of `SchedulePage`\n * @param action - Action to be forwarded\n */\nconst forwardSubjectAction = <T extends {payload: ForwardedAction}>(\n\t{subjects}: SchedulePageState,\n\t{payload}: T\n) => {\n\tconst {title, type, teacher, action} = payload;\n\tlet index = subjects.findIndex(findSubjectCallback(teacher.id, type, title));\n\tif (index === -1) {\n\t\tif (action.type !== SUBJECT_ACTION_TYPES.addAttendTime) return;\n\t\tsubjects.push({\n\t\t\ttitle,\n\t\t\ttype,\n\t\t\tteacher,\n\t\t\ttimes: [\n\t\t\t\taction.payload.isCreated\n\t\t\t\t\t? {id: Date.now(), ...action.payload.time}\n\t\t\t\t\t: action.payload.time,\n\t\t\t],\n\t\t});\n\t\treturn;\n\t}\n\tsubjects[index] = subjectReducer(subjects[index], action);\n};\n\nconst scheduleSlice = createSlice({\n\tname: \"schedule\",\n\tinitialState,\n\treducers: {},\n\textraReducers: builder => {\n\t\tbuilder\n\t\t\t// View actions\n\t\t\t.addCase(actions.setCurrentGroup, (state, {payload}) => {\n\t\t\t\tstate.currentGroup = payload;\n\t\t\t})\n\t\t\t.addCase(actions.setWeekday, (state, {payload}) => {\n\t\t\t\tstate.currentDay = payload;\n\t\t\t})\n\t\t\t.addCase(actions.setWeekType, (state, {payload}) => {\n\t\t\t\tstate.currentWeek = payload;\n\t\t\t})\n\t\t\t.addCase(actions.toggleWeekType, state => {\n\t\t\t\tstate.currentWeek =\n\t\t\t\t\tstate.currentWeek === WEEK_TYPE.WHITE\n\t\t\t\t\t\t? WEEK_TYPE.GREEN\n\t\t\t\t\t\t: WEEK_TYPE.WHITE;\n\t\t\t})\n\t\t\t// Editing actions\n\t\t\t.addCase(actions.toggleEditing, (state, {payload}) => {\n\t\t\t\tstate.editMode = payload;\n\t\t\t})\n\t\t\t// Schedule actions\n\t\t\t.addCase(actions.setSchedule, (state, {payload}) => {\n\t\t\t\tstate.subjects = payload;\n\t\t\t})\n\t\t\t.addCase(actions.addSubject, ({subjects}, {payload}) => {\n\t\t\t\tsubjects.push(payload);\n\t\t\t})\n\t\t\t.addCase(actions.deleteSubject, ({subjects}, {payload}) => {\n\t\t\t\tconst index = subjects.findIndex(\n\t\t\t\t\tfindSubjectCallback(payload.teacher.id, payload.type, payload.title)\n\t\t\t\t);\n\t\t\t\tif (index === -1) return;\n\t\t\t\tsubjects.splice(index, 1);\n\t\t\t})\n\t\t\t.addCase(actions.updateSubject, forwardSubjectAction);\n\t},\n});\n\nexport const selectSchedule = (state: RootState) => state.schedule;\n\nexport default scheduleSlice.reducer;\n","import {\n\tTypedUseSelectorHook,\n\tuseDispatch as reduxUseDispatch,\n\tuseSelector as reduxUseSelector,\n} from \"react-redux\";\nimport {configureStore} from \"@reduxjs/toolkit\";\nimport applicationReducer from \"./app\";\nimport scheduleReducer from \"./schedule\";\n\nconst store = configureStore({\n\treducer: {\n\t\tapplication: applicationReducer,\n\t\tschedule: scheduleReducer,\n\t},\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n\nexport const useDispatch = () => reduxUseDispatch<AppDispatch>();\nexport const useSelector: TypedUseSelectorHook<RootState> = reduxUseSelector;\n\nexport default store;\n","import React, {useCallback, useRef} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport IconWrapper from \"@mui/material/Icon\";\nimport ArrowRightIcon from \"@mui/icons-material/ArrowForward\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Input from \"@mui/material/Input\";\nimport Collapse from \"@mui/material/Collapse\";\nimport {actions as headerActions, SearchDisplay} from \"../../store/app/header\";\nimport {useDispatch, useSelector} from \"../../store\";\n\nconst SearchInput = () => {\n\tconst searchInputRef = useRef<HTMLInputElement>(null);\n\tconst navigate = useNavigate();\n\tconst dispatch = useDispatch();\n\tconst {variant, value} = useSelector(state => ({\n\t\tvariant: state.application.header.searchDisplay,\n\t\tvalue: state.application.header.searchValue,\n\t}));\n\n\t//#region ACTION CREATORS\n\tconst setSearchDisplayType = useCallback(\n\t\t(type: SearchDisplay) => {\n\t\t\tdispatch(headerActions.setSearchDisplay(type));\n\t\t},\n\t\t[dispatch]\n\t);\n\n\tconst setSearchValue = useCallback(\n\t\t(value: string) => {\n\t\t\tdispatch(headerActions.setSearchValue(value));\n\t\t},\n\t\t[dispatch]\n\t);\n\t//#endregion\n\n\t//#region CALLBACKS\n\tconst handleEnterPress = useCallback(\n\t\te => {\n\t\t\tif (e.key && e.key !== \"Enter\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnavigate(`/search?q=${value}`);\n\t\t},\n\t\t[value]\n\t);\n\n\tconst handleSearchValueChanged = useCallback<\n\t\tReact.ChangeEventHandler<HTMLInputElement>\n\t>(\n\t\t({target}) => {\n\t\t\tsetSearchValue(target.value);\n\t\t},\n\t\t[setSearchValue]\n\t);\n\n\tconst handleSearchIconClick = useCallback(() => {\n\t\tif (searchInputRef.current) {\n\t\t\tsearchInputRef.current.focus();\n\t\t}\n\t\tsetSearchDisplayType(SearchDisplay.FULL);\n\t}, [setSearchDisplayType]);\n\n\tconst handleSearchInputBlur = useCallback(\n\t\te => {\n\t\t\tif (!e.target.value) {\n\t\t\t\tsetSearchDisplayType(SearchDisplay.ICON);\n\t\t\t}\n\t\t},\n\t\t[setSearchDisplayType]\n\t);\n\n\tconst handleCollapseEntered = useCallback(() => {\n\t\tsearchInputRef.current?.focus();\n\t}, []);\n\t//#endregion\n\n\treturn (\n\t\t<FormControl\n\t\t\tclassName=\"page-header__search-input-wrapper\"\n\t\t\tvariant=\"standard\"\n\t\t>\n\t\t\t<IconWrapper className=\"page-header__search-input-search-wrapper\">\n\t\t\t\t<SearchIcon\n\t\t\t\t\tclassName=\"page-header__search-input-search\"\n\t\t\t\t\tonClick={handleSearchIconClick}\n\t\t\t\t/>\n\t\t\t</IconWrapper>\n\t\t\t<Collapse\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tin={variant === SearchDisplay.FULL}\n\t\t\t\tclassName=\"page-header__search-input-collapse\"\n\t\t\t\tonEntered={handleCollapseEntered}\n\t\t\t>\n\t\t\t\t<Input\n\t\t\t\t\tinputRef={searchInputRef}\n\t\t\t\t\tclassName=\"page-header__search-input\"\n\t\t\t\t\tonBlur={handleSearchInputBlur}\n\t\t\t\t\tplaceholder=\"Введите название группы\"\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={handleSearchValueChanged}\n\t\t\t\t\tonKeyPress={handleEnterPress}\n\t\t\t\t\tendAdornment={\n\t\t\t\t\t\t<InputAdornment\n\t\t\t\t\t\t\tposition=\"end\"\n\t\t\t\t\t\t\tclassName=\"page-header__search-input-enter\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ArrowRightIcon onClick={handleEnterPress} />\n\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</Collapse>\n\t\t</FormControl>\n\t);\n};\n\nexport default SearchInput;\n","import React, {useCallback, useEffect, useMemo} from \"react\";\nimport {AnyAction} from \"@reduxjs/toolkit\";\nimport {useLocation, useNavigate} from \"react-router\";\nimport AppBar from \"@mui/material/AppBar\";\nimport Icon from \"@mui/material/Icon\";\nimport BackIcon from \"@mui/icons-material/NavigateBefore\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport CancelIcon from \"@mui/icons-material/Close\";\nimport SaveIcon from \"@mui/icons-material/Check\";\nimport CalendarTodayIcon from \"@mui/icons-material/CalendarToday\";\nimport useScrollTrigger from \"@mui/material/useScrollTrigger\";\nimport SearchInput from \"./SearchInput\";\nimport {\n\tactions as headerActions,\n\tLeftIcon,\n\tRightIcon,\n\tSearchDisplay,\n\tselectAppHeader,\n} from \"../../store/app/header\";\nimport {actions as scheduleActions} from \"../../store/schedule\";\nimport {actions as appActions} from \"../../store/app\";\nimport {useDispatch, useSelector} from \"../../store\";\nimport {GetWeekType} from \"../../Helpers\";\n\nimport \"../../styles/PageHeader.scss\";\n\nfunction PageHeader() {\n\tconst {title, leftIcon, rightIcon, searchValue, searchDisplay} =\n\t\tuseSelector(selectAppHeader);\n\tconst dispatch = useDispatch();\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tlet actions: AnyAction[] = [];\n\t\tconst uri = location.pathname.split(\"/\");\n\t\t// Matches root path\n\t\tif (uri.length === 1) {\n\t\t\tactions.push(\n\t\t\t\theaderActions.setSearchDisplay(\n\t\t\t\t\tsearchValue ? SearchDisplay.FULL : SearchDisplay.ICON\n\t\t\t\t)\n\t\t\t);\n\t\t} else {\n\t\t\tswitch (uri[1]) {\n\t\t\t\tcase \"groups\": {\n\t\t\t\t\tif (uri[2]) {\n\t\t\t\t\t\tactions.push(\n\t\t\t\t\t\t\theaderActions.setLeftIcon(LeftIcon.BACK),\n\t\t\t\t\t\t\theaderActions.setTitle(\"\"),\n\t\t\t\t\t\t\theaderActions.setRightIcon(RightIcon.NONE)\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactions.push(\n\t\t\t\t\t\t\theaderActions.setLeftIcon(LeftIcon.MENU),\n\t\t\t\t\t\t\theaderActions.setTitle(\"\"),\n\t\t\t\t\t\t\theaderActions.setRightIcon(RightIcon.NONE)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"schedule\": {\n\t\t\t\t\tactions.push(\n\t\t\t\t\t\theaderActions.setLeftIcon(LeftIcon.MENU),\n\t\t\t\t\t\theaderActions.setTitle(\"\"),\n\t\t\t\t\t\theaderActions.setRightIcon(RightIcon.TODAY)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"subject\": {\n\t\t\t\t\tactions.push(\n\t\t\t\t\t\theaderActions.setLeftIcon(LeftIcon.CANCEL),\n\t\t\t\t\t\theaderActions.setTitle(\"Редактирование\"),\n\t\t\t\t\t\theaderActions.setRightIcon(RightIcon.SAVE)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"create\": {\n\t\t\t\t\tactions.push(\n\t\t\t\t\t\theaderActions.setLeftIcon(LeftIcon.CANCEL),\n\t\t\t\t\t\theaderActions.setTitle(\"Создание\"),\n\t\t\t\t\t\theaderActions.setRightIcon(RightIcon.SAVE)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tactions.push(\n\t\t\t\t\t\theaderActions.setSearchDisplay(SearchDisplay.NONE),\n\t\t\t\t\t\theaderActions.setTitle(\"\"),\n\t\t\t\t\t\theaderActions.setLeftIcon(LeftIcon.MENU),\n\t\t\t\t\t\theaderActions.setRightIcon(RightIcon.NONE)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tactions.forEach(a => dispatch(a));\n\t}, [location.pathname, dispatch]); // eslint-disable-line\n\n\tconst onSaveClick = useCallback(() => {\n\t\tdispatch(headerActions.setSave(true));\n\t}, [dispatch]);\n\n\tconst onMenuClick = useCallback(() => {\n\t\tdispatch(appActions.toggleMenu());\n\t}, [dispatch]);\n\n\tconst onTodayClick = useCallback(() => {\n\t\tlet today = new Date();\n\t\tdispatch(scheduleActions.setWeekday(today.getDay()));\n\t\tdispatch(scheduleActions.setWeekType(GetWeekType(today)));\n\t}, [dispatch]);\n\n\tconst onBackClick = useCallback(() => {\n\t\tnavigate(-1);\n\t}, [navigate]);\n\n\tconst leftSideIcon = useMemo(() => {\n\t\tswitch (leftIcon) {\n\t\t\tcase LeftIcon.MENU: {\n\t\t\t\treturn (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tonClick={onMenuClick}\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\troot: \"page-header__icon left-icon menu-icon\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</Icon>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase LeftIcon.BACK: {\n\t\t\t\treturn (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tonClick={onBackClick}\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\troot: \"page-header__icon left-icon back-icon\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<BackIcon />\n\t\t\t\t\t</Icon>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase LeftIcon.CANCEL: {\n\t\t\t\treturn (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tonClick={onBackClick}\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\troot: \"page-header__icon left-icon menu-icon\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CancelIcon />\n\t\t\t\t\t</Icon>\n\t\t\t\t);\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}, [onMenuClick, onBackClick, leftIcon]);\n\n\tconst rightSideIcon = useMemo(() => {\n\t\tswitch (rightIcon) {\n\t\t\tcase RightIcon.NONE: {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tcase RightIcon.SEARCH: {\n\t\t\t\treturn <SearchInput />;\n\t\t\t}\n\t\t\tcase RightIcon.TODAY: {\n\t\t\t\treturn (\n\t\t\t\t\t<Icon onClick={onTodayClick}>\n\t\t\t\t\t\t<CalendarTodayIcon\n\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\troot: \"page-header__icon right-icon calendar-icon\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Icon>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase RightIcon.SAVE: {\n\t\t\t\treturn (\n\t\t\t\t\t<Icon onClick={onSaveClick}>\n\t\t\t\t\t\t<SaveIcon\n\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\troot: \"page-header__icon right-icon save-icon\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Icon>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}, [\n\t\tonTodayClick,\n\t\tonSaveClick,\n\t\tdispatch,\n\t\trightIcon,\n\t\tsearchValue,\n\t\tsearchDisplay,\n\t]);\n\n\tconst isScrolled = useScrollTrigger({\n\t\tdisableHysteresis: true,\n\t\tthreshold: 0,\n\t});\n\n\treturn (\n\t\t<AppBar\n\t\t\televation={isScrolled && location.pathname !== \"/schedule\" ? 3 : 0}\n\t\t\tclassName=\"page-header\"\n\t\t>\n\t\t\t{leftSideIcon}\n\t\t\t{title && <h1 className=\"page-header__title\">{title}</h1>}\n\t\t\t{rightSideIcon}\n\t\t</AppBar>\n\t);\n}\n\nexport default PageHeader;\n","import React from \"react\";\nimport Link from \"@mui/material/Link\";\nimport TelegramIcon from \"@mui/icons-material/Telegram\";\nimport GithubIcon from \"@mui/icons-material/GitHub\";\nimport GmailIcon from \"@mui/icons-material/Mail\";\nimport \"../styles/PageFooter.scss\";\n\nexport default function PageFooter() {\n\treturn (\n\t\t<footer className=\"page-footer\">\n\t\t\t<p className=\"page-footer__copyright\">\n\t\t\t\t© {new Date().getFullYear()} Plump Albert\n\t\t\t</p>\n\t\t\t<div className=\"page-footer__links\">\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"page-footer__link\"\n\t\t\t\t\thref=\"https://github.com/PlumpAlbert\"\n\t\t\t\t>\n\t\t\t\t\t<GithubIcon className=\"github-icon page-footer__icon\" />\n\t\t\t\t</Link>\n\t\t\t\t<Link className=\"page-footer__link\" href=\"mailto:plumpalbert@gmail.com\">\n\t\t\t\t\t<GmailIcon className=\"mail-icon page-footer__icon\" />\n\t\t\t\t</Link>\n\t\t\t\t<Link className=\"page-footer__link\" href=\"https://t.me/plump_albert\">\n\t\t\t\t\t<TelegramIcon className=\"telegram-icon page-footer__icon\" />\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t</footer>\n\t);\n}\n","import React, {useEffect, useState} from \"react\";\nimport ScheduleAPI from \"../API\";\nimport {FACULTY, ISpecialty} from \"../types\";\n\n/**\n * Hook for using specialties for specified `faculty`\n * @param {FACULTY} faculty Faculty to use for fetching specialties\n */\nfunction useSpecialties(\n\tfaculty: FACULTY\n): [ISpecialty[], React.Dispatch<React.SetStateAction<ISpecialty[]>>, boolean] {\n\tconst [specialties, setSpecialties] = useState<ISpecialty[]>([]);\n\tconst [isLoading, setLoading] = useState<boolean>(false);\n\n\tuseEffect(() => {\n\t\tif (!faculty) return;\n\t\tconst abortController = new AbortController();\n\t\tsetLoading(true);\n\t\tScheduleAPI.fetchSpecialties(faculty, abortController)\n\t\t\t.then(specialties => {\n\t\t\t\tif (!specialties) {\n\t\t\t\t\tsetSpecialties([]);\n\t\t\t\t} else {\n\t\t\t\t\tsetSpecialties(specialties);\n\t\t\t\t}\n\t\t\t\tsetLoading(false);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tif (!abortController.signal.aborted) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t\tsetLoading(false);\n\t\t\t});\n\t\treturn () => {\n\t\t\tabortController.abort();\n\t\t};\n\t}, [faculty, setSpecialties]);\n\n\treturn [specialties, setSpecialties, isLoading];\n}\n\nexport default useSpecialties;\n","import React, {useCallback, useMemo, useState} from \"react\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport {SelectChangeEvent} from \"@mui/material/Select\";\nimport TextField from \"@mui/material/TextField\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Button from \"@mui/material/Button\";\nimport ToggleButton from \"@mui/material/ToggleButton\";\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\nimport useSpecialties from \"../../../hooks/useSpecialties\";\nimport {calculateCourse} from \"../../../Helpers\";\nimport {Course, FACULTY, IGroup} from \"../../../types\";\n\nimport \"./GroupSelectDialog.scss\";\n\ninterface IProps extends IGroup {\n\topen: boolean;\n\tonClose: (group?: IGroup) => void;\n}\n\nfunction GroupSelectDialog({\n\tfaculty: defaultFaculty,\n\tspecialty: defaultSpecialty,\n\tyear: defaultYear,\n\tid: defaultId,\n\topen,\n\tonClose,\n}: IProps) {\n\t//#region Group state\n\tconst [course, setCourse] = useState<Course>(calculateCourse(defaultYear));\n\tconst [specialty, setSpecialty] = useState(defaultSpecialty);\n\tconst [faculty, setFaculty] = useState<FACULTY>(defaultFaculty);\n\t//#endregion\n\n\t//#region Component's state\n\tconst [error, setError] = useState(false);\n\tconst [specialties] = useSpecialties(faculty);\n\n\tconst facultyOptions = useMemo(\n\t\t() =>\n\t\t\tObject.values(FACULTY).map(faculty => (\n\t\t\t\t<MenuItem key={faculty} value={faculty}>\n\t\t\t\t\t{faculty}\n\t\t\t\t</MenuItem>\n\t\t\t)),\n\t\t[]\n\t);\n\tconst specialtyOptions = useMemo(\n\t\t() =>\n\t\t\tspecialties.map(({title}) => (\n\t\t\t\t<MenuItem key={title} value={title}>\n\t\t\t\t\t{title}\n\t\t\t\t</MenuItem>\n\t\t\t)),\n\t\t[specialties]\n\t);\n\n\tconst courseButtons = useMemo(() => {\n\t\tlet buttons: React.ReactNode[] = [];\n\t\tconst courses = Object.keys(\n\t\t\tspecialties.find(s => s.title === specialty)?.courses || []\n\t\t);\n\t\tfor (let i = 1; i < 5; ++i) {\n\t\t\tconst disabled = !courses.find(c => c === i.toString());\n\t\t\tbuttons.push(\n\t\t\t\t<ToggleButton\n\t\t\t\t\tkey={`course-toggle-button-${i}`}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tselected={!disabled && i === course}\n\t\t\t\t\tvalue={i.toString()}\n\t\t\t\t\tclassName={`course-toggle-button course-${i}`}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tselected: \"course-toggle-button--selected\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{i}\n\t\t\t\t</ToggleButton>\n\t\t\t);\n\t\t}\n\t\treturn buttons;\n\t}, [specialties, specialty, course]);\n\t//#endregion\n\n\t//#region CALLBACKS\n\tconst resetState = useCallback(() => {\n\t\tsetCourse(calculateCourse(defaultYear));\n\t\tsetSpecialty(defaultSpecialty);\n\t\tsetFaculty(defaultFaculty);\n\t}, [defaultFaculty, defaultSpecialty, defaultYear, defaultId]);\n\n\tconst handleSaveChangesClick = useCallback(() => {\n\t\tconst id = specialties.find(s => s.title === specialty)?.courses[course];\n\t\tif (!specialty || !id) {\n\t\t\tsetError(true);\n\t\t\treturn;\n\t\t}\n\t\tconst date = new Date();\n\t\tlet year = date.getFullYear() - Number(course);\n\t\tif (date.getMonth() > 9) year += 1;\n\t\tonClose({id, specialty, faculty, year});\n\t}, [onClose, setError, course, specialty, faculty, specialties]);\n\n\tconst handleDialogClose = useCallback(() => {\n\t\tresetState();\n\t\tonClose();\n\t}, [onClose, resetState]);\n\n\tconst handleCourseChange = useCallback(\n\t\t(_, newCourses: Course[]) => {\n\t\t\tif (newCourses.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst newCourse = newCourses[newCourses.length - 1];\n\t\t\tsetCourse(newCourse);\n\t\t\tsetError(true);\n\t\t},\n\t\t[specialties, specialty]\n\t);\n\n\tconst handleSelectChange = useCallback<\n\t\t(e: SelectChangeEvent<unknown>) => void\n\t>(\n\t\t({target}) => {\n\t\t\tswitch (target.name) {\n\t\t\t\tcase \"group_faculty\":\n\t\t\t\t\tsetFaculty(target.value as FACULTY);\n\t\t\t\t\tsetSpecialty(\"\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"group_specialty\":\n\t\t\t\t\tsetSpecialty(target.value as string);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[setFaculty, setSpecialty]\n\t);\n\t//#endregion\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={handleDialogClose}\n\t\t\tclassName=\"group-select-dialog-wrapper\"\n\t\t\tclasses={{\n\t\t\t\tpaper: \"group-select-dialog\",\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle className=\"group-select-dialog__title\">\n\t\t\t\tИзменение группы\n\t\t\t</DialogTitle>\n\n\t\t\t<TextField\n\t\t\t\tselect\n\t\t\t\terror={error && !faculty}\n\t\t\t\tclassName=\"group-select-dialog__field\"\n\t\t\t\tvariant=\"standard\"\n\t\t\t\tid=\"group_faculty\"\n\t\t\t\tname=\"group_faculty\"\n\t\t\t\tlabel=\"Факультет:\"\n\t\t\t\thelperText={error && !faculty ? \"Укажите свой факультет\" : undefined}\n\t\t\t\tSelectProps={{\n\t\t\t\t\tclassName: \"field__input\",\n\t\t\t\t\tonChange: handleSelectChange,\n\t\t\t\t\tvalue: faculty,\n\t\t\t\t}}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: \"field__label\",\n\t\t\t\t\thtmlFor: \"group_faculty\",\n\t\t\t\t}}\n\t\t\t\tFormHelperTextProps={{\n\t\t\t\t\tclassName: \"field__helper-text\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{facultyOptions}\n\t\t\t</TextField>\n\n\t\t\t<TextField\n\t\t\t\tselect\n\t\t\t\terror={error && !specialty}\n\t\t\t\tclassName=\"group-select-dialog__field\"\n\t\t\t\tvariant=\"standard\"\n\t\t\t\tid=\"group_specialty\"\n\t\t\t\tname=\"group_specialty\"\n\t\t\t\tlabel=\"Специальность:\"\n\t\t\t\thelperText={\n\t\t\t\t\terror && !specialty ? \"Укажите свою специальность\" : undefined\n\t\t\t\t}\n\t\t\t\tSelectProps={{\n\t\t\t\t\tclassName: \"field__input\",\n\t\t\t\t\tonChange: handleSelectChange,\n\t\t\t\t\tvalue: specialty,\n\t\t\t\t}}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: \"field__label\",\n\t\t\t\t\thtmlFor: \"group_specialty\",\n\t\t\t\t}}\n\t\t\t\tFormHelperTextProps={{\n\t\t\t\t\tclassName: \"field__helper-text\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{specialtyOptions}\n\t\t\t</TextField>\n\n\t\t\t<ToggleButtonGroup\n\t\t\t\tclassName=\"group-select-dialog__course-buttons\"\n\t\t\t\tonChange={handleCourseChange}\n\t\t\t>\n\t\t\t\t{courseButtons}\n\t\t\t</ToggleButtonGroup>\n\n\t\t\t<Button\n\t\t\t\tclassName=\"group-select-dialog__button\"\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tonClick={handleSaveChangesClick}\n\t\t\t>\n\t\t\t\tСохранить\n\t\t\t</Button>\n\t\t</Dialog>\n\t);\n}\n\nexport default GroupSelectDialog;\n","import React, {useCallback, useMemo, useState} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport ManageAccountsIcon from \"@mui/icons-material/ManageAccounts\";\nimport LogoutIcon from \"@mui/icons-material/Logout\";\nimport EditIcon from \"@mui/icons-material/Edit\";\nimport AddIcon from \"@mui/icons-material/NoteAdd\";\nimport GroupSelectDialog from \"./GroupSelectDialog\";\nimport {IUser, UserType} from \"../../../types\";\nimport ScheduleAPI from \"../../../API\";\nimport {actions as appActions} from \"../../../store/app\";\nimport {actions as scheduleActions} from \"../../../store/schedule\";\nimport {useDispatch} from \"../../../store\";\n\ninterface IProps {\n\tuser: IUser;\n\tonGroupChangeSuccess: (success: boolean) => void;\n}\n\nfunction UserView({user, onGroupChangeSuccess}: IProps) {\n\tconst [dialogOpened, setDialogOpened] = useState(false);\n\tconst navigate = useNavigate();\n\tconst dispatch = useDispatch();\n\n\tconst groupName = useMemo(() => {\n\t\tif (!user.group) return \"\";\n\t\tconst words = user.group.specialty.split(\" \");\n\t\tconst year = user.group.year.toString();\n\t\treturn (\n\t\t\twords.reduce((result, word) => result + word[0].toUpperCase(), \"\") +\n\t\t\t\"-\" +\n\t\t\tyear.slice(-2)\n\t\t);\n\t}, [user.group]);\n\n\tconst handleGroupChange = useCallback(\n\t\tgroup => {\n\t\t\tsetDialogOpened(false);\n\t\t\tif (!group) return;\n\t\t\tScheduleAPI.updateUser({id: user.id, group: group.id}).then(success => {\n\t\t\t\tonGroupChangeSuccess(!!success);\n\t\t\t\tif (success) {\n\t\t\t\t\tdispatch(appActions.setUserGroup(group));\n\t\t\t\t\tnavigate(`/schedule?group=${group.id}`);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[onGroupChangeSuccess, dispatch]\n\t);\n\tconst handleEditGroupClick = useCallback(() => {\n\t\tsetDialogOpened(true);\n\t}, [setDialogOpened]);\n\n\tconst handleSignOutClick = useCallback(() => {\n\t\tScheduleAPI.signOut().then(() => {\n\t\t\tdispatch(appActions.signOut());\n\t\t\tnavigate(\"/\");\n\t\t});\n\t}, [dispatch]);\n\n\tconst handleEditScheduleClick = useCallback(() => {\n\t\tdispatch(scheduleActions.toggleEditing(\"edit\"));\n\t\tdispatch(appActions.toggleMenu());\n\t}, [dispatch]);\n\n\tconst handleAddScheduleClick = useCallback(() => {\n\t\tdispatch(scheduleActions.toggleEditing(\"create\"));\n\t\tdispatch(appActions.toggleMenu());\n\t\tnavigate(\"/groups\");\n\t}, [dispatch, navigate]);\n\n\treturn (\n\t\t<div className=\"app-menu__content\">\n\t\t\t{user.group && (\n\t\t\t\t<GroupSelectDialog\n\t\t\t\t\topen={dialogOpened}\n\t\t\t\t\tonClose={handleGroupChange}\n\t\t\t\t\t{...user.group}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<div className=\"menu-header\">\n\t\t\t\t<h1 className=\"app-title\">Расписание ЛГТУ</h1>\n\t\t\t\t<div className=\"user-info\">\n\t\t\t\t\t<img src=\"/assets/user.png\" alt=\"user-avatar\" className=\"user-pic\" />\n\t\t\t\t\t<h2 className=\"user-name\">{user.name}</h2>\n\t\t\t\t\t<p className=\"user-group\">{groupName}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"menu-settings\">\n\t\t\t\t<h3 className=\"menu-settings__header\">Настройки</h3>\n\t\t\t\t{user.type === UserType.ADMIN && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tclassName=\"menu-settings__option\"\n\t\t\t\t\t\t\tonClick={handleAddScheduleClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AddIcon classes={{root: \"option__icon\"}} />\n\t\t\t\t\t\t\t<span className=\"option__text\">Создать новое расписание</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tclassName=\"menu-settings__option\"\n\t\t\t\t\t\t\tonClick={handleEditScheduleClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<EditIcon classes={{root: \"option__icon\"}} />\n\t\t\t\t\t\t\t<span className=\"option__text\">Редактировать расписание</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t<p className=\"menu-settings__option\" onClick={handleEditGroupClick}>\n\t\t\t\t\t<ManageAccountsIcon classes={{root: \"option__icon\"}} />\n\t\t\t\t\t<span className=\"option__text\">Изменить группу</span>\n\t\t\t\t</p>\n\t\t\t\t<p className=\"menu-settings__option\" onClick={handleSignOutClick}>\n\t\t\t\t\t<LogoutIcon classes={{root: \"option__icon\"}} />\n\t\t\t\t\t<span className=\"option__text\">Выйти</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default UserView;\n","import React, {useCallback, useEffect, useState} from \"react\";\nimport {useLocation, useNavigate} from \"react-router-dom\";\nimport Button from \"@mui/material/Button\";\nimport TextField from \"@mui/material/TextField\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport SwipeableDrawer from \"@mui/material/SwipeableDrawer\";\nimport Alert, {AlertColor} from \"@mui/material/Alert\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport PageFooter from \"../PageFooter\";\nimport UserView from \"./UserView\";\nimport {useSelector} from \"../../store\";\nimport {selectUser} from \"../../store/app\";\n\nimport \"../../styles/MenuSlider.scss\";\n\ninterface IProps {\n\tonClose: () => void;\n\tonOpen: () => void;\n}\n\ninterface IAlert {\n\tshow: boolean;\n\tmessage: string;\n\ttype: AlertColor;\n}\n\nconst MenuSlider = ({onClose, onOpen}: IProps) => {\n\tconst [alert, setAlert] = useState<IAlert>({\n\t\tshow: false,\n\t\tmessage: \"\",\n\t\ttype: \"success\",\n\t});\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst user = useSelector(selectUser);\n\tconst showMenu = useSelector(store => store.application.showMenu);\n\n\tuseEffect(() => {\n\t\tonClose();\n\t}, [location.pathname]);\n\n\tconst handleGroupChange = useCallback(\n\t\tsuccess => {\n\t\t\tsetAlert({\n\t\t\t\tshow: true,\n\t\t\t\tmessage: success\n\t\t\t\t\t? \"Группа успешно изменена\"\n\t\t\t\t\t: \"Ошибка при смене группы\",\n\t\t\t\ttype: success ? \"success\" : \"error\",\n\t\t\t});\n\t\t},\n\t\t[user]\n\t);\n\n\tconst handleAlertClose = useCallback(() => {\n\t\tsetAlert({\n\t\t\t...alert,\n\t\t\tshow: false,\n\t\t});\n\t}, [setAlert, alert]);\n\n\tconst [searchValue, setSearchValue] = useState(\"\");\n\tconst handleSearchValueChanged = useCallback(\n\t\te => {\n\t\t\tsetSearchValue(e.target.value);\n\t\t},\n\t\t[setSearchValue]\n\t);\n\n\tconst handleKeyDown = useCallback(\n\t\t({key}) => {\n\t\t\tif ((key && key !== \"Enter\") || !searchValue) return;\n\t\t\tnavigate(`/search?q=${searchValue}`);\n\t\t},\n\t\t[navigate, searchValue]\n\t);\n\n\treturn (\n\t\t<SwipeableDrawer\n\t\t\tdisableBackdropTransition\n\t\t\tdisableSwipeToOpen\n\t\t\televation={0}\n\t\t\tclasses={{\n\t\t\t\tpaper: \"app-menu\",\n\t\t\t}}\n\t\t\topen={showMenu}\n\t\t\tanchor=\"left\"\n\t\t\tonClose={onClose}\n\t\t\tonOpen={onOpen}\n\t\t>\n\t\t\t<Snackbar\n\t\t\t\tanchorOrigin={{horizontal: \"center\", vertical: \"bottom\"}}\n\t\t\t\topen={alert.show}\n\t\t\t\tautoHideDuration={3000}\n\t\t\t\tonClose={handleAlertClose}\n\t\t\t>\n\t\t\t\t<Alert\n\t\t\t\t\tclassName=\"app-menu__alert\"\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tfilledSuccess: \"app-menu__alert--success\",\n\t\t\t\t\t\tfilledError: \"app-menu__alert--error\",\n\t\t\t\t\t}}\n\t\t\t\t\tseverity={alert.type}\n\t\t\t\t\tvariant=\"filled\"\n\t\t\t\t\tonClose={handleAlertClose}\n\t\t\t\t\tsx={{width: \"100%\"}}\n\t\t\t\t>\n\t\t\t\t\t{alert.message}\n\t\t\t\t</Alert>\n\t\t\t</Snackbar>\n\t\t\t{user ? (\n\t\t\t\t<UserView user={user} onGroupChangeSuccess={handleGroupChange} />\n\t\t\t) : (\n\t\t\t\t<div className=\"app-menu__content\">\n\t\t\t\t\t<div className=\"menu-header\">\n\t\t\t\t\t\t<h1 className=\"app-title\">Расписание ЛГТУ</h1>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tclassName=\"search-input\"\n\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\tlabel=\"Найти расписание\"\n\t\t\t\t\t\t\tplaceholder=\"Введите название группы\"\n\t\t\t\t\t\t\tvalue={searchValue}\n\t\t\t\t\t\t\tonChange={handleSearchValueChanged}\n\t\t\t\t\t\t\tonKeyPress={handleKeyDown}\n\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\" onClick={handleKeyDown}>\n\t\t\t\t\t\t\t\t\t\t<SearchIcon className=\"search-input__icon search-icon\" />\n\t\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tclassName=\"menu-header__btn btn-groups\"\n\t\t\t\t\t\t\tonClick={() => navigate(\"/groups\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСписок всех групп\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"menu-body\">\n\t\t\t\t\t\t<div className=\"menu-body__text\">\n\t\t\t\t\t\t\t<h3 className=\"text-header\">Надоело искать свою группу?</h3>\n\t\t\t\t\t\t\t<span className=\"text-content\">\n\t\t\t\t\t\t\t\tЗарегистрируйся в приложении и смотри расписание без\n\t\t\t\t\t\t\t\tнеобходимости поиска\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tclassName=\"menu-body__btn btn-sign-up\"\n\t\t\t\t\t\t\tonClick={() => navigate(\"/signup\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tРегистрация\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tclassName=\"menu-body__btn btn-sign-in\"\n\t\t\t\t\t\t\tonClick={() => navigate(\"/login\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tВход\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<PageFooter />\n\t\t</SwipeableDrawer>\n\t);\n};\n\nexport default MenuSlider;\n","import React, {useCallback, useRef, useState} from \"react\";\nimport \"../styles/SwipeAction.scss\";\n\ninterface IProps {\n\taction: React.ReactNode;\n\tcanSwipe?: boolean;\n\tchildren: React.ReactNode | React.ReactNode[];\n\tclassName?: string;\n\ttouchTimeThreshold?: number;\n\tonAction: () => void;\n}\n\nfunction SwipeAction({\n\taction,\n\tcanSwipe = true,\n\tchildren,\n\tclassName = \"swipe\",\n\ttouchTimeThreshold = 150,\n\tonAction,\n}: IProps) {\n\tconst [swipeX, setX] = useState(0);\n\tconst actionRef = useRef(null);\n\tconst touchesRef = useRef<React.Touch>();\n\tconst touchStartTimeRef = useRef<number>(0);\n\n\tconst handleSwipe = useCallback<React.TouchEventHandler<HTMLDivElement>>(\n\t\te => {\n\t\t\tif (e.touches.length > 1) return;\n\t\t\tif (!touchesRef.current) {\n\t\t\t\ttouchStartTimeRef.current = performance.now();\n\t\t\t\ttouchesRef.current = e.touches[0];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst deltaX = e.changedTouches[0].clientX - touchesRef.current.clientX;\n\t\t\tsetX(deltaX);\n\t\t},\n\t\t[setX]\n\t);\n\n\tconst handleSwipeEnd = useCallback(() => {\n\t\tconst touchTime = performance.now() - touchStartTimeRef.current;\n\t\ttouchesRef.current = undefined;\n\t\tlet actionWidth = 0;\n\t\tif (actionRef.current) {\n\t\t\tactionWidth = Number(\n\t\t\t\tgetComputedStyle(actionRef.current).width.replace(\"px\", \"\")\n\t\t\t);\n\t\t}\n\t\tif (touchTime < touchTimeThreshold && -swipeX > actionWidth) {\n\t\t\tonAction();\n\t\t\tsetX(0);\n\t\t} else {\n\t\t\tif (-swipeX > actionWidth) setX(-actionWidth);\n\t\t\telse setX(0);\n\t\t}\n\t}, [setX, touchTimeThreshold, swipeX, onAction]);\n\n\tconst createClassName = useCallback(\n\t\t(suffix: string) => {\n\t\t\tlet classes = [\"swipe\"];\n\t\t\tif (className) {\n\t\t\t\tclasses.push(...className.split(\" \"));\n\t\t\t}\n\t\t\treturn classes.map(c => c + suffix).join(\" \");\n\t\t},\n\t\t[className]\n\t);\n\n\treturn (\n\t\t<div className={createClassName(\"-root\")}>\n\t\t\t<div\n\t\t\t\tclassName={createClassName(\"-wrapper\")}\n\t\t\t\tonTouchMove={canSwipe ? handleSwipe : undefined}\n\t\t\t\tonTouchEnd={canSwipe ? handleSwipeEnd : undefined}\n\t\t\t\tstyle={{\n\t\t\t\t\ttransform: swipeX > 0 ? \"\" : `translateX(${swipeX}px)`,\n\t\t\t\t\tborderRadius: swipeX > -1 ? \"\" : \"4px\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={createClassName(\"-action\")}\n\t\t\t\tref={actionRef}\n\t\t\t\tonClick={onAction}\n\t\t\t>\n\t\t\t\t{action}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default SwipeAction;\n","import React, {useCallback} from \"react\";\nimport ListItem from \"@mui/material/ListItem\";\nimport Icon from \"@mui/material/Icon\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport {CoreSubject, SUBJECT_TYPE} from \"../../types\";\n\nimport \"./SubjectView.scss\";\nimport {renderTime} from \"../../Helpers\";\nimport SwipeAction from \"../../components/SwipeAction\";\n\ninterface ILoadable {\n\tloading?: boolean;\n}\n\ninterface IProps {\n\tisEditable?: boolean;\n\ttype?: SUBJECT_TYPE;\n\tvalue?: CoreSubject;\n\tonClick?: (s: CoreSubject) => void;\n\tonDelete?: (s: CoreSubject) => void;\n}\n\nfunction SubjectView({\n\tonClick = undefined,\n\tonDelete = undefined,\n\tloading = false,\n\tisEditable,\n\tvalue,\n\ttype = value?.type,\n}: IProps & ILoadable) {\n\tlet typeClass;\n\tswitch (type || value?.type) {\n\t\tcase SUBJECT_TYPE.ЛЕКЦИЯ:\n\t\t\ttypeClass = \"lecture\";\n\t\t\tbreak;\n\t\tcase SUBJECT_TYPE.ПРАКТИКА:\n\t\t\ttypeClass = \"practice\";\n\t\t\tbreak;\n\t\tcase SUBJECT_TYPE.ЛАБОРАТОРНАЯ:\n\t\t\ttypeClass = \"lab\";\n\t\t\tbreak;\n\t}\n\n\tconst handleClick = useCallback<React.MouseEventHandler<HTMLLIElement>>(\n\t\te => {\n\t\t\te.preventDefault();\n\t\t\tif (!isEditable) return;\n\t\t\tif (onClick && value) {\n\t\t\t\tonClick(value);\n\t\t\t}\n\t\t},\n\t\t[onClick, value]\n\t);\n\n\tconst handleDeleteClick = useCallback(\n\t\t(e?: React.MouseEvent) => {\n\t\t\tif (e) e.stopPropagation();\n\t\t\tif (onDelete && value) onDelete(value);\n\t\t},\n\t\t[onDelete, value]\n\t);\n\n\treturn (\n\t\t<ListItem\n\t\t\tclassName={`subject-view${loading ? \" loading\" : \"\"}`}\n\t\t\tonClick={handleClick}\n\t\t>\n\t\t\t<SwipeAction\n\t\t\t\tclassName=\"subject-view\"\n\t\t\t\tcanSwipe={isEditable}\n\t\t\t\tonAction={handleDeleteClick}\n\t\t\t\taction={\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tid=\"subject-view-action__icon-delete\"\n\t\t\t\t\t\t\tclassName=\"subject-view-action__icon\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\thtmlFor=\"subject-view-action__icon-delete\"\n\t\t\t\t\t\t\tclassName=\"subject-view-action__text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tУдалить\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div className={`subject-view-type ${typeClass}`} />\n\t\t\t\t<div className=\"subject-view-content\">\n\t\t\t\t\t<div className=\"subject-view__header\">\n\t\t\t\t\t\t<span className=\"subject-view-time\">{renderTime(value?.time)}</span>\n\t\t\t\t\t\t<span className=\"subject-view-location\">\n\t\t\t\t\t\t\t{value && SUBJECT_TYPE[value.type]} в {value?.audience}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"subject-view-title\">{value?.title}</span>\n\t\t\t\t\t<span className=\"subject-view-teacher\">{value?.teacher?.name}</span>\n\t\t\t\t</div>\n\t\t\t</SwipeAction>\n\t\t</ListItem>\n\t);\n}\n\nexport default SubjectView;\n","import React, {useCallback, useEffect, useMemo, useState} from \"react\";\nimport {useLocation, useNavigate} from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport List from \"@mui/material/List\";\nimport ScheduleAPI from \"../../API\";\nimport {CoreSubject, SUBJECT_TYPE, WEEK_TYPE} from \"../../types\";\nimport SubjectView from \"./SubjectView\";\nimport {actions as scheduleActions, EditMode} from \"../../store/schedule\";\nimport {actions as subjectActions} from \"../../store/schedule/subject\";\nimport {useDispatch, useSelector} from \"../../store\";\nimport {selectUser} from \"../../store/app\";\n\ninterface IProps {\n\teditMode: EditMode;\n\tweekday: number;\n\tweekType: WEEK_TYPE;\n}\n\nconst subjectPlaceholders = [\n\t<SubjectView key=\"subject-view-0\" loading type={SUBJECT_TYPE.ЛЕКЦИЯ} />,\n\t<SubjectView key=\"subject-view-1\" loading type={SUBJECT_TYPE.ЛАБОРАТОРНАЯ} />,\n\t<SubjectView key=\"subject-view-2\" loading type={SUBJECT_TYPE.ПРАКТИКА} />,\n\t<SubjectView key=\"subject-view-3\" loading type={SUBJECT_TYPE.ЛАБОРАТОРНАЯ} />,\n\t<SubjectView key=\"subject-view-4\" loading type={SUBJECT_TYPE.ЛЕКЦИЯ} />,\n];\n\nfunction SchedulePresenter({editMode, weekday, weekType}: IProps) {\n\tconst [isLoading, setLoading] = useState(true);\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst dispatch = useDispatch();\n\tconst user = useSelector(selectUser);\n\tconst selectedGroup = useSelector(({schedule}) => schedule.currentGroup);\n\n\tconst subjects = useSelector<CoreSubject[]>(({schedule}) => {\n\t\treturn schedule.subjects.reduce<CoreSubject[]>(\n\t\t\t(displayList, {times, ...subject}) => {\n\t\t\t\treturn displayList.concat(\n\t\t\t\t\ttimes.map<CoreSubject>(time => ({\n\t\t\t\t\t\t...time,\n\t\t\t\t\t\t...subject,\n\t\t\t\t\t}))\n\t\t\t\t);\n\t\t\t},\n\t\t\t[]\n\t\t);\n\t});\n\n\tuseEffect(() => {\n\t\tconst query = new URLSearchParams(location.search);\n\t\tlet groupId = Number(query.get(\"group\"));\n\t\tif (!groupId && user) {\n\t\t\tgroupId = user.group?.id || NaN;\n\t\t}\n\t\tif (!groupId) {\n\t\t\tnavigate(\"/groups\", {replace: true});\n\t\t\treturn;\n\t\t}\n\t\tdispatch(scheduleActions.setCurrentGroup(groupId));\n\t}, [location.search]);\n\n\tuseEffect(() => {\n\t\tconst abortController = new AbortController();\n\t\tScheduleAPI.fetchSchedule(selectedGroup, abortController)\n\t\t\t.then(schedule => {\n\t\t\t\tdispatch(scheduleActions.setSchedule(schedule));\n\t\t\t\tsetLoading(false);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tif (!abortController.signal.aborted) {\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t\tif (process.env.NODE_ENV === \"development\") {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\treturn () => {\n\t\t\tabortController.abort();\n\t\t};\n\t}, [selectedGroup]);\n\n\tconst handleSubjectClick = useCallback<(s: CoreSubject) => void>(\n\t\tsubject => {\n\t\t\tnavigate(\"/subject?id=\" + subject.id);\n\t\t},\n\t\t[navigate]\n\t);\n\n\tconst handleSubjectDelete = useCallback<(subject: CoreSubject) => void>(\n\t\tsubject => {\n\t\t\tdispatch(\n\t\t\t\tscheduleActions.updateSubject({\n\t\t\t\t\ttitle: subject.title,\n\t\t\t\t\ttype: subject.type,\n\t\t\t\t\tteacher: subject.teacher,\n\t\t\t\t\taction: subjectActions.deleteAttendTime(subject.id),\n\t\t\t\t})\n\t\t\t);\n\t\t\tScheduleAPI.deleteSubject(subject.id).then(success => {\n\t\t\t\tif (success) return;\n\t\t\t\tdispatch(\n\t\t\t\t\tscheduleActions.updateSubject({\n\t\t\t\t\t\ttitle: subject.title,\n\t\t\t\t\t\ttype: subject.type,\n\t\t\t\t\t\tteacher: subject.teacher,\n\t\t\t\t\t\taction: subjectActions.addAttendTime({\n\t\t\t\t\t\t\tisCreated: false,\n\t\t\t\t\t\t\ttime: subject,\n\t\t\t\t\t\t}),\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t[dispatch]\n\t);\n\n\tconst filteredSubjects = useMemo(\n\t\t() =>\n\t\t\tsubjects\n\t\t\t\t.filter(s => s.weekday === weekday && s.weekType === weekType)\n\t\t\t\t.sort((a, b) => a.time - b.time),\n\t\t[weekday, weekType, subjects.length]\n\t);\n\n\treturn (\n\t\t<List className=\"schedule-view-page__schedule\">\n\t\t\t{isLoading\n\t\t\t\t? subjectPlaceholders\n\t\t\t\t: filteredSubjects.map((s, i) => (\n\t\t\t\t\t\t<SubjectView\n\t\t\t\t\t\t\tkey={`subject-view-${i}`}\n\t\t\t\t\t\t\tonClick={handleSubjectClick}\n\t\t\t\t\t\t\tonDelete={handleSubjectDelete}\n\t\t\t\t\t\t\tisEditable={!!editMode}\n\t\t\t\t\t\t\tvalue={s}\n\t\t\t\t\t\t/>\n\t\t\t\t  ))}\n\t\t</List>\n\t);\n}\n\nSchedulePresenter.propTypes = {\n\tgroupId: PropTypes.number,\n};\n\nexport default SchedulePresenter;\n","import React, {useCallback, useEffect, useMemo, useRef} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport FAB from \"@mui/material/Fab\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport Button from \"@mui/material/IconButton\";\nimport SwapVertIcon from \"@mui/icons-material/SwapVert\";\nimport {GetWeekdayName} from \"../../Helpers\";\nimport SchedulePresenter from \"./SchedulePresenter\";\nimport {WEEK_TYPE, WEEKDAY} from \"../../types\";\nimport {useDispatch, useSelector} from \"../../store\";\nimport {actions as scheduleActions, selectSchedule} from \"../../store/schedule\";\n\nimport \"../../styles/ScheduleView.scss\";\n\nconst ScheduleView = () => {\n\tconst weekdayRefs = useRef<Array<HTMLParagraphElement | null>>([]);\n\tconst dispatch = useDispatch();\n\tconst navigate = useNavigate();\n\tconst {editMode, currentDay, currentWeek} = useSelector(selectSchedule);\n\n\tuseEffect(() => {\n\t\tweekdayRefs.current[currentDay - 1]?.scrollIntoView({\n\t\t\tbehavior: \"smooth\",\n\t\t\tblock: \"center\",\n\t\t\tinline: \"center\",\n\t\t});\n\t}, [currentDay]);\n\n\t//#region CALLBACKS\n\tconst handleWeekdayClick = useCallback<\n\t\tReact.MouseEventHandler<HTMLParagraphElement>\n\t>(\n\t\t({currentTarget}) => {\n\t\t\tconst {dataset} = currentTarget;\n\t\t\tconst newDay: WEEKDAY = Number(dataset[\"weekday\"]);\n\t\t\tdispatch(scheduleActions.setWeekday(newDay));\n\t\t},\n\t\t[dispatch]\n\t);\n\n\tconst handleSwapClick = useCallback<React.MouseEventHandler>(() => {\n\t\tdispatch(scheduleActions.toggleWeekType());\n\t}, [dispatch]);\n\n\tconst handleAddSubject = useCallback(() => {\n\t\tdispatch(scheduleActions.toggleEditing(\"create\"));\n\t\tnavigate(\"/create\", {state: {createNew: true}});\n\t}, []);\n\t//#endregion\n\n\tconst weekdays = useMemo(() => {\n\t\tlet array = new Array(WEEKDAY.SUNDAY);\n\t\tfor (let i = WEEKDAY.MONDAY; i <= WEEKDAY.SUNDAY; i++) {\n\t\t\tlet name = GetWeekdayName(i);\n\t\t\tarray.push(\n\t\t\t\t<p\n\t\t\t\t\tkey={`weekday-${i}`}\n\t\t\t\t\tref={ref => {\n\t\t\t\t\t\tweekdayRefs.current.push(ref);\n\t\t\t\t\t}}\n\t\t\t\t\tid={name}\n\t\t\t\t\tdata-weekday={i}\n\t\t\t\t\tonClick={handleWeekdayClick}\n\t\t\t\t\tclassName={`weekday${currentDay === i ? \" active\" : \"\"}`}\n\t\t\t\t>\n\t\t\t\t\t{name}\n\t\t\t\t</p>\n\t\t\t);\n\t\t}\n\t\treturn array;\n\t}, [handleWeekdayClick, currentDay]);\n\n\tconst greenWeek = useMemo(\n\t\t() => currentWeek === WEEK_TYPE.GREEN,\n\t\t[currentWeek]\n\t);\n\n\treturn (\n\t\t<div className=\"page schedule-view-page\">\n\t\t\t<div className=\"schedule-view-page__week-type\">\n\t\t\t\t<h2 className=\"week-type__text\">\n\t\t\t\t\t{greenWeek ? \"Зеленая неделя\" : \"Белая неделя\"}\n\t\t\t\t</h2>\n\t\t\t\t<Button\n\t\t\t\t\tclasses={{root: \"week-type__swap-icon\"}}\n\t\t\t\t\tonClick={handleSwapClick}\n\t\t\t\t>\n\t\t\t\t\t<SwapVertIcon />\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<div className=\"schedule-view-page__days\">{weekdays}</div>\n\t\t\t<SchedulePresenter\n\t\t\t\teditMode={editMode}\n\t\t\t\tweekType={currentWeek}\n\t\t\t\tweekday={currentDay}\n\t\t\t/>\n\t\t\t{editMode && (\n\t\t\t\t<FAB\n\t\t\t\t\tclassName=\"schedule-view-page__fab\"\n\t\t\t\t\tvariant=\"circular\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tonClick={handleAddSubject}\n\t\t\t\t>\n\t\t\t\t\t<AddIcon className=\"fab-icon\" />\n\t\t\t\t</FAB>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default ScheduleView;\n","import React, {useCallback} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport Button from \"@mui/material/Button\";\nimport \"../styles/LandingPage.scss\";\n\nconst LandingPage = () => {\n\tconst navigate = useNavigate();\n\tconst groupBtnClick = useCallback(() => {\n\t\tnavigate(\"/groups\");\n\t}, [navigate]);\n\tconst loginBtnClick = useCallback(() => {\n\t\tnavigate(\"/login\");\n\t}, [navigate]);\n\tconst signUpBtnClick = useCallback(() => {\n\t\tnavigate(\"/signup\");\n\t}, [navigate]);\n\treturn (\n\t\t<div className=\"page landing-page\">\n\t\t\t<h1 className=\"app-title\">Расписание ЛГТУ</h1>\n\t\t\t<p className=\"landing-page__text app-description\">\n\t\t\t\tПостоянно забываешь какой предмет следующий по расписанию? С этим\n\t\t\t\tприложением расписание твоей группы всегда под рукой! Воспользуйся\n\t\t\t\tпоиском интересующей группы или открой список всех доступных групп,\n\t\t\t\tнажав кнопку ниже:\n\t\t\t</p>\n\t\t\t<Button className=\"landing-page__btn\" onClick={groupBtnClick}>\n\t\t\t\tСписок групп\n\t\t\t</Button>\n\t\t\t<p className=\"landing-page__text\">\n\t\t\t\tНадоело вечно искать свою группу? Зарегистрируйся, чтобы видеть только\n\t\t\t\tрасписание своей группы\n\t\t\t</p>\n\t\t\t<Button className=\"landing-page__btn signup-btn\" onClick={signUpBtnClick}>\n\t\t\t\tРегистрация\n\t\t\t</Button>\n\t\t\t<p className=\"landing-page__text\">Уже есть аккаунт?</p>\n\t\t\t<Button className=\"landing-page__btn\" onClick={loginBtnClick}>\n\t\t\t\tВход\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\nexport default LandingPage;\n","import React, {useCallback} from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormControl from \"@mui/material/FormControl\";\nimport TextareaAutosize from \"@mui/base/TextareaAutosize\";\nimport {IProps, propTypes} from \".\";\nimport {actions} from \"../../../store/schedule/subject\";\n\nfunction TitleControl({dispatch, value}: IProps<string>) {\n\tconst handleTitleChanged = useCallback<\n\t\tReact.FocusEventHandler<HTMLTextAreaElement>\n\t>(\n\t\t({target}) => {\n\t\t\tdispatch(\n\t\t\t\tactions.updateProperty({property: \"title\", value: target.value})\n\t\t\t);\n\t\t},\n\t\t[dispatch]\n\t);\n\treturn (\n\t\t<FormControl fullWidth className=\"form-group form-group-vertical\">\n\t\t\t<label id=\"form-title\" htmlFor=\"title\" className=\"form__label\">\n\t\t\t\tНазвание\n\t\t\t</label>\n\t\t\t<TextareaAutosize\n\t\t\t\tclassName=\"form__title-textarea\"\n\t\t\t\tminRows={6}\n\t\t\t\tmaxRows={10}\n\t\t\t\taria-label=\"Название\"\n\t\t\t\tplaceholder=\"Введите название предмета\"\n\t\t\t\tdefaultValue={value}\n\t\t\t\tonBlur={handleTitleChanged}\n\t\t\t/>\n\t\t</FormControl>\n\t);\n}\n\nTitleControl.propTypes = propTypes(PropTypes.string.isRequired);\n\nexport default TitleControl;\n","import React, {useCallback, useMemo} from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select, {SelectChangeEvent} from \"@mui/material/Select\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport {IProps, propTypes} from \".\";\nimport {SUBJECT_TYPE} from \"../../../types\";\nimport {actions} from \"../../../store/schedule/subject\";\nimport {GetSubjectTypeAsString} from \"../../../Helpers\";\n\nfunction TypeControl({dispatch, value}: IProps<SUBJECT_TYPE>) {\n\tconst handleTypeChanged = useCallback<\n\t\t(event: SelectChangeEvent<number>) => void\n\t>(\n\t\t({target}) => {\n\t\t\tdispatch(actions.updateProperty({property: \"type\", value: target.value}));\n\t\t},\n\t\t[dispatch]\n\t);\n\n\tconst typeClass = useMemo(() => {\n\t\tswitch (value) {\n\t\t\tcase SUBJECT_TYPE.ЛЕКЦИЯ:\n\t\t\t\treturn \"lecture\";\n\t\t\tcase SUBJECT_TYPE.ПРАКТИКА:\n\t\t\t\treturn \"practice\";\n\t\t\tcase SUBJECT_TYPE.ЛАБОРАТОРНАЯ:\n\t\t\t\treturn \"lab\";\n\t\t}\n\t}, [value]);\n\n\treturn (\n\t\t<FormControl fullWidth className=\"form-group form-group-horizontal\">\n\t\t\t<label htmlFor=\"type\" id=\"form__type\" className=\"form__label\">\n\t\t\t\tТип занятия:\n\t\t\t</label>\n\t\t\t<Select\n\t\t\t\tlabelId=\"form__type\"\n\t\t\t\tclassName=\"form__textfield form__type-select\"\n\t\t\t\tvalue={value}\n\t\t\t\tonChange={handleTypeChanged}\n\t\t\t\trenderValue={value => (\n\t\t\t\t\t<p className=\"form__select__selected-item\">\n\t\t\t\t\t\t{GetSubjectTypeAsString(value)}\n\t\t\t\t\t\t<span className={`select__selected-item__type ${typeClass}`} />\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<MenuItem value={SUBJECT_TYPE.ЛЕКЦИЯ}>Лекция</MenuItem>\n\t\t\t\t<MenuItem value={SUBJECT_TYPE.ПРАКТИКА}>Практика</MenuItem>\n\t\t\t\t<MenuItem value={SUBJECT_TYPE.ЛАБОРАТОРНАЯ}>Лабораторная</MenuItem>\n\t\t\t</Select>\n\t\t</FormControl>\n\t);\n}\n\nTypeControl.propTypes = propTypes(PropTypes.number.isRequired);\n\nexport default TypeControl;\n","import React, {useCallback, useEffect, useMemo, useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select, {SelectChangeEvent} from \"@mui/material/Select\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport {IProps, propTypes} from \".\";\nimport {IUser} from \"../../../types\";\nimport {actions} from \"../../../store/schedule/subject\";\nimport ScheduleAPI from \"../../../API\";\n\nfunction TeacherControl({dispatch, value}: IProps<IUser>) {\n\tconst [teachers, setTeachers] = useState<IUser[]>([]);\n\n\tuseEffect(() => {\n\t\tconst abortController = new AbortController();\n\t\tScheduleAPI.getTeachers(abortController)\n\t\t\t.then(teachers => {\n\t\t\t\tif (!teachers) return;\n\t\t\t\tsetTeachers(teachers);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tif (\n\t\t\t\t\t!abortController.signal.aborted &&\n\t\t\t\t\tprocess.env.NODE_ENV === \"development\"\n\t\t\t\t) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t});\n\t\treturn () => {\n\t\t\tabortController.abort();\n\t\t};\n\t}, []);\n\n\tconst handleTeacherChanged = useCallback<\n\t\t(event: SelectChangeEvent<number>) => void\n\t>(\n\t\t({target}) => {\n\t\t\tconst teacherId = target.value;\n\t\t\tconst teacher = teachers.find(t => t.id === teacherId);\n\t\t\tif (!teacher) return;\n\t\t\tdispatch(actions.updateProperty({property: \"teacher\", value: teacher}));\n\t\t},\n\t\t[dispatch, teachers]\n\t);\n\n\tconst selectItems = useMemo(\n\t\t() =>\n\t\t\tteachers.map(({id, name}) => (\n\t\t\t\t<MenuItem key={`teacher-select-item-${id}`} value={id}>\n\t\t\t\t\t{name}\n\t\t\t\t</MenuItem>\n\t\t\t)),\n\t\t[teachers.length]\n\t);\n\n\treturn (\n\t\t<FormControl fullWidth className=\"form-group form-group-horizontal\">\n\t\t\t<label htmlFor=\"teacher\" className=\"form__label\">\n\t\t\t\tПреподаватель:\n\t\t\t</label>\n\t\t\t<Select\n\t\t\t\tlabelId=\"form__type\"\n\t\t\t\tclassName=\"form__textfield form__type-select\"\n\t\t\t\tdefaultValue={value.id}\n\t\t\t\tonChange={handleTeacherChanged}\n\t\t\t>\n\t\t\t\t{selectItems}\n\t\t\t</Select>\n\t\t</FormControl>\n\t);\n}\n\nTeacherControl.propTypes = propTypes(\n\tPropTypes.shape({\n\t\tid: PropTypes.number.isRequired,\n\t\tname: PropTypes.string.isRequired,\n\t})\n);\n\nexport default TeacherControl;\n","import React, {useCallback} from \"react\";\nimport ListItem from \"@mui/material/ListItem\";\nimport Icon from \"@mui/material/Icon\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport {GetWeekdayName, renderTime} from \"../../../../Helpers\";\nimport SwipeAction from \"../../../../components/SwipeAction\";\nimport {IAttendTime} from \"../../../../types\";\n\ninterface ITimeProps extends IAttendTime {\n\tclassName: string;\n\tonDelete: (time: IAttendTime) => void;\n\tonClick: (time: IAttendTime) => void;\n}\n\nconst TimeItem = ({className, onDelete, onClick, ...time}: ITimeProps) => {\n\tconst handleDelete = useCallback(() => {\n\t\tonDelete(time);\n\t}, [onDelete]);\n\n\tconst handleClick = useCallback(() => {\n\t\tonClick(time);\n\t}, [onClick]);\n\n\treturn (\n\t\t<SwipeAction\n\t\t\tkey={time.id}\n\t\t\tclassName={className + \"-swipe\"}\n\t\t\tonAction={handleDelete}\n\t\t\taction={\n\t\t\t\t<>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tid={`${className}-action__icon-delete`}\n\t\t\t\t\t\tclassName={`${className}-action__icon-delete`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t</Icon>\n\t\t\t\t\t<label\n\t\t\t\t\t\tid={`${className}-action__icon-delete`}\n\t\t\t\t\t\tclassName={`${className}-action__text`}\n\t\t\t\t\t>\n\t\t\t\t\t\tУдалить\n\t\t\t\t\t</label>\n\t\t\t\t</>\n\t\t\t}\n\t\t>\n\t\t\t<ListItem className={className} onClick={handleClick}>\n\t\t\t\t<div className={className + \"__left-content\"}>\n\t\t\t\t\t<span className={\"left-content__weekday\"}>\n\t\t\t\t\t\t{GetWeekdayName(time.weekday)}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"left-content__audience\">\n\t\t\t\t\t\tВ аудитории № {time.audience}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className={className + \"__right-content\"}>\n\t\t\t\t\t<span className=\"right-content__time\">{renderTime(time.time)}</span>\n\t\t\t\t\t<span className=\"right-content__dummy\"></span>\n\t\t\t\t</div>\n\t\t\t</ListItem>\n\t\t</SwipeAction>\n\t);\n};\n\nexport default TimeItem;\n","import React, {useMemo} from \"react\";\nimport List from \"@mui/material/List\";\nimport Divider from \"@mui/material/Divider\";\nimport {IAttendTime, WEEK_TYPE} from \"../../../../types\";\nimport TimeItem from \"./TimeItem\";\n\ninterface ITimeListProps {\n\tcurrentWeek: WEEK_TYPE;\n\ttimes: IAttendTime[];\n\tonDelete: (time: IAttendTime) => void;\n\tonClick: (time: IAttendTime) => void;\n}\n\nconst TimeList = ({currentWeek, times, onDelete, onClick}: ITimeListProps) => {\n\tconst timeNodes = useMemo(\n\t\t() =>\n\t\t\ttimes.map(\n\t\t\t\t(t, i) =>\n\t\t\t\t\tt.weekType === currentWeek && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<TimeItem\n\t\t\t\t\t\t\t\t{...t}\n\t\t\t\t\t\t\t\tkey={`time-list-item-${i}`}\n\t\t\t\t\t\t\t\tclassName=\"time-item\"\n\t\t\t\t\t\t\t\tonDelete={onDelete}\n\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Divider className=\"time-item-divider\" variant=\"middle\" />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t),\n\t\t[currentWeek, times, onDelete, onClick]\n\t);\n\n\treturn <List className=\"time-list\">{timeNodes}</List>;\n};\n\nexport default TimeList;\n","import React, {useCallback, useMemo, useState} from \"react\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport Button from \"@mui/material/Button\";\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\nimport ToggleButton from \"@mui/material/ToggleButton\";\nimport TextField from \"@mui/material/TextField\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport {IAttendTime, WEEK_TYPE, WEEKDAY} from \"../../../../types\";\n\nimport \"./AddTimeDialog.scss\";\nimport {renderTime} from \"../../../../Helpers\";\n\ninterface IProps {\n\topen: boolean;\n\tvalue?: IAttendTime;\n\tweekType: WEEK_TYPE;\n\tonClose: (timeData?: Omit<IAttendTime, \"id\">) => void;\n}\n\nfunction shortWeekdayName(day: WEEKDAY) {\n\tlet date = new Date();\n\tdate.setDate(date.getDate() - (date.getDay() - day));\n\t// const locale = navigator.language || \"ru\";\n\treturn date.toLocaleString(\"ru\", {weekday: \"short\"});\n}\n\nconst times = [\"08:00\", \"09:40\", \"11:20\", \"13:20\", \"15:00\", \"16:40\"];\nconst timeOptions = times.map(time => {\n\tconst startTime = new Date(\"1970-01-01T\" + time).getTime();\n\treturn (\n\t\t<MenuItem key={`menu-item-${startTime}`} value={startTime}>\n\t\t\t{renderTime(startTime)}\n\t\t</MenuItem>\n\t);\n});\n\nconst AddTimeDialog = ({open, value, weekType, onClose}: IProps) => {\n\tconst [weekday, setWeekday] = useState<WEEKDAY>(\n\t\tvalue?.weekday || WEEKDAY.MONDAY\n\t);\n\tconst [time, setTime] = useState<number>(value?.time || -1);\n\tconst [audience, setAudience] = useState<string>(value?.audience || \"\");\n\n\tconst weekdayButtons = useMemo(() => {\n\t\tlet buttons = [];\n\t\tfor (let i = WEEKDAY.MONDAY; i <= WEEKDAY.SUNDAY; ++i) {\n\t\t\tbuttons.push(\n\t\t\t\t<ToggleButton\n\t\t\t\t\tclassName=\"toggle-button\"\n\t\t\t\t\tclasses={{selected: \"toggle-button--selected\"}}\n\t\t\t\t\tvalue={i}\n\t\t\t\t>\n\t\t\t\t\t{shortWeekdayName(i)}\n\t\t\t\t</ToggleButton>\n\t\t\t);\n\t\t}\n\t\treturn buttons;\n\t}, []);\n\n\tconst handleSaveClick = useCallback(() => {\n\t\tonClose({\n\t\t\taudience,\n\t\t\ttime,\n\t\t\tweekday,\n\t\t\tweekType,\n\t\t});\n\t}, [onClose, time, audience, weekday, weekType]);\n\n\tconst handleCancelClick = useCallback(() => {\n\t\tonClose();\n\t}, [onClose]);\n\n\tconst handleWeekdayChange = useCallback(\n\t\t(_, values) => {\n\t\t\tif (values.length < 2) return;\n\t\t\tsetWeekday(values[1]);\n\t\t},\n\t\t[setWeekday]\n\t);\n\n\tconst handleAudienceChange = useCallback(\n\t\t({target}) => void setAudience(target.value),\n\t\t[setAudience]\n\t);\n\n\tconst handleTimeChange = useCallback(\n\t\t({target}) => void setTime(target.value),\n\t\t[setTime]\n\t);\n\n\treturn (\n\t\t<Dialog\n\t\t\tclassName=\"add-time-dialog-wrapper\"\n\t\t\tclasses={{paper: \"add-time-dialog\"}}\n\t\t\topen={open}\n\t\t\tonClose={handleCancelClick}\n\t\t>\n\t\t\t<DialogTitle className=\"add-time-dialog__title\">\n\t\t\t\tВремя проведения\n\t\t\t</DialogTitle>\n\t\t\t<div className=\"add-time-dialog__body\">\n\t\t\t\t<div className=\"add-time-dialog__field\">\n\t\t\t\t\t<label className=\"field-label\">День недели</label>\n\t\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\t\tclassName=\"field-input toggle-button-group\"\n\t\t\t\t\t\tonChange={handleWeekdayChange}\n\t\t\t\t\t\tvalue={[weekday]}\n\t\t\t\t\t>\n\t\t\t\t\t\t{weekdayButtons}\n\t\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"add-time-dialog__field\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tselect\n\t\t\t\t\t\tclassName=\"field-input\"\n\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\tInputLabelProps={{className: \"field-label\"}}\n\t\t\t\t\t\tlabel=\"Время проведения\"\n\t\t\t\t\t\tInputProps={{className: \"field-input__root\"}}\n\t\t\t\t\t\tplaceholder=\"Выберите время проведения занятия\"\n\t\t\t\t\t\tvalue={time}\n\t\t\t\t\t\tonChange={handleTimeChange}\n\t\t\t\t\t>\n\t\t\t\t\t\t{timeOptions}\n\t\t\t\t\t</TextField>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"add-time-dialog__field\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tclassName=\"field-input\"\n\t\t\t\t\t\tonChange={handleAudienceChange}\n\t\t\t\t\t\tInputLabelProps={{className: \"field-label\"}}\n\t\t\t\t\t\tlabel=\"Аудитория\"\n\t\t\t\t\t\tInputProps={{className: \"field-input__root\"}}\n\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\tplaceholder=\"Номер аудитории\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"add-time-dialog__footer\">\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"add-time-dialog__btn cancel-btn\"\n\t\t\t\t\tonClick={handleCancelClick}\n\t\t\t\t>\n\t\t\t\t\tОтмена\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"add-time-dialog__btn save-btn\"\n\t\t\t\t\tonClick={handleSaveClick}\n\t\t\t\t>\n\t\t\t\t\tСохранить\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</Dialog>\n\t);\n};\n\nexport default AddTimeDialog;\n","import React, {useCallback, useState} from \"react\";\nimport TimeIcon from \"@mui/icons-material/AddAlarmOutlined\";\nimport Icon from \"@mui/material/Icon\";\nimport Tab from \"@mui/material/Tab\";\nimport Tabs from \"@mui/material/Tabs\";\nimport TimeList from \"./TimeList\";\nimport {IAttendTime, WEEK_TYPE} from \"../../../../types\";\nimport {actions} from \"../../../../store/schedule/subject\";\nimport AddTimeDialog from \"./AddTimeDialog\";\nimport {IProps} from \"..\";\n\nconst ScheduleTimes = ({dispatch, value}: IProps<IAttendTime[]>) => {\n\tconst [weekType, setWeekType] = useState(WEEK_TYPE.WHITE);\n\tconst [showDialog, setShowDialog] = useState(false);\n\tconst [editTime, setEditTime] = useState<IAttendTime | undefined>();\n\n\tconst handleWeekTypeChange = useCallback(\n\t\t(_, value) => void setWeekType(value),\n\t\t[setWeekType]\n\t);\n\n\tconst toggleDialog = useCallback(\n\t\t() => void setShowDialog(!showDialog),\n\t\t[showDialog]\n\t);\n\n\t//#region TimeList callbacks\n\tconst handleTimeClick = useCallback(\n\t\t(time: IAttendTime) => {\n\t\t\tsetEditTime(time);\n\t\t\tsetShowDialog(true);\n\t\t},\n\t\t[setEditTime, setShowDialog]\n\t);\n\n\tconst handleTimeDelete = useCallback(\n\t\t(time: IAttendTime) => void dispatch(actions.deleteAttendTime(time.id)),\n\t\t[dispatch]\n\t);\n\t//#endregion\n\n\t//#region AddTimeDialog callbacks\n\tconst handleDialogClose = useCallback(\n\t\t(time?: Omit<IAttendTime, \"id\">) => {\n\t\t\tsetShowDialog(false);\n\t\t\tsetEditTime(undefined);\n\t\t\tif (!time) return;\n\t\t\tif (editTime) {\n\t\t\t\tdispatch(\n\t\t\t\t\tactions.updateAttendTime({\n\t\t\t\t\t\t...time,\n\t\t\t\t\t\tid: editTime.id,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdispatch(actions.addAttendTime({time, isCreated: true}));\n\t\t\t}\n\t\t},\n\t\t[dispatch, setShowDialog, editTime]\n\t);\n\t//#endregion\n\n\treturn (\n\t\t<div className=\"schedule-times\">\n\t\t\t<AddTimeDialog\n\t\t\t\topen={showDialog}\n\t\t\t\tonClose={handleDialogClose}\n\t\t\t\tweekType={weekType}\n\t\t\t\tvalue={editTime}\n\t\t\t/>\n\t\t\t<div className=\"schedule-times__header\">\n\t\t\t\t<span className=\"header-title\">Время проведения</span>\n\t\t\t\t<span className=\"header-action\" onClick={toggleDialog}>\n\t\t\t\t\t<span className=\"header-action__text\">Добавить</span>\n\t\t\t\t\t<Icon className=\"header-action__icon\">\n\t\t\t\t\t\t<TimeIcon />\n\t\t\t\t\t</Icon>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<Tabs\n\t\t\t\tclassName=\"schedule-times__week-type-tabs\"\n\t\t\t\tvalue={weekType}\n\t\t\t\tonChange={handleWeekTypeChange}\n\t\t\t\tclasses={{\n\t\t\t\t\tindicator:\n\t\t\t\t\t\t\"week-type-tabs__indicator \" + WEEK_TYPE[weekType].toLowerCase(),\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tclassName=\"schedule-times__week-type white-week\"\n\t\t\t\t\tvalue={WEEK_TYPE.WHITE}\n\t\t\t\t\tlabel=\"Белая неделя\"\n\t\t\t\t/>\n\t\t\t\t<Tab\n\t\t\t\t\tclassName=\"schedule-times__week-type green-week\"\n\t\t\t\t\tvalue={WEEK_TYPE.GREEN}\n\t\t\t\t\tlabel=\"Зеленая неделя\"\n\t\t\t\t/>\n\t\t\t</Tabs>\n\t\t\t<TimeList\n\t\t\t\tcurrentWeek={weekType}\n\t\t\t\ttimes={value}\n\t\t\t\tonClick={handleTimeClick}\n\t\t\t\tonDelete={handleTimeDelete}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default ScheduleTimes;\n","import {PayloadAction} from \"@reduxjs/toolkit\";\nimport subjectReducer, {\n\tACTION_TYPES,\n\tactions as SubjectActions,\n\tSubjectState,\n} from \"../../store/schedule/subject\";\nimport {IAttendTime, ISubject, WithID} from \"../../types\";\nimport {CoreSubject} from \"../../types\";\n\ntype HistoryActionType = WithID<\n\t| ReturnType<typeof SubjectActions[\"deleteAttendTime\"]>\n\t| PayloadAction<WithID<CoreSubject>, ACTION_TYPES.addAttendTime>\n\t| PayloadAction<WithID<Partial<CoreSubject>>, ACTION_TYPES.updateAttendTime>\n>;\n\nexport interface IEditSubjectPageStore {\n\thistory: HistoryActionType[];\n\tstate: SubjectState;\n}\n\nexport type ActionType = ReturnType<\n\ttypeof SubjectActions[keyof typeof SubjectActions]\n>;\n\nfunction updateSubjectProperty(\n\tnewState: SubjectState,\n\toldHistory: HistoryActionType[],\n\tdata: Partial<Omit<ISubject, \"times\">>\n): HistoryActionType[] {\n\tconst newHistory = oldHistory.map<HistoryActionType>(oldAction => {\n\t\tswitch (oldAction.type) {\n\t\t\tcase ACTION_TYPES.deleteAttendTime: {\n\t\t\t\treturn oldAction;\n\t\t\t}\n\t\t\tcase ACTION_TYPES.addAttendTime: {\n\t\t\t\treturn {...oldAction, payload: {...oldAction.payload, ...data}};\n\t\t\t}\n\t\t\tcase ACTION_TYPES.updateAttendTime: {\n\t\t\t\treturn {...oldAction, payload: {...oldAction.payload, ...data}};\n\t\t\t}\n\t\t}\n\t});\n\t// Search all of the attend times that was NOT updated earlier\n\t// and create actions for them\n\treturn newHistory.concat(\n\t\tnewState.times\n\t\t\t.filter(({id}) => !newHistory.find(a => a.id === id))\n\t\t\t.map<HistoryActionType>(time => ({\n\t\t\t\ttype: ACTION_TYPES.updateAttendTime,\n\t\t\t\tid: time.id,\n\t\t\t\tpayload: {...data, id: time.id},\n\t\t\t}))\n\t);\n}\n\nfunction updateAttendProperty(\n\toldHistory: HistoryActionType[],\n\tdata: WithID<Partial<IAttendTime>>\n): HistoryActionType[] {\n\tconst updateActionIndex = oldHistory.findIndex(\n\t\ta => a.type !== ACTION_TYPES.deleteAttendTime && a.id === data.id\n\t);\n\t// If there was no edits\n\tif (updateActionIndex === -1) {\n\t\treturn [\n\t\t\t...oldHistory,\n\t\t\t{type: ACTION_TYPES.updateAttendTime, payload: data, id: data.id},\n\t\t];\n\t}\n\tconst oldAction = oldHistory[updateActionIndex] as PayloadAction<\n\t\tPartial<CoreSubject>\n\t>;\n\t// If current attend time was updated previously\n\treturn [\n\t\t...oldHistory.slice(0, updateActionIndex),\n\t\t{\n\t\t\ttype: ACTION_TYPES.updateAttendTime,\n\t\t\tpayload: {...oldAction.payload, ...data},\n\t\t\tid: data.id,\n\t\t},\n\t\t...oldHistory.slice(updateActionIndex + 1),\n\t];\n}\n\nconst reducer = (\n\t{history, state}: IEditSubjectPageStore,\n\taction: ActionType\n): IEditSubjectPageStore => {\n\tconst newState = subjectReducer(state, action);\n\tlet newHistory: typeof history = [];\n\tswitch (action.type) {\n\t\t// Subject actions\n\t\tcase ACTION_TYPES.updateProperty: {\n\t\t\tconst {property, value} = action.payload;\n\t\t\tnewHistory = updateSubjectProperty(newState, history, {\n\t\t\t\t[property]: value,\n\t\t\t});\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_TYPES.update: {\n\t\t\tconst {title, teacher, type, ...attendTime} = action.payload;\n\t\t\tnewHistory = updateAttendProperty(\n\t\t\t\tupdateSubjectProperty(newState, history, {title, type, teacher}),\n\t\t\t\tattendTime\n\t\t\t);\n\t\t\tbreak;\n\t\t}\n\t\t//\n\t\tcase ACTION_TYPES.updateAttendTime: {\n\t\t\tnewHistory = updateAttendProperty(history, action.payload);\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_TYPES.updateAttendTimeProperty: {\n\t\t\tconst {id, property, value} = action.payload;\n\t\t\tnewHistory = updateAttendProperty(history, {id, [property]: value});\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_TYPES.addAttendTime: {\n\t\t\tconst {id} = newState.times[newState.times.length - 1];\n\t\t\tnewHistory = [\n\t\t\t\t...history,\n\t\t\t\t{\n\t\t\t\t\ttype: action.type,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tteacher: newState.teacher,\n\t\t\t\t\t\ttitle: newState.title,\n\t\t\t\t\t\ttype: newState.type,\n\t\t\t\t\t\t...action.payload.time,\n\t\t\t\t\t},\n\t\t\t\t\tid,\n\t\t\t\t},\n\t\t\t];\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_TYPES.deleteAttendTime: {\n\t\t\tconst id = action.payload;\n\t\t\tnewHistory = history.filter(a => a.id !== id);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn {state: newState, history: newHistory};\n};\n\nexport default reducer;\n","import {useEffect, useReducer, useState} from \"react\";\nimport {useLocation, useNavigate} from \"react-router\";\n// MUI\nimport Dialog from \"@mui/material/Dialog\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport Icon from \"@mui/material/Icon\";\nimport CheckIcon from \"@mui/icons-material/Check\";\n\nimport TitleControl from \"./FormControls/TitleControl\";\nimport TypeControl from \"./FormControls/TypeControl\";\nimport TeacherControl from \"./FormControls/TeacherControl\";\nimport ScheduleTimes from \"./FormControls/ScheduleTimes\";\nimport reducer, {IEditSubjectPageStore} from \"./reducer\";\nimport {useDispatch, useSelector} from \"../../store\";\nimport {actions as ScheduleActions} from \"../../store/schedule\";\nimport {\n\tACTION_TYPES,\n\tactions as SubjectActions,\n\tinitialState,\n} from \"../../store/schedule/subject\";\nimport {actions as HeaderActions} from \"../../store/app/header\";\nimport ScheduleAPI from \"../../API\";\n\nimport \"../../styles/EditSubjectPage.scss\";\n\nfunction EditSubjectPage() {\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst reduxDispatch = useDispatch();\n\tconst [saved, setSaved] = useState(false);\n\tconst {editMode, shouldSave, group} = useSelector(\n\t\t({application, schedule}) => ({\n\t\t\teditMode: schedule.editMode,\n\t\t\tshouldSave: application.header.save,\n\t\t\tgroup: schedule.currentGroup,\n\t\t})\n\t);\n\n\tlet attendTimeId: number | undefined;\n\tif (location.search) {\n\t\tconst params = new URLSearchParams(location.search);\n\t\tattendTimeId = Number(params.get(\"id\"));\n\t}\n\n\tconst initState = useSelector<IEditSubjectPageStore>(({schedule}) => {\n\t\tif (!attendTimeId) return {state: initialState, history: []};\n\t\tconst subject = schedule.subjects.find(s => {\n\t\t\treturn !!s.times.find(t => t.id === attendTimeId);\n\t\t});\n\t\tif (!subject) return {state: initialState, history: []};\n\t\treturn {history: [], state: subject};\n\t});\n\tconst [{history, state}, dispatch] = useReducer(reducer, initState);\n\n\tuseEffect(() => {\n\t\tif (!shouldSave) return;\n\t\tconst promises = history.map(action => {\n\t\t\tswitch (action.type) {\n\t\t\t\tcase ACTION_TYPES.addAttendTime: {\n\t\t\t\t\tconst {type, teacher, title, time, weekday, weekType, audience} =\n\t\t\t\t\t\taction.payload;\n\t\t\t\t\treturn ScheduleAPI.createAttendTime(\n\t\t\t\t\t\t{type, teacher, title},\n\t\t\t\t\t\t{time, weekday, audience, weekType},\n\t\t\t\t\t\tgroup\n\t\t\t\t\t).then(createdSubject => {\n\t\t\t\t\t\tif (!createdSubject) return;\n\t\t\t\t\t\treduxDispatch(\n\t\t\t\t\t\t\tScheduleActions.updateSubject({\n\t\t\t\t\t\t\t\ttitle: initState.state.title,\n\t\t\t\t\t\t\t\ttype: initState.state.type,\n\t\t\t\t\t\t\t\tteacher: initState.state.teacher,\n\t\t\t\t\t\t\t\taction: SubjectActions.addAttendTime({\n\t\t\t\t\t\t\t\t\tisCreated: false,\n\t\t\t\t\t\t\t\t\ttime: createdSubject,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\treduxDispatch(\n\t\t\t\t\t\t\tScheduleActions.updateSubject({\n\t\t\t\t\t\t\t\ttitle: initState.state.title,\n\t\t\t\t\t\t\t\ttype: initState.state.type,\n\t\t\t\t\t\t\t\tteacher: initState.state.teacher,\n\t\t\t\t\t\t\t\taction: SubjectActions.update(createdSubject),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcase ACTION_TYPES.deleteAttendTime: {\n\t\t\t\t\treturn ScheduleAPI.deleteSubject(action.payload).then(success => {\n\t\t\t\t\t\tif (!success) return;\n\t\t\t\t\t\treduxDispatch(\n\t\t\t\t\t\t\tScheduleActions.updateSubject({\n\t\t\t\t\t\t\t\ttitle: initState.state.title,\n\t\t\t\t\t\t\t\ttype: initState.state.type,\n\t\t\t\t\t\t\t\tteacher: initState.state.teacher,\n\t\t\t\t\t\t\t\taction: SubjectActions.deleteAttendTime(action.payload),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcase ACTION_TYPES.updateAttendTime: {\n\t\t\t\t\treturn ScheduleAPI.updateSubject(action.payload).then(success => {\n\t\t\t\t\t\tif (!success) return;\n\t\t\t\t\t\treduxDispatch(\n\t\t\t\t\t\t\tScheduleActions.updateSubject({\n\t\t\t\t\t\t\t\ttitle: initState.state.title,\n\t\t\t\t\t\t\t\ttype: initState.state.type,\n\t\t\t\t\t\t\t\tteacher: initState.state.teacher,\n\t\t\t\t\t\t\t\taction: SubjectActions.update(action.payload),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tPromise.all(promises).then(() => {\n\t\t\tsetSaved(true);\n\t\t\tsetTimeout(() => {\n\t\t\t\treduxDispatch(HeaderActions.setSave(false));\n\t\t\t\tnavigate(`/schedule?group=${group}`, {replace: true});\n\t\t\t}, 1000);\n\t\t});\n\t}, [shouldSave, history, reduxDispatch]);\n\n\tif (editMode !== \"create\" && !attendTimeId) {\n\t\tnavigate(\"/schedule\", {replace: true});\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"page edit-subject-page\">\n\t\t\t<Dialog\n\t\t\t\tclassName=\"edit-subject-page__save-dialog-container\"\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper: \"edit-subject-page__save-dialog\",\n\t\t\t\t}}\n\t\t\t\topen={shouldSave}\n\t\t\t>\n\t\t\t\t<CircularProgress\n\t\t\t\t\tid=\"save-dialog__progress\"\n\t\t\t\t\tclassName={`save-dialog__progress ${\n\t\t\t\t\t\tsaved ? \"save-dialog__progress--saved\" : \"\"\n\t\t\t\t\t}`}\n\t\t\t\t\tdisableShrink\n\t\t\t\t\tcolor={saved ? \"success\" : \"primary\"}\n\t\t\t\t\tvariant={saved ? \"determinate\" : \"indeterminate\"}\n\t\t\t\t\tvalue={saved ? 100 : undefined}\n\t\t\t\t/>\n\t\t\t\t{saved && (\n\t\t\t\t\t<Icon className=\"save-dialog__icon\">\n\t\t\t\t\t\t<CheckIcon />\n\t\t\t\t\t</Icon>\n\t\t\t\t)}\n\t\t\t\t<label htmlFor=\"save-dialog__progress\" className=\"save-dialog__label\">\n\t\t\t\t\t{saved ? \"Сохранено\" : \"Сохранение\"}\n\t\t\t\t</label>\n\t\t\t</Dialog>\n\t\t\t<form className=\"edit-subject-form\">\n\t\t\t\t<TitleControl dispatch={dispatch} value={state.title} />\n\t\t\t\t<TypeControl dispatch={dispatch} value={state.type} />\n\t\t\t\t<TeacherControl dispatch={dispatch} value={state.teacher} />\n\t\t\t\t<ScheduleTimes dispatch={dispatch} value={state.times} />\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default EditSubjectPage;\n","import React, {useCallback, useMemo, useRef, useState} from \"react\";\nimport {useNavigate} from \"react-router\";\nimport FormControl from \"@mui/material/FormControl\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport Input from \"@mui/material/Input\";\nimport FormHelperText from \"@mui/material/FormHelperText\";\nimport Button from \"@mui/material/Button\";\nimport ScheduleAPI from \"../API\";\nimport {useDispatch} from \"../store\";\nimport {actions as appActions} from \"../store/app\";\n\nimport \"../styles/LoginPage.scss\";\n\nfunction LoginPage() {\n\tconst [isError, setError] = useState(false);\n\tconst loginRef = useRef<HTMLInputElement>(null);\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\tconst navigate = useNavigate();\n\tconst dispatch = useDispatch();\n\n\t//#region CALLBACKS\n\tconst handleSubmit = useCallback<React.FormEventHandler<HTMLFormElement>>(\n\t\te => {\n\t\t\te.preventDefault();\n\t\t\tconst login: string = e.currentTarget.user_login.value;\n\t\t\tconst password: string = e.currentTarget.user_password.value;\n\t\t\tif (!login || !password) {\n\t\t\t\tsetError(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tScheduleAPI.authenticate(login, password).then(user => {\n\t\t\t\t\tif (!user) {\n\t\t\t\t\t\tsetError(true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tdispatch(appActions.setUser(user));\n\t\t\t\t\tnavigate(`/schedule?group=${user.group?.id}`, {\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t},\n\t\t[setError, navigate, dispatch]\n\t);\n\n\tconst handleInputChange = useCallback<\n\t\tReact.ChangeEventHandler<HTMLInputElement>\n\t>(() => {\n\t\tif (isError) setError(false);\n\t}, [isError, setError]);\n\t//#endregion\n\n\tconst helperText: [string, string] = useMemo(() => {\n\t\tlet text: [string, string] = [\"\", \"\"];\n\t\tif (isError) {\n\t\t\tif (loginRef.current?.value) {\n\t\t\t\ttext[0] = \"Неверный логин или пароль\";\n\t\t\t} else {\n\t\t\t\ttext[0] = \"Поле не должно быть пустым\";\n\t\t\t}\n\t\t\tif (passwordRef.current?.value) {\n\t\t\t\ttext[1] = \"Неверный логин или пароль\";\n\t\t\t} else {\n\t\t\t\ttext[1] = \"Поле не должно быть пустым\";\n\t\t\t}\n\t\t}\n\t\treturn text;\n\t}, [isError]);\n\n\treturn (\n\t\t<div className=\"page login-page\">\n\t\t\t<h1 className=\"login-page__title\">Расписание ЛГТУ</h1>\n\t\t\t<form className=\"login-page__form\" onSubmit={handleSubmit} method=\"post\">\n\t\t\t\t<FormControl\n\t\t\t\t\tclassName={`login-page__form-control ${isError ? \"error\" : \"\"}`}\n\t\t\t\t>\n\t\t\t\t\t<InputLabel className=\"form-control__label\" htmlFor=\"user_login\">\n\t\t\t\t\t\tЛогин:\n\t\t\t\t\t</InputLabel>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tinputRef={loginRef}\n\t\t\t\t\t\tclassName=\"form-control__input\"\n\t\t\t\t\t\tid=\"user_login\"\n\t\t\t\t\t\tname=\"user_login\"\n\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormHelperText className=\"form-control__helper-text\">\n\t\t\t\t\t\t{helperText[0]}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t<FormControl\n\t\t\t\t\tclassName={`login-page__form-control ${isError ? \"error\" : \"\"}`}\n\t\t\t\t>\n\t\t\t\t\t<InputLabel className=\"form-control__label\" htmlFor=\"user_password\">\n\t\t\t\t\t\tПароль:\n\t\t\t\t\t</InputLabel>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tinputRef={passwordRef}\n\t\t\t\t\t\tclassName=\"form-control__input\"\n\t\t\t\t\t\tid=\"user_password\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"user_password\"\n\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormHelperText className=\"form-control__helper-text\">\n\t\t\t\t\t\t{helperText[1]}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t<Button className=\"login-page__button\" type=\"submit\">\n\t\t\t\t\tВойти\n\t\t\t\t</Button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default LoginPage;\n","import React, {useCallback, useMemo} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport {FACULTY} from \"../../types\";\n\ninterface IFacultyProps {\n\ttitle: string;\n}\n\nconst Faculty = ({title}: IFacultyProps) => {\n\tconst navigate = useNavigate();\n\tconst handleClick = useCallback(() => {\n\t\tnavigate(`/groups/${title}`);\n\t}, [title, navigate]);\n\treturn (\n\t\t<div className=\"faculty\" onClick={handleClick}>\n\t\t\t<div className=\"faculty-background\"></div>\n\t\t\t<h3 className=\"faculty-title\">{title}</h3>\n\t\t</div>\n\t);\n};\nFaculty.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n};\n\nconst FacultiesView = () => {\n\tconst facultyElements = useMemo(\n\t\t() => Object.values(FACULTY).map(f => <Faculty key={f} title={f} />),\n\t\t[]\n\t);\n\treturn <div className=\"faculties-wrapper\">{facultyElements}</div>;\n};\nFacultiesView.propTypes = {\n\tonFacultyClick: PropTypes.func,\n};\n\nexport default FacultiesView;\n","import React, {useCallback, useMemo} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport ChevronDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListSubheader from \"@mui/material/ListSubheader\";\nimport {BACHELOR_MAX, Course, ISpecialty} from \"../types\";\n\nimport \"../styles/SpecialtyAccordion.scss\";\n\nconst SpecialtyAccordion = ({title, courses}: ISpecialty) => {\n\tconst navigate = useNavigate();\n\t//#region CALLBACKS\n\tconst handleCourseClick = useCallback<React.MouseEventHandler>(\n\t\t({currentTarget}) => {\n\t\t\tconst elementId = currentTarget.id;\n\t\t\tconst id = parseInt(elementId.split(\"course-\")[1]);\n\t\t\tnavigate(`/schedule?group=${id}`);\n\t\t},\n\t\t[navigate]\n\t);\n\t//#endregion\n\t//#region MEMO\n\tconst [bachelorGroups, magistracyGroups] = useMemo(() => {\n\t\tconst keys = Object.keys(courses).map(c => Number(c)) as Course[];\n\t\tlet bachelor: JSX.Element[] = [];\n\t\tlet magistracy: JSX.Element[] = [];\n\t\tkeys.sort().forEach(courseNumber => {\n\t\t\tif (courseNumber > BACHELOR_MAX) {\n\t\t\t\tmagistracy.push(\n\t\t\t\t\t<ListItem\n\t\t\t\t\t\tkey={`course-magistracy-${courseNumber}-${courses[courseNumber]}`}\n\t\t\t\t\t\tid={`course-${courses[courseNumber]}`}\n\t\t\t\t\t\tonClick={handleCourseClick}\n\t\t\t\t\t\tclassName=\"specialty-course\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{courseNumber - BACHELOR_MAX} курс\n\t\t\t\t\t</ListItem>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tbachelor.push(\n\t\t\t\t\t<ListItem\n\t\t\t\t\t\tkey={`course-bachelor-${courseNumber}-${courses[courseNumber]}`}\n\t\t\t\t\t\tid={`course-${courses[courseNumber]}`}\n\t\t\t\t\t\tonClick={handleCourseClick}\n\t\t\t\t\t\tclassName=\"specialty-course\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{courseNumber} курс\n\t\t\t\t\t</ListItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn;\n\t\t});\n\t\treturn [bachelor, magistracy];\n\t}, [courses, handleCourseClick]);\n\t//#endregion\n\treturn (\n\t\t<Accordion\n\t\t\tdisableGutters\n\t\t\tclassName=\"specialty\"\n\t\t\tTransitionProps={{unmountOnExit: true}}\n\t\t\televation={0}\n\t\t>\n\t\t\t<AccordionSummary\n\t\t\t\tclassName=\"specialty-summary\"\n\t\t\t\texpandIcon={<ChevronDownIcon sx={{fontSize: \"1rem\"}} />}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</AccordionSummary>\n\t\t\t<AccordionDetails className=\"specialty-details\">\n\t\t\t\t<List className=\"specialty-details-list\">\n\t\t\t\t\t{!!bachelorGroups.length && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ListSubheader className=\"specialty-details-list__subheader specialty-course\">\n\t\t\t\t\t\t\t\tБакалавриат\n\t\t\t\t\t\t\t</ListSubheader>\n\t\t\t\t\t\t\t{bachelorGroups}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{!!magistracyGroups.length && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ListSubheader className=\"specialty-details-list__subheader specialty-course\">\n\t\t\t\t\t\t\t\tМагистратура\n\t\t\t\t\t\t\t</ListSubheader>\n\t\t\t\t\t\t\t{magistracyGroups}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</List>\n\t\t\t</AccordionDetails>\n\t\t</Accordion>\n\t);\n};\n\nexport default SpecialtyAccordion;\n","import React, {useCallback, useMemo, useState} from \"react\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport TextField from \"@mui/material/TextField\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\nimport ListSubheader from \"@mui/material/ListSubheader\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Button from \"@mui/material/Button\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport Alert from \"@mui/material/Alert\";\nimport {\n\tBACHELOR_MAX,\n\tCourse,\n\tFACULTY,\n\tIGroup,\n\tMAGISTRACY_MAX,\n} from \"../../types\";\n\nimport \"./CreateDialog.scss\";\nimport ScheduleAPI from \"../../API\";\nimport {calculateYear} from \"../../Helpers\";\n\ninterface IProps {\n\tfaculty: FACULTY;\n\topen: boolean;\n\tonClose: (group?: IGroup) => void;\n}\n\ninterface IFieldsState {\n\tname: string;\n\tcourse: Course;\n}\n\nconst CreateDialog = ({faculty, open, onClose}: IProps) => {\n\tconst [fields, setFields] = useState<IFieldsState>({\n\t\tname: \"\",\n\t\tcourse: 1,\n\t});\n\tconst [isCreating, setCreating] = useState(false);\n\tconst [error, setError] = useState<string>();\n\n\tconst handleFieldChange = useCallback<\n\t\tReact.ChangeEventHandler<HTMLInputElement>\n\t>(\n\t\t({target}) => {\n\t\t\tconst {name, value} = target;\n\t\t\tsetFields({...fields, [name]: value});\n\t\t},\n\t\t[setFields, fields]\n\t);\n\n\tconst handleDialogClose = useCallback(() => {\n\t\tif (isCreating) return;\n\t\tonClose();\n\t}, [isCreating]);\n\n\tconst courseOptions = useMemo(() => {\n\t\tlet options = [];\n\t\toptions.push(\n\t\t\t<ListSubheader\n\t\t\t\tkey=\"create-specialty-dialog__select-bachelor\"\n\t\t\t\tclassName=\"create-specialty-dialog__select-subheader\"\n\t\t\t>\n\t\t\t\tБакалавриат\n\t\t\t</ListSubheader>\n\t\t);\n\t\tfor (let i = 0; i < BACHELOR_MAX; ++i) {\n\t\t\toptions.push(\n\t\t\t\t<MenuItem\n\t\t\t\t\tkey={`create-specialty-dialog__select-bachelor-${i}`}\n\t\t\t\t\tclassName=\"create-specialty-dialog__select-option\"\n\t\t\t\t\tvalue={(i + 1).toString()}\n\t\t\t\t>\n\t\t\t\t\t{i + 1} курс\n\t\t\t\t</MenuItem>\n\t\t\t);\n\t\t}\n\t\toptions.push(\n\t\t\t<ListSubheader\n\t\t\t\tkey=\"create-specialty-dialog__select-magistrary\"\n\t\t\t\tclassName=\"create-specialty-dialog__select-subheader\"\n\t\t\t>\n\t\t\t\tМагистратура\n\t\t\t</ListSubheader>\n\t\t);\n\t\tfor (let i = 0; i < MAGISTRACY_MAX; ++i) {\n\t\t\toptions.push(\n\t\t\t\t<MenuItem\n\t\t\t\t\tkey={`create-specialty-dialog__select-magistrary-${i}`}\n\t\t\t\t\tclassName=\"create-specialty-dialog__select-option\"\n\t\t\t\t\tvalue={(BACHELOR_MAX + i + 1).toString()}\n\t\t\t\t>\n\t\t\t\t\t{i + 1} курс\n\t\t\t\t</MenuItem>\n\t\t\t);\n\t\t}\n\t\treturn options;\n\t}, []);\n\n\tconst handleCreateClick = useCallback(() => {\n\t\tsetCreating(true);\n\t\tconst abortController = new AbortController();\n\t\tconst group: Omit<IGroup, \"id\"> = {\n\t\t\tfaculty,\n\t\t\tyear: calculateYear(fields.course),\n\t\t\tspecialty: fields.name,\n\t\t};\n\t\tScheduleAPI.createGroup(group, abortController)\n\t\t\t.then(group => {\n\t\t\t\tif (!group) {\n\t\t\t\t\tsetError(\"Группа уже существует\");\n\t\t\t\t\tsetCreating(false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetCreating(false);\n\t\t\t\tonClose(group);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tif (!abortController.signal.aborted) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t\tonClose();\n\t\t\t});\n\t\treturn () => {\n\t\t\tabortController.abort();\n\t\t};\n\t}, [faculty, fields]);\n\n\treturn (\n\t\t<Dialog\n\t\t\tclassName=\"create-specialty-dialog-wrapper\"\n\t\t\tclasses={{\n\t\t\t\tpaper: \"create-specialty-dialog\",\n\t\t\t}}\n\t\t\topen={open}\n\t\t\tonClose={handleDialogClose}\n\t\t>\n\t\t\t<Snackbar\n\t\t\t\topen={!!error}\n\t\t\t\tautoHideDuration={3000}\n\t\t\t\tonClose={() => void setError(undefined)}\n\t\t\t\tclassName=\"create-specialty-dialog__snackbar\"\n\t\t\t\tanchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n\t\t\t>\n\t\t\t\t<Alert className=\"snackbar-alert\" variant=\"filled\" severity=\"error\">\n\t\t\t\t\t{error}\n\t\t\t\t</Alert>\n\t\t\t</Snackbar>\n\t\t\t<DialogTitle className=\"create-specialty-dialog__title\">\n\t\t\t\tСоздание группы\n\t\t\t</DialogTitle>\n\t\t\t<TextField\n\t\t\t\trequired\n\t\t\t\tclassName=\"create-specialty-dialog__field\"\n\t\t\t\tvariant=\"standard\"\n\t\t\t\tmultiline\n\t\t\t\tmaxRows={4}\n\t\t\t\tlabel=\"Специальность\"\n\t\t\t\tplaceholder=\"Название специальности\"\n\t\t\t\tname=\"name\"\n\t\t\t\tvalue={fields.name}\n\t\t\t\tonChange={handleFieldChange}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: \"field-label\",\n\t\t\t\t}}\n\t\t\t\tinputProps={{\n\t\t\t\t\tclassName: \"field-input\",\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<TextField\n\t\t\t\trequired\n\t\t\t\tselect\n\t\t\t\tclassName=\"create-specialty-dialog__field\"\n\t\t\t\tvariant=\"standard\"\n\t\t\t\tlabel=\"Курс\"\n\t\t\t\tname=\"course\"\n\t\t\t\tvalue={fields.course}\n\t\t\t\tonChange={handleFieldChange}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: \"field-label\",\n\t\t\t\t}}\n\t\t\t\tInputProps={{\n\t\t\t\t\tstartAdornment: (\n\t\t\t\t\t\t<InputAdornment position=\"start\" className=\"field-input__adornment\">\n\t\t\t\t\t\t\t{fields.course > BACHELOR_MAX ? \"М\" : \"Б\"}\n\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t),\n\t\t\t\t}}\n\t\t\t\tinputProps={{\n\t\t\t\t\tclassName: \"field-input\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{courseOptions}\n\t\t\t</TextField>\n\t\t\t<Button\n\t\t\t\tclassName=\"create-specialty-dialog__btn\"\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tonClick={handleCreateClick}\n\t\t\t>\n\t\t\t\t{isCreating ? <CircularProgress color=\"inherit\" /> : \"Создать\"}\n\t\t\t</Button>\n\t\t</Dialog>\n\t);\n};\n\nexport default CreateDialog;\n","import React, {useCallback, useMemo, useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport FAB from \"@mui/material/Fab\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport Alert from \"@mui/material/Alert\";\nimport {FACULTY, IGroup} from \"../../types\";\nimport useSpecialties from \"../../hooks/useSpecialties\";\nimport SpecialtyAccordion from \"../../components/SpecialtyAccordion\";\nimport CreateDialog from \"./CreateDialog\";\nimport {calculateCourse} from \"../../Helpers\";\n\ninterface IProps {\n\tfaculty: FACULTY;\n}\n\nfunction SpecialtiesView({faculty}: IProps) {\n\tconst [specialties, setSpecialties, isLoading] = useSpecialties(\n\t\tfaculty as FACULTY\n\t);\n\tconst [showDialog, setShowDialog] = useState(false);\n\tconst [showAlert, setShowAlert] = useState(false);\n\n\tconst specialtyElements = useMemo(\n\t\t() => specialties.map(s => <SpecialtyAccordion key={s.title} {...s} />),\n\t\t[specialties]\n\t);\n\n\tconst handleAddClick = useCallback(() => {\n\t\tsetShowDialog(true);\n\t}, [setShowDialog]);\n\n\tconst handleDialogClose = useCallback<(group?: IGroup | undefined) => void>(\n\t\tgroup => {\n\t\t\tif (!group) return setShowDialog(false);\n\t\t\tlet index = specialties.findIndex(({title}) => title === group.specialty);\n\t\t\tconst course = calculateCourse(group.year);\n\t\t\tif (index !== -1) {\n\t\t\t\tconst specialty = specialties[index];\n\t\t\t\tspecialty.courses[course] = group.id;\n\t\t\t\tsetSpecialties([\n\t\t\t\t\t...specialties.slice(0, index),\n\t\t\t\t\tspecialty,\n\t\t\t\t\t...specialties.slice(index),\n\t\t\t\t]);\n\t\t\t\tsetShowAlert(true);\n\t\t\t} else {\n\t\t\t\tconst specialty = {\n\t\t\t\t\ttitle: group.specialty,\n\t\t\t\t\tcourses: {[course]: group.id},\n\t\t\t\t};\n\t\t\t\tsetSpecialties([...specialties, specialty]);\n\t\t\t\tsetShowAlert(true);\n\t\t\t}\n\t\t},\n\t\t[setShowAlert, setShowDialog, setSpecialties, specialties]\n\t);\n\n\treturn (\n\t\t<div className=\"specialties-wrapper\">\n\t\t\t<Snackbar\n\t\t\t\tclassName=\"specialties-wrapper-snackbar\"\n\t\t\t\topen={showAlert}\n\t\t\t\tautoHideDuration={2000}\n\t\t\t\tonClose={() => void setShowAlert(false)}\n\t\t\t>\n\t\t\t\t<Alert\n\t\t\t\t\tclassName=\"specialties-wrapper-snackbar__alert\"\n\t\t\t\t\tseverity=\"success\"\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t>\n\t\t\t\t\tГруппа успешно добавлена\n\t\t\t\t</Alert>\n\t\t\t</Snackbar>\n\t\t\t<CreateDialog\n\t\t\t\tfaculty={faculty}\n\t\t\t\topen={showDialog}\n\t\t\t\tonClose={handleDialogClose}\n\t\t\t/>\n\t\t\t<FAB\n\t\t\t\tclassName=\"specialties-wrapper__fab\"\n\t\t\t\tsize=\"large\"\n\t\t\t\tvariant=\"circular\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tonClick={handleAddClick}\n\t\t\t>\n\t\t\t\t<AddIcon className=\"fab-icon\" />\n\t\t\t</FAB>\n\t\t\t{specialtyElements.length\n\t\t\t\t? specialtyElements\n\t\t\t\t: !isLoading && (\n\t\t\t\t\t\t<div className=\"specialties-wrapper__no-items\">\n\t\t\t\t\t\t\t<h3 className=\"no-items__header\">Упс, ничего не найдено!</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t  )}\n\t\t</div>\n\t);\n}\n\nSpecialtiesView.propTypes = {\n\tfaculty: PropTypes.string.isRequired,\n};\n\nexport default SpecialtiesView;\n","import React, {useMemo} from \"react\";\nimport {useLocation} from \"react-router-dom\";\nimport FacultiesView from \"./FacultiesView\";\nimport SpecialtiesView from \"./SpecialtiesView\";\nimport {FACULTY} from \"../../types\";\n\nimport \"../../styles/GroupsListPage.scss\";\n\nconst GroupsListPage = () => {\n\tconst location = useLocation();\n\tconst currentFaculty = useMemo<FACULTY | undefined>(() => {\n\t\tconst uri = location.pathname.split(\"/\");\n\t\tif (uri[uri.length - 1] !== \"groups\") {\n\t\t\treturn decodeURIComponent(uri[uri.length - 1]) as FACULTY;\n\t\t}\n\t\treturn;\n\t}, [location.pathname]);\n\treturn (\n\t\t<div className=\"page groups-list-page\">\n\t\t\t{currentFaculty ? (\n\t\t\t\t<SpecialtiesView faculty={currentFaculty} />\n\t\t\t) : (\n\t\t\t\t<FacultiesView />\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default GroupsListPage;\n","import React from \"react\";\nimport \"../styles/Page404.scss\";\n\nconst Page404 = () => (\n\t<div className=\"page page-404\">\n\t\t<h1 className=\"header\">ИДИ НАХУЙ КЕРИЛ!!!</h1>\n\t\t<p className=\"text\">\n\t\t\tТы уже заебал ломать все, что только можно и нельзя. Успокойся, иначе я\n\t\t\tтебе уебу, если в твоих руках это хрупкое приложение сломается.\n\t\t</p>\n\t\t<p className=\"text center\">Спасибо за понимание</p>\n\t</div>\n);\n\nexport default Page404;\n","import React, {\n\tforwardRef,\n\tuseCallback,\n\tuseEffect,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseReducer,\n\tuseState,\n} from \"react\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport TextField from \"@mui/material/TextField\";\nimport {SelectChangeEvent} from \"@mui/material/Select\";\nimport ScheduleAPI from \"../../API\";\nimport {Course, FACULTY, IGroup, ISpecialty} from \"../../types\";\n\ntype Action = {type: string; payload: any};\ntype IState = Omit<IGroup, \"faculty\"> & {faculty: string};\n\nconst groupReducer: React.Reducer<IState, Action> = (state, action) => {\n\tswitch (action.type) {\n\t\tcase \"SET-ID\":\n\t\tcase \"SET-FACULTY\":\n\t\tcase \"SET-SPECIALTY\":\n\t\tcase \"SET-YEAR\": {\n\t\t\tconst key = action.type.split(\"SET-\")[1].toLowerCase();\n\t\t\treturn {...state, [key]: action.payload};\n\t\t}\n\t\tcase \"SET-STATE\": {\n\t\t\treturn action.payload;\n\t\t}\n\t\tcase \"COMBINED\": {\n\t\t\tconst updatedState = (action.payload as Action[]).reduce<IState>(\n\t\t\t\t(s, a) => {\n\t\t\t\t\tconst newState = groupReducer(s, a);\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...s,\n\t\t\t\t\t\t...newState,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tstate\n\t\t\t);\n\t\t\treturn updatedState;\n\t\t}\n\t}\n\treturn state;\n};\n\nexport interface IGroupSelect {\n\tgetState: () => IGroup;\n}\n\nconst GroupSelect = forwardRef(({isError}: {isError: boolean}, ref) => {\n\tconst [group, dispatch] = useReducer<typeof groupReducer>(groupReducer, {\n\t\tid: 0,\n\t\tfaculty: \"\",\n\t\tspecialty: \"\",\n\t\tyear: 0,\n\t});\n\tconst [specialties, setSpecialties] = useState<ISpecialty[]>([]);\n\tuseImperativeHandle<any, IGroupSelect>(\n\t\tref,\n\t\t() => ({\n\t\t\tgetState: () => ({...group, faculty: group.faculty as FACULTY}),\n\t\t}),\n\t\t[group]\n\t);\n\n\tconst facultyOptions = useMemo(\n\t\t() =>\n\t\t\tObject.values(FACULTY).map(faculty => (\n\t\t\t\t<MenuItem key={faculty} value={faculty}>\n\t\t\t\t\t{faculty}\n\t\t\t\t</MenuItem>\n\t\t\t)),\n\t\t[]\n\t);\n\n\tconst groupOptions = useMemo(\n\t\t() =>\n\t\t\tspecialties.reduce<JSX.Element[]>((options, specialty) => {\n\t\t\t\tlet shortName = specialty.title\n\t\t\t\t\t.split(\" \")\n\t\t\t\t\t.reduce((s, w) => (s += w[0].toUpperCase()), \"\");\n\t\t\t\tconst date = new Date();\n\t\t\t\tconst newOptions = Object.keys(specialty.courses).map<JSX.Element>(\n\t\t\t\t\tcourseNumber => {\n\t\t\t\t\t\tlet year = date.getFullYear() - Number(courseNumber);\n\t\t\t\t\t\tif (date.getMonth() >= 9) year += 1;\n\t\t\t\t\t\tconst item = {\n\t\t\t\t\t\t\tname: `${shortName}-${year.toString().slice(-2)}`,\n\t\t\t\t\t\t\tvalue: specialty.courses[Number(courseNumber) as Course],\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey={item.name}\n\t\t\t\t\t\t\t\titemProp={specialty.title}\n\t\t\t\t\t\t\t\tplaceholder={year.toString()}\n\t\t\t\t\t\t\t\tvalue={item.value}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn options.concat(newOptions);\n\t\t\t}, []),\n\t\t[specialties]\n\t);\n\n\tuseEffect(() => {\n\t\tif (!group.faculty) return;\n\t\tconst abortController = new AbortController();\n\t\ttry {\n\t\t\tScheduleAPI.fetchSpecialties(group.faculty, abortController).then(\n\t\t\t\tspecialties => {\n\t\t\t\t\tif (!specialties) return;\n\t\t\t\t\tsetSpecialties(specialties);\n\t\t\t\t}\n\t\t\t);\n\t\t} catch (err) {\n\t\t\tif (!abortController.signal.aborted) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t} finally {\n\t\t\treturn () => {\n\t\t\t\tabortController.abort();\n\t\t\t};\n\t\t}\n\t}, [group.faculty, setSpecialties]);\n\n\tconst handleSelectChange = useCallback<\n\t\t(e: SelectChangeEvent<unknown>, node: any) => void\n\t>(\n\t\t({target}, node) => {\n\t\t\tlet action: Action = {type: \"\", payload: target.value};\n\t\t\tswitch (target.name) {\n\t\t\t\tcase \"group_faculty\":\n\t\t\t\t\taction.type = \"SET-FACULTY\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"group_name\": {\n\t\t\t\t\tconst {placeholder: year, itemProp: specialty} = node.props;\n\t\t\t\t\taction.type = \"COMBINED\";\n\t\t\t\t\taction.payload = [\n\t\t\t\t\t\t{type: \"SET-SPECIALTY\", payload: specialty},\n\t\t\t\t\t\t{type: \"SET-ID\", payload: target.value},\n\t\t\t\t\t\t{type: \"SET-YEAR\", payload: year},\n\t\t\t\t\t];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch(action);\n\t\t},\n\t\t[dispatch]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<TextField\n\t\t\t\tselect\n\t\t\t\terror={isError && !group.faculty}\n\t\t\t\tclassName=\"form-control\"\n\t\t\t\tvariant=\"standard\"\n\t\t\t\tid=\"group_faculty\"\n\t\t\t\tname=\"group_faculty\"\n\t\t\t\tlabel=\"Факультет:\"\n\t\t\t\thelperText=\"Выберите факультет, в котором Вы обучаетесь\"\n\t\t\t\tSelectProps={{\n\t\t\t\t\tclassName: \"form-control__input\",\n\t\t\t\t\tonChange: handleSelectChange,\n\t\t\t\t\tvalue: group.faculty,\n\t\t\t\t}}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: \"form-control__label\",\n\t\t\t\t\thtmlFor: \"group_faculty\",\n\t\t\t\t}}\n\t\t\t\tFormHelperTextProps={{\n\t\t\t\t\tclassName: \"form-control__helper-text\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{facultyOptions}\n\t\t\t</TextField>\n\t\t\t<TextField\n\t\t\t\tselect\n\t\t\t\terror={isError && !group.id}\n\t\t\t\tclassName=\"form-control\"\n\t\t\t\tvariant=\"standard\"\n\t\t\t\tid=\"group_name\"\n\t\t\t\tname=\"group_name\"\n\t\t\t\tlabel=\"Группа:\"\n\t\t\t\thelperText=\"Выберите группу, в которой Вы обучаетесь\"\n\t\t\t\tdisabled={groupOptions.length === 0}\n\t\t\t\tSelectProps={{\n\t\t\t\t\tclassName: \"form-control__input\",\n\t\t\t\t\tonChange: handleSelectChange,\n\t\t\t\t\tvalue: group.id !== 0 ? group.id : \"\",\n\t\t\t\t}}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: \"form-control__label\",\n\t\t\t\t\thtmlFor: \"group_name\",\n\t\t\t\t}}\n\t\t\t\tFormHelperTextProps={{\n\t\t\t\t\tclassName: \"form-control__helper-text\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{groupOptions}\n\t\t\t</TextField>\n\t\t</>\n\t);\n});\n\nexport default GroupSelect;\n","import React, {useCallback, useRef, useState} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport GroupSelect, {IGroupSelect} from \"./GroupSelect\";\nimport {IGroup} from \"../../types\";\nimport ScheduleAPI from \"../../API\";\n\nimport \"../../styles/SignUpPage.scss\";\n\ntype Error = \"name\" | \"login\" | \"password\" | \"group\" | null;\n\nfunction SignUpPage() {\n\tconst [error, setError] = useState<Error>(null);\n\tconst [name, setName] = useState(\"\");\n\tconst [login, setLogin] = useState(\"\");\n\tconst [password, setPassword] = useState(\"\");\n\tconst groupRef = useRef<IGroupSelect>();\n\tconst navigate = useNavigate();\n\n\t//#region CALLBACKS\n\tconst handleSubmit = useCallback<React.FormEventHandler<HTMLFormElement>>(\n\t\te => {\n\t\t\te.preventDefault();\n\t\t\tif (error) return;\n\t\t\tif (!groupRef.current) {\n\t\t\t\tsetError(\"group\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst group = groupRef.current?.getState();\n\t\t\t// Check if all of the fields are set\n\t\t\tif (\n\t\t\t\t!group ||\n\t\t\t\t!Object.keys(group).every(key => !!group[key as keyof IGroup])\n\t\t\t) {\n\t\t\t\tsetError(\"group\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!name) {\n\t\t\t\tsetError(\"name\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!login) {\n\t\t\t\tsetError(\"login\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!password) {\n\t\t\t\tsetError(\"password\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst abortController = new AbortController();\n\t\t\tScheduleAPI.signUp(\n\t\t\t\t{\n\t\t\t\t\tname,\n\t\t\t\t\tlogin,\n\t\t\t\t\tpassword,\n\t\t\t\t\tgroup,\n\t\t\t\t},\n\t\t\t\tabortController\n\t\t\t)\n\t\t\t\t.then(user => {\n\t\t\t\t\tif (!user) {\n\t\t\t\t\t\tsetError(\"login\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsessionStorage.setItem(\"user\", JSON.stringify(user));\n\t\t\t\t\tnavigate(`/schedule?group=${group?.id}`, {\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tif (!abortController.signal.aborted) {\n\t\t\t\t\t\tsetError(\"login\");\n\t\t\t\t\t\tconsole.error(err.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\t[name, login, password, error, navigate]\n\t);\n\n\tconst handleInputChange = useCallback<\n\t\tReact.ChangeEventHandler<HTMLInputElement>\n\t>(\n\t\t({target}) => {\n\t\t\tconst {name, value} = target;\n\t\t\tlet updateFunction: React.Dispatch<React.SetStateAction<string>>;\n\t\t\tswitch (name) {\n\t\t\t\tcase \"user\":\n\t\t\t\t\tupdateFunction = setName;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"username\":\n\t\t\t\t\tupdateFunction = setLogin;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"user_password\":\n\t\t\t\t\tupdateFunction = setPassword;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdateFunction(value);\n\t\t},\n\t\t[setName, setLogin, setPassword]\n\t);\n\t//#endregion\n\n\treturn (\n\t\t<div className=\"page sign-up-page\">\n\t\t\t<h1 className=\"sign-up-page__header\">Расписание ЛГТУ</h1>\n\n\t\t\t<form\n\t\t\t\tclassName=\"sign-up-page__form\"\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\tmethod=\"post\"\n\t\t\t\tautoComplete=\"off\"\n\t\t\t>\n\t\t\t\t<TextField\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\terror={error === \"name\"}\n\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\tid=\"user\"\n\t\t\t\t\tname=\"user\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\tvalue={name}\n\t\t\t\t\tlabel=\"ФИО:\"\n\t\t\t\t\thelperText=\"Ваше настоящее имя, точно также, как написано в паспорте. Здесь нечего стесняться, все свои\"\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclassName: \"form-control__input\",\n\t\t\t\t\t\tinputProps: {\n\t\t\t\t\t\t\tautoComplete: \"new-password\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tclassName: \"form-control__label\",\n\t\t\t\t\t\thtmlFor: \"user\",\n\t\t\t\t\t}}\n\t\t\t\t\tFormHelperTextProps={{\n\t\t\t\t\t\tclassName: \"form-control__helper-text\",\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<TextField\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\terror={error === \"login\"}\n\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\tid=\"username\"\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\tvalue={login}\n\t\t\t\t\tlabel=\"Логин:\"\n\t\t\t\t\thelperText={\n\t\t\t\t\t\terror === \"login\"\n\t\t\t\t\t\t\t? !login\n\t\t\t\t\t\t\t\t? \"Поле должно быть заполнено\"\n\t\t\t\t\t\t\t\t: \"Данное имя уже занято другим пользователем\"\n\t\t\t\t\t\t\t: \"Уникальное имя пользователя, по которому Вы будете входить в приложение\"\n\t\t\t\t\t}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclassName: \"form-control__input\",\n\t\t\t\t\t\tinputProps: {\n\t\t\t\t\t\t\tautoComplete: \"new-password\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tclassName: \"form-control__label\",\n\t\t\t\t\t\thtmlFor: \"username\",\n\t\t\t\t\t}}\n\t\t\t\t\tFormHelperTextProps={{\n\t\t\t\t\t\tclassName: \"form-control__helper-text\",\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<TextField\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\terror={error === \"password\"}\n\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\tid=\"user_password\"\n\t\t\t\t\tname=\"user_password\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tlabel=\"Пароль:\"\n\t\t\t\t\thelperText={\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tРекомендуем задать сложный пароль, чтобы всякие{\" \"}\n\t\t\t\t\t\t\t<mark>керилы</mark> не смогли в будущем взломать Ваш аккаунт\n\t\t\t\t\t\t</span>\n\t\t\t\t\t}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclassName: \"form-control__input\",\n\t\t\t\t\t\tinputProps: {\n\t\t\t\t\t\t\tautoComplete: \"new-password\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tclassName: \"form-control__label\",\n\t\t\t\t\t\thtmlFor: \"user_password\",\n\t\t\t\t\t}}\n\t\t\t\t\tFormHelperTextProps={{\n\t\t\t\t\t\tclassName: \"form-control__helper-text\",\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<GroupSelect isError={error === \"group\"} ref={groupRef} />\n\t\t\t\t<Button className=\"form-button\" type=\"submit\">\n\t\t\t\t\tЗарегистрироваться\n\t\t\t\t</Button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default SignUpPage;\n","import React, {useMemo} from \"react\";\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport ChevronDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\nimport SpecialtyAccordion from \"./SpecialtyAccordion\";\nimport {FACULTY, ISpecialty} from \"../types\";\n\nimport \"../styles/FacultyAccordion.scss\";\n\ninterface IProps {\n\ttitle: FACULTY;\n\tspecialties?: ISpecialty[];\n}\n\nconst FacultyAccordion = ({title, specialties}: IProps) => {\n\tconst specialtyElements = useMemo(\n\t\t() => specialties?.map(specialty => <SpecialtyAccordion {...specialty} />),\n\t\t[specialties]\n\t);\n\n\treturn (\n\t\t<Accordion\n\t\t\tdisableGutters\n\t\t\tclassName=\"faculty-accordion\"\n\t\t\tTransitionProps={{unmountOnExit: true}}\n\t\t\televation={0}\n\t\t>\n\t\t\t<AccordionSummary\n\t\t\t\tclassName=\"faculty-accordion-summary\"\n\t\t\t\texpandIcon={<ChevronDownIcon sx={{fontSize: \"1rem\"}} />}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</AccordionSummary>\n\t\t\t<AccordionDetails className=\"faculty-accordion-details\">\n\t\t\t\t{specialtyElements}\n\t\t\t</AccordionDetails>\n\t\t</Accordion>\n\t);\n};\n\nexport default FacultyAccordion;\n","import React, {useEffect, useMemo, useState} from \"react\";\nimport {useLocation, useNavigate} from \"react-router-dom\";\nimport ScheduleAPI from \"../API\";\nimport FacultyAccordion from \"../components/FacultyAccordion\";\nimport {FACULTY, ISpecialty} from \"../types\";\n\nfunction SearchPage() {\n\tconst [results, setResults] = useState<\n\t\tPartial<Record<FACULTY, ISpecialty[]>>\n\t>({});\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tconst query = new URLSearchParams(location.search);\n\t\tconst searchString = query.get(\"q\");\n\t\tif (searchString) {\n\t\t\tScheduleAPI.searchGroup(searchString)\n\t\t\t\t.then(body => {\n\t\t\t\t\tsetResults(body || {});\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tif (process.env.NODE_ENV === \"development\") {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\tsetResults({});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}, [location.search]);\n\n\tconst facultyElements = useMemo(\n\t\t() =>\n\t\t\tObject.keys(results).map(faculty => (\n\t\t\t\t<FacultyAccordion\n\t\t\t\t\tkey={faculty}\n\t\t\t\t\ttitle={faculty as FACULTY}\n\t\t\t\t\tspecialties={results[faculty as FACULTY]}\n\t\t\t\t/>\n\t\t\t)),\n\t\t[results]\n\t);\n\n\treturn <div className=\"page search-page\">{facultyElements}</div>;\n}\n\nexport default SearchPage;\n","import React, {useCallback, useEffect, useMemo} from \"react\";\nimport {Route, Routes, useLocation, useNavigate} from \"react-router-dom\";\nimport PageHeader from \"./components/PageHeader\";\nimport MenuSlider from \"./components/MenuSlider\";\nimport ScheduleView from \"./pages/ScheduleView\";\nimport LandingPage from \"./pages/LandingPage\";\nimport PageFooter from \"./components/PageFooter\";\nimport EditSubjectPage from \"./pages/EditSubjectPage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport GroupsListPage from \"./pages/GroupsListPage\";\nimport Page404 from \"./pages/Page404\";\nimport SignUpPage from \"./pages/SignUpPage\";\nimport SearchPage from \"./pages/SearchPage\";\nimport {WEEK_TYPE} from \"./types\";\nimport {useDispatch, useSelector} from \"./store\";\nimport {actions as appActions} from \"./store/app\";\n\nimport \"./styles/App.scss\";\n\nfunction App() {\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst dispatch = useDispatch();\n\tconst {showMenu, showFooter, user, weekType} = useSelector(state => ({\n\t\tshowMenu: state.application.showMenu,\n\t\tshowFooter: state.application.showFooter,\n\t\tuser: state.application.user,\n\t\tweekType: state.schedule.currentWeek,\n\t}));\n\n\tuseEffect(() => {\n\t\tdispatch(appActions.closeMenu());\n\t\tif (location.pathname === \"/\") {\n\t\t\tif (user) {\n\t\t\t\tnavigate(\"/schedule\", {replace: true});\n\t\t\t} else {\n\t\t\t\tdispatch(appActions.showFooter());\n\t\t\t}\n\t\t} else {\n\t\t\tdispatch(appActions.hideFooter());\n\t\t\tif (location.pathname === \"/login\" && user) {\n\t\t\t\tnavigate(\"/schedule\", {replace: true});\n\t\t\t}\n\t\t}\n\t}, [location.pathname]); // eslint-disable-line\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener(\"keydown\", e => {\n\t\t\tif (e.key === \"Escape\") {\n\t\t\t\tnavigate(-1);\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tif (document.onkeydown)\n\t\t\t\tdocument.removeEventListener(\"keydown\", document.onkeydown);\n\t\t};\n\t}, []);\n\n\tconst toggleMenuVisibility = useCallback(() => {\n\t\tdispatch(appActions.toggleMenu());\n\t}, [dispatch]);\n\n\tconst appClassName = useMemo(() => {\n\t\tlet className = [\"app\"];\n\t\tif (showMenu) className.push(\"menu-active\");\n\t\tif (location.pathname === \"/schedule\") {\n\t\t\tclassName.push(WEEK_TYPE[weekType].toLowerCase());\n\t\t\tif (showFooter) dispatch(appActions.hideFooter());\n\t\t}\n\t\treturn className.join(\" \");\n\t}, [weekType, showMenu, location.pathname, showFooter, dispatch]);\n\n\treturn (\n\t\t<div className={appClassName}>\n\t\t\t<PageHeader />\n\t\t\t<MenuSlider\n\t\t\t\tonClose={toggleMenuVisibility}\n\t\t\t\tonOpen={toggleMenuVisibility}\n\t\t\t/>\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/\" element={<LandingPage />} />\n\t\t\t\t<Route path=\"/signup\" element={<SignUpPage />} />\n\t\t\t\t<Route path=\"/login\" element={<LoginPage />} />\n\t\t\t\t<Route path=\"/schedule\" element={<ScheduleView />} />\n\t\t\t\t<Route path=\"/create\" element={<EditSubjectPage />} />\n\t\t\t\t<Route path=\"/subject\" element={<EditSubjectPage />} />\n\t\t\t\t<Route path=\"/groups/*\" element={<GroupsListPage />} />\n\t\t\t\t<Route path=\"/search\" element={<SearchPage />} />\n\t\t\t\t<Route path=\"*\" element={<Page404 />} />\n\t\t\t</Routes>\n\t\t\t{showFooter && <PageFooter />}\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {Provider} from \"react-redux\";\nimport {BrowserRouter as Router} from \"react-router-dom\";\nimport App from \"./App\";\nimport store from \"./store\";\n// import reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<Router>\n\t\t\t\t<App />\n\t\t\t</Router>\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}